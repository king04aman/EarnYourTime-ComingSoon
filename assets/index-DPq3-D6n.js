(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function $y(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Mc={exports:{}},Uo={},Oc={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp;function qy(){if(tp)return Te;tp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=N&&V[N]||V["@@iterator"],typeof V=="function"?V:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Z={};function G(V,B,le){this.props=V,this.context=B,this.refs=Z,this.updater=le||q}G.prototype.isReactComponent={},G.prototype.setState=function(V,B){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,B,"setState")},G.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Ee(){}Ee.prototype=G.prototype;function ye(V,B,le){this.props=V,this.context=B,this.refs=Z,this.updater=le||q}var _e=ye.prototype=new Ee;_e.constructor=ye,J(_e,G.prototype),_e.isPureReactComponent=!0;var Se=Array.isArray,Je=Object.prototype.hasOwnProperty,Ne={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(V,B,le){var ve,we={},Ce=null,Le=null;if(B!=null)for(ve in B.ref!==void 0&&(Le=B.ref),B.key!==void 0&&(Ce=""+B.key),B)Je.call(B,ve)&&!P.hasOwnProperty(ve)&&(we[ve]=B[ve]);var Me=arguments.length-2;if(Me===1)we.children=le;else if(1<Me){for(var Ue=Array(Me),pt=0;pt<Me;pt++)Ue[pt]=arguments[pt+2];we.children=Ue}if(V&&V.defaultProps)for(ve in Me=V.defaultProps,Me)we[ve]===void 0&&(we[ve]=Me[ve]);return{$$typeof:i,type:V,key:Ce,ref:Le,props:we,_owner:Ne.current}}function A(V,B){return{$$typeof:i,type:V.type,key:B,ref:V.ref,props:V.props,_owner:V._owner}}function k(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function x(V){var B={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(le){return B[le]})}var D=/\/+/g;function S(V,B){return typeof V=="object"&&V!==null&&V.key!=null?x(""+V.key):B.toString(36)}function Ze(V,B,le,ve,we){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var Le=!1;if(V===null)Le=!0;else switch(Ce){case"string":case"number":Le=!0;break;case"object":switch(V.$$typeof){case i:case e:Le=!0}}if(Le)return Le=V,we=we(Le),V=ve===""?"."+S(Le,0):ve,Se(we)?(le="",V!=null&&(le=V.replace(D,"$&/")+"/"),Ze(we,B,le,"",function(pt){return pt})):we!=null&&(k(we)&&(we=A(we,le+(!we.key||Le&&Le.key===we.key?"":(""+we.key).replace(D,"$&/")+"/")+V)),B.push(we)),1;if(Le=0,ve=ve===""?".":ve+":",Se(V))for(var Me=0;Me<V.length;Me++){Ce=V[Me];var Ue=ve+S(Ce,Me);Le+=Ze(Ce,B,le,Ue,we)}else if(Ue=b(V),typeof Ue=="function")for(V=Ue.call(V),Me=0;!(Ce=V.next()).done;)Ce=Ce.value,Ue=ve+S(Ce,Me++),Le+=Ze(Ce,B,le,Ue,we);else if(Ce==="object")throw B=String(V),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Le}function Ct(V,B,le){if(V==null)return V;var ve=[],we=0;return Ze(V,ve,"","",function(Ce){return B.call(le,Ce,we++)}),ve}function kt(V){if(V._status===-1){var B=V._result;B=B(),B.then(function(le){(V._status===0||V._status===-1)&&(V._status=1,V._result=le)},function(le){(V._status===0||V._status===-1)&&(V._status=2,V._result=le)}),V._status===-1&&(V._status=0,V._result=B)}if(V._status===1)return V._result.default;throw V._result}var be={current:null},X={transition:null},ce={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:X,ReactCurrentOwner:Ne};function te(){throw Error("act(...) is not supported in production builds of React.")}return Te.Children={map:Ct,forEach:function(V,B,le){Ct(V,function(){B.apply(this,arguments)},le)},count:function(V){var B=0;return Ct(V,function(){B++}),B},toArray:function(V){return Ct(V,function(B){return B})||[]},only:function(V){if(!k(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Te.Component=G,Te.Fragment=n,Te.Profiler=a,Te.PureComponent=ye,Te.StrictMode=s,Te.Suspense=y,Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Te.act=te,Te.cloneElement=function(V,B,le){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var ve=J({},V.props),we=V.key,Ce=V.ref,Le=V._owner;if(B!=null){if(B.ref!==void 0&&(Ce=B.ref,Le=Ne.current),B.key!==void 0&&(we=""+B.key),V.type&&V.type.defaultProps)var Me=V.type.defaultProps;for(Ue in B)Je.call(B,Ue)&&!P.hasOwnProperty(Ue)&&(ve[Ue]=B[Ue]===void 0&&Me!==void 0?Me[Ue]:B[Ue])}var Ue=arguments.length-2;if(Ue===1)ve.children=le;else if(1<Ue){Me=Array(Ue);for(var pt=0;pt<Ue;pt++)Me[pt]=arguments[pt+2];ve.children=Me}return{$$typeof:i,type:V.type,key:we,ref:Ce,props:ve,_owner:Le}},Te.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:c,_context:V},V.Consumer=V},Te.createElement=T,Te.createFactory=function(V){var B=T.bind(null,V);return B.type=V,B},Te.createRef=function(){return{current:null}},Te.forwardRef=function(V){return{$$typeof:m,render:V}},Te.isValidElement=k,Te.lazy=function(V){return{$$typeof:I,_payload:{_status:-1,_result:V},_init:kt}},Te.memo=function(V,B){return{$$typeof:E,type:V,compare:B===void 0?null:B}},Te.startTransition=function(V){var B=X.transition;X.transition={};try{V()}finally{X.transition=B}},Te.unstable_act=te,Te.useCallback=function(V,B){return be.current.useCallback(V,B)},Te.useContext=function(V){return be.current.useContext(V)},Te.useDebugValue=function(){},Te.useDeferredValue=function(V){return be.current.useDeferredValue(V)},Te.useEffect=function(V,B){return be.current.useEffect(V,B)},Te.useId=function(){return be.current.useId()},Te.useImperativeHandle=function(V,B,le){return be.current.useImperativeHandle(V,B,le)},Te.useInsertionEffect=function(V,B){return be.current.useInsertionEffect(V,B)},Te.useLayoutEffect=function(V,B){return be.current.useLayoutEffect(V,B)},Te.useMemo=function(V,B){return be.current.useMemo(V,B)},Te.useReducer=function(V,B,le){return be.current.useReducer(V,B,le)},Te.useRef=function(V){return be.current.useRef(V)},Te.useState=function(V){return be.current.useState(V)},Te.useSyncExternalStore=function(V,B,le){return be.current.useSyncExternalStore(V,B,le)},Te.useTransition=function(){return be.current.useTransition()},Te.version="18.3.1",Te}var np;function gh(){return np||(np=1,Oc.exports=qy()),Oc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function Hy(){if(rp)return Uo;rp=1;var i=gh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(m,y,E){var I,N={},b=null,q=null;E!==void 0&&(b=""+E),y.key!==void 0&&(b=""+y.key),y.ref!==void 0&&(q=y.ref);for(I in y)s.call(y,I)&&!c.hasOwnProperty(I)&&(N[I]=y[I]);if(m&&m.defaultProps)for(I in y=m.defaultProps,y)N[I]===void 0&&(N[I]=y[I]);return{$$typeof:e,type:m,key:b,ref:q,props:N,_owner:a.current}}return Uo.Fragment=n,Uo.jsx=f,Uo.jsxs=f,Uo}var ip;function Qy(){return ip||(ip=1,Mc.exports=Hy()),Mc.exports}var U=Qy(),pn=gh(),Tl={},Fc={exports:{}},Wt={},bc={exports:{}},jc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function Wy(){return sp||(sp=1,function(i){function e(X,ce){var te=X.length;X.push(ce);e:for(;0<te;){var V=te-1>>>1,B=X[V];if(0<a(B,ce))X[V]=ce,X[te]=B,te=V;else break e}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ce=X[0],te=X.pop();if(te!==ce){X[0]=te;e:for(var V=0,B=X.length,le=B>>>1;V<le;){var ve=2*(V+1)-1,we=X[ve],Ce=ve+1,Le=X[Ce];if(0>a(we,te))Ce<B&&0>a(Le,we)?(X[V]=Le,X[Ce]=te,V=Ce):(X[V]=we,X[ve]=te,V=ve);else if(Ce<B&&0>a(Le,te))X[V]=Le,X[Ce]=te,V=Ce;else break e}}return ce}function a(X,ce){var te=X.sortIndex-ce.sortIndex;return te!==0?te:X.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var y=[],E=[],I=1,N=null,b=3,q=!1,J=!1,Z=!1,G=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _e(X){for(var ce=n(E);ce!==null;){if(ce.callback===null)s(E);else if(ce.startTime<=X)s(E),ce.sortIndex=ce.expirationTime,e(y,ce);else break;ce=n(E)}}function Se(X){if(Z=!1,_e(X),!J)if(n(y)!==null)J=!0,kt(Je);else{var ce=n(E);ce!==null&&be(Se,ce.startTime-X)}}function Je(X,ce){J=!1,Z&&(Z=!1,Ee(T),T=-1),q=!0;var te=b;try{for(_e(ce),N=n(y);N!==null&&(!(N.expirationTime>ce)||X&&!x());){var V=N.callback;if(typeof V=="function"){N.callback=null,b=N.priorityLevel;var B=V(N.expirationTime<=ce);ce=i.unstable_now(),typeof B=="function"?N.callback=B:N===n(y)&&s(y),_e(ce)}else s(y);N=n(y)}if(N!==null)var le=!0;else{var ve=n(E);ve!==null&&be(Se,ve.startTime-ce),le=!1}return le}finally{N=null,b=te,q=!1}}var Ne=!1,P=null,T=-1,A=5,k=-1;function x(){return!(i.unstable_now()-k<A)}function D(){if(P!==null){var X=i.unstable_now();k=X;var ce=!0;try{ce=P(!0,X)}finally{ce?S():(Ne=!1,P=null)}}else Ne=!1}var S;if(typeof ye=="function")S=function(){ye(D)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Ct=Ze.port2;Ze.port1.onmessage=D,S=function(){Ct.postMessage(null)}}else S=function(){G(D,0)};function kt(X){P=X,Ne||(Ne=!0,S())}function be(X,ce){T=G(function(){X(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){J||q||(J=!0,kt(Je))},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_getFirstCallbackNode=function(){return n(y)},i.unstable_next=function(X){switch(b){case 1:case 2:case 3:var ce=3;break;default:ce=b}var te=b;b=ce;try{return X()}finally{b=te}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var te=b;b=X;try{return ce()}finally{b=te}},i.unstable_scheduleCallback=function(X,ce,te){var V=i.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?V+te:V):te=V,X){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=te+B,X={id:I++,callback:ce,priorityLevel:X,startTime:te,expirationTime:B,sortIndex:-1},te>V?(X.sortIndex=te,e(E,X),n(y)===null&&X===n(E)&&(Z?(Ee(T),T=-1):Z=!0,be(Se,te-V))):(X.sortIndex=B,e(y,X),J||q||(J=!0,kt(Je))),X},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(X){var ce=b;return function(){var te=b;b=ce;try{return X.apply(this,arguments)}finally{b=te}}}}(jc)),jc}var op;function Gy(){return op||(op=1,bc.exports=Wy()),bc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap;function Ky(){if(ap)return Wt;ap=1;var i=gh(),e=Gy();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},N={};function b(t){return y.call(N,t)?!0:y.call(I,t)?!1:E.test(t)?N[t]=!0:(I[t]=!0,!1)}function q(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J(t,r,o,u){if(r===null||typeof r>"u"||q(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Z(t,r,o,u,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){G[t]=new Z(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];G[r]=new Z(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){G[t]=new Z(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){G[t]=new Z(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){G[t]=new Z(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){G[t]=new Z(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){G[t]=new Z(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){G[t]=new Z(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){G[t]=new Z(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ee=/[\-:]([a-z])/g;function ye(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(Ee,ye);G[r]=new Z(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(Ee,ye);G[r]=new Z(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(Ee,ye);G[r]=new Z(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){G[t]=new Z(t,1,!1,t.toLowerCase(),null,!1,!1)}),G.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){G[t]=new Z(t,1,!1,t.toLowerCase(),null,!0,!0)});function _e(t,r,o,u){var h=G.hasOwnProperty(r)?G[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(J(r,o,h,u)&&(o=null),u||h===null?b(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var Se=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Je=Symbol.for("react.element"),Ne=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),Ct=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),X=Symbol.iterator;function ce(t){return t===null||typeof t!="object"?null:(t=X&&t[X]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,V;function B(t){if(V===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);V=r&&r[1]||""}return`
`+V+t}var le=!1;function ve(t,r){if(!t||le)return"";le=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var u=F}Reflect.construct(t,[],r)}else{try{r.call()}catch(F){u=F}t.call(r.prototype)}else{try{throw Error()}catch(F){u=F}t()}}catch(F){if(F&&u&&typeof F.stack=="string"){for(var h=F.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,w=p.length-1;1<=_&&0<=w&&h[_]!==p[w];)w--;for(;1<=_&&0<=w;_--,w--)if(h[_]!==p[w]){if(_!==1||w!==1)do if(_--,w--,0>w||h[_]!==p[w]){var R=`
`+h[_].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=_&&0<=w);break}}}finally{le=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?B(t):""}function we(t){switch(t.tag){case 5:return B(t.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return t=ve(t.type,!1),t;case 11:return t=ve(t.type.render,!1),t;case 1:return t=ve(t.type,!0),t;default:return""}}function Ce(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case Ne:return"Portal";case A:return"Profiler";case T:return"StrictMode";case S:return"Suspense";case Ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case D:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ct:return r=t.displayName||null,r!==null?r:Ce(t.type)||"Memo";case kt:r=t._payload,t=t._init;try{return Ce(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(r);case 8:return r===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Me(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ue(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function pt(t){var r=Ue(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Gn(t){t._valueTracker||(t._valueTracker=pt(t))}function Di(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Ue(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function gr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xr(t,r){var o=r.checked;return te({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Li(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Me(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Hs(t,r){r=r.checked,r!=null&&_e(t,"checked",r,!1)}function Qs(t,r){Hs(t,r);var o=Me(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Mi(t,r.type,o):r.hasOwnProperty("defaultValue")&&Mi(t,r.type,Me(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function aa(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Mi(t,r,o){(r!=="number"||gr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Kn=Array.isArray;function Yn(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Me(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Ws(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return te({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Oi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Kn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Me(o)}}function Fi(t,r){var o=Me(r.value),u=Me(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function Gs(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function lt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?lt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xn,Ks=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(Xn=Xn||document.createElement("div"),Xn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Xn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function yr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zr=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(t){Zr.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Jr[r]=Jr[t]})});function Ys(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||Jr.hasOwnProperty(t)&&Jr[t]?(""+r).trim():r+"px"}function Xs(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=Ys(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var Js=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zs(t,r){if(r){if(Js[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function eo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ei=null;function bi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ji=null,nn=null,Ln=null;function Ui(t){if(t=Ao(t)){if(typeof ji!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Fa(r),ji(t.stateNode,t.type,r))}}function Mn(t){nn?Ln?Ln.push(t):Ln=[t]:nn=t}function to(){if(nn){var t=nn,r=Ln;if(Ln=nn=null,Ui(t),r)for(t=0;t<r.length;t++)Ui(r[t])}}function ti(t,r){return t(r)}function no(){}var Jn=!1;function ro(t,r,o){if(Jn)return t(r,o);Jn=!0;try{return ti(t,r,o)}finally{Jn=!1,(nn!==null||Ln!==null)&&(no(),to())}}function et(t,r){var o=t.stateNode;if(o===null)return null;var u=Fa(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var zi=!1;if(m)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){zi=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{zi=!1}function ni(t,r,o,u,h,p,_,w,R){var F=Array.prototype.slice.call(arguments,3);try{r.apply(o,F)}catch(Q){this.onError(Q)}}var ri=!1,Bi=null,yn=!1,io=null,uu={onError:function(t){ri=!0,Bi=t}};function $i(t,r,o,u,h,p,_,w,R){ri=!1,Bi=null,ni.apply(uu,arguments)}function la(t,r,o,u,h,p,_,w,R){if($i.apply(this,arguments),ri){if(ri){var F=Bi;ri=!1,Bi=null}else throw Error(n(198));yn||(yn=!0,io=F)}}function _n(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function ii(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function vn(t){if(_n(t)!==t)throw Error(n(188))}function ua(t){var r=t.alternate;if(!r){if(r=_n(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return vn(h),t;if(p===u)return vn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,w=h.child;w;){if(w===o){_=!0,o=h,u=p;break}if(w===u){_=!0,u=h,o=p;break}w=w.sibling}if(!_){for(w=p.child;w;){if(w===o){_=!0,o=p,u=h;break}if(w===u){_=!0,u=p,o=h;break}w=w.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function so(t){return t=ua(t),t!==null?qi(t):null}function qi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=qi(t);if(r!==null)return r;t=t.sibling}return null}var Hi=e.unstable_scheduleCallback,oo=e.unstable_cancelCallback,ca=e.unstable_shouldYield,cu=e.unstable_requestPaint,ze=e.unstable_now,ha=e.unstable_getCurrentPriorityLevel,si=e.unstable_ImmediatePriority,_r=e.unstable_UserBlockingPriority,rn=e.unstable_NormalPriority,ao=e.unstable_LowPriority,fa=e.unstable_IdlePriority,oi=null,Kt=null;function da(t){if(Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(oi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:ma,lo=Math.log,pa=Math.LN2;function ma(t){return t>>>=0,t===0?32:31-(lo(t)/pa|0)|0}var Qi=64,Wi=4194304;function vr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ai(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var w=_&~h;w!==0?u=vr(w):(p&=_,p!==0&&(u=vr(p)))}else _=o&~h,_!==0?u=vr(_):p!==0&&(u=vr(p));if(u===0)return 0;if(r!==0&&r!==u&&!(r&h)&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if(u&4&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Ot(r),h=1<<o,u|=t[o],r&=~h;return u}function hu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zn(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Ot(p),w=1<<_,R=h[_];R===-1?(!(w&o)||w&u)&&(h[_]=hu(w,r)):R<=r&&(t.expiredLanes|=w),p&=~w}}function Yt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function li(){var t=Qi;return Qi<<=1,!(Qi&4194240)&&(Qi=64),t}function Er(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function wr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ot(r),t[r]=o}function je(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Ot(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Tr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Ot(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Ae=0;function Ir(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ga,Gi,ya,_a,va,uo=!1,On=[],Et=null,En=null,wn=null,Sr=new Map,sn=new Map,Fn=[],fu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ea(t,r){switch(t){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Sr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":sn.delete(r.pointerId)}}function Ut(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Ao(r),r!==null&&Gi(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function du(t,r,o,u,h){switch(r){case"focusin":return Et=Ut(Et,t,r,o,u,h),!0;case"dragenter":return En=Ut(En,t,r,o,u,h),!0;case"mouseover":return wn=Ut(wn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Sr.set(p,Ut(Sr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,sn.set(p,Ut(sn.get(p)||null,t,r,o,u,h)),!0}return!1}function wa(t){var r=di(t.target);if(r!==null){var o=_n(r);if(o!==null){if(r=o.tag,r===13){if(r=ii(o),r!==null){t.blockedOn=r,va(t.priority,function(){ya(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function er(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=Ki(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);ei=u,o.target.dispatchEvent(u),ei=null}else return r=Ao(o),r!==null&&Gi(r),t.blockedOn=o,!1;r.shift()}return!0}function ui(t,r,o){er(t)&&o.delete(r)}function Ta(){uo=!1,Et!==null&&er(Et)&&(Et=null),En!==null&&er(En)&&(En=null),wn!==null&&er(wn)&&(wn=null),Sr.forEach(ui),sn.forEach(ui)}function Tn(t,r){t.blockedOn===r&&(t.blockedOn=null,uo||(uo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ta)))}function In(t){function r(h){return Tn(h,t)}if(0<On.length){Tn(On[0],t);for(var o=1;o<On.length;o++){var u=On[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Et!==null&&Tn(Et,t),En!==null&&Tn(En,t),wn!==null&&Tn(wn,t),Sr.forEach(r),sn.forEach(r),o=0;o<Fn.length;o++)u=Fn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Fn.length&&(o=Fn[0],o.blockedOn===null);)wa(o),o.blockedOn===null&&Fn.shift()}var tr=Se.ReactCurrentBatchConfig,Ar=!0;function Qe(t,r,o,u){var h=Ae,p=tr.transition;tr.transition=null;try{Ae=1,co(t,r,o,u)}finally{Ae=h,tr.transition=p}}function pu(t,r,o,u){var h=Ae,p=tr.transition;tr.transition=null;try{Ae=4,co(t,r,o,u)}finally{Ae=h,tr.transition=p}}function co(t,r,o,u){if(Ar){var h=Ki(t,r,o,u);if(h===null)Au(t,r,u,ci,o),Ea(t,u);else if(du(h,t,r,o,u))u.stopPropagation();else if(Ea(t,u),r&4&&-1<fu.indexOf(t)){for(;h!==null;){var p=Ao(h);if(p!==null&&ga(p),p=Ki(t,r,o,u),p===null&&Au(t,r,u,ci,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Au(t,r,u,null,o)}}var ci=null;function Ki(t,r,o,u){if(ci=null,t=bi(u),t=di(t),t!==null)if(r=_n(t),r===null)t=null;else if(o=r.tag,o===13){if(t=ii(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return ci=t,null}function ho(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ha()){case si:return 1;case _r:return 4;case rn:case ao:return 16;case fa:return 536870912;default:return 16}default:return 16}}var Xt=null,Yi=null,zt=null;function fo(){if(zt)return zt;var t,r=Yi,o=r.length,u,h="value"in Xt?Xt.value:Xt.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[p-u];u++);return zt=h.slice(t,1<u?1-u:void 0)}function Xi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function bn(){return!0}function po(){return!1}function wt(t){function r(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(o=t[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?bn:po,this.isPropagationStopped=po,this}return te(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=bn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=bn)},persist:function(){},isPersistent:bn}),r}var Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ji=wt(Sn),jn=te({},Sn,{view:0,detail:0}),mu=wt(jn),Zi,nr,Rr,hi=te({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Un,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rr&&(Rr&&t.type==="mousemove"?(Zi=t.screenX-Rr.screenX,nr=t.screenY-Rr.screenY):nr=Zi=0,Rr=t),Zi)},movementY:function(t){return"movementY"in t?t.movementY:nr}}),es=wt(hi),mo=te({},hi,{dataTransfer:0}),Ia=wt(mo),ts=te({},jn,{relatedTarget:0}),ns=wt(ts),Sa=te({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0}),rr=wt(Sa),Aa=te({},Sn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ra=wt(Aa),Ca=te({},Sn,{data:0}),go=wt(Ca),rs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ft={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ka={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pa(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=ka[t])?!!r[t]:!1}function Un(){return Pa}var l=te({},jn,{key:function(t){if(t.key){var r=rs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Xi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ft[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Un,charCode:function(t){return t.type==="keypress"?Xi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=wt(l),g=te({},hi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v=wt(g),L=te({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Un}),j=wt(L),Y=te({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fe=wt(Y),ct=te({},hi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ke=wt(ct),mt=[9,13,27,32],rt=m&&"CompositionEvent"in window,on=null;m&&"documentMode"in document&&(on=document.documentMode);var Jt=m&&"TextEvent"in window&&!on,fi=m&&(!rt||on&&8<on&&11>=on),is=" ",Gh=!1;function Kh(t,r){switch(t){case"keyup":return mt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ss=!1;function zg(t,r){switch(t){case"compositionend":return Yh(r);case"keypress":return r.which!==32?null:(Gh=!0,is);case"textInput":return t=r.data,t===is&&Gh?null:t;default:return null}}function Bg(t,r){if(ss)return t==="compositionend"||!rt&&Kh(t,r)?(t=fo(),zt=Yi=Xt=null,ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return fi&&r.locale!=="ko"?null:r.data;default:return null}}var $g={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!$g[t.type]:r==="textarea"}function Jh(t,r,o,u){Mn(u),r=La(r,"onChange"),0<r.length&&(o=new Ji("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var yo=null,_o=null;function qg(t){yf(t,0)}function xa(t){var r=cs(t);if(Di(r))return t}function Hg(t,r){if(t==="change")return r}var Zh=!1;if(m){var gu;if(m){var yu="oninput"in document;if(!yu){var ef=document.createElement("div");ef.setAttribute("oninput","return;"),yu=typeof ef.oninput=="function"}gu=yu}else gu=!1;Zh=gu&&(!document.documentMode||9<document.documentMode)}function tf(){yo&&(yo.detachEvent("onpropertychange",nf),_o=yo=null)}function nf(t){if(t.propertyName==="value"&&xa(_o)){var r=[];Jh(r,_o,t,bi(t)),ro(qg,r)}}function Qg(t,r,o){t==="focusin"?(tf(),yo=r,_o=o,yo.attachEvent("onpropertychange",nf)):t==="focusout"&&tf()}function Wg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xa(_o)}function Gg(t,r){if(t==="click")return xa(r)}function Kg(t,r){if(t==="input"||t==="change")return xa(r)}function Yg(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var An=typeof Object.is=="function"?Object.is:Yg;function vo(t,r){if(An(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(r,h)||!An(t[h],r[h]))return!1}return!0}function rf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sf(t,r){var o=rf(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=rf(o)}}function of(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?of(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function af(){for(var t=window,r=gr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=gr(t.document)}return r}function _u(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Xg(t){var r=af(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&of(o.ownerDocument.documentElement,o)){if(u!==null&&_u(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=sf(o,p);var _=sf(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jg=m&&"documentMode"in document&&11>=document.documentMode,os=null,vu=null,Eo=null,Eu=!1;function lf(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Eu||os==null||os!==gr(u)||(u=os,"selectionStart"in u&&_u(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Eo&&vo(Eo,u)||(Eo=u,u=La(vu,"onSelect"),0<u.length&&(r=new Ji("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=os)))}function Na(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var as={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},wu={},uf={};m&&(uf=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function Va(t){if(wu[t])return wu[t];if(!as[t])return t;var r=as[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in uf)return wu[t]=r[o];return t}var cf=Va("animationend"),hf=Va("animationiteration"),ff=Va("animationstart"),df=Va("transitionend"),pf=new Map,mf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(t,r){pf.set(t,r),c(r,[t])}for(var Tu=0;Tu<mf.length;Tu++){var Iu=mf[Tu],Zg=Iu.toLowerCase(),ey=Iu[0].toUpperCase()+Iu.slice(1);Cr(Zg,"on"+ey)}Cr(cf,"onAnimationEnd"),Cr(hf,"onAnimationIteration"),Cr(ff,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(df,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ty=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function gf(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,la(u,r,void 0,t),t.currentTarget=null}function yf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var w=u[_],R=w.instance,F=w.currentTarget;if(w=w.listener,R!==p&&h.isPropagationStopped())break e;gf(h,w,F),p=R}else for(_=0;_<u.length;_++){if(w=u[_],R=w.instance,F=w.currentTarget,w=w.listener,R!==p&&h.isPropagationStopped())break e;gf(h,w,F),p=R}}}if(yn)throw t=io,yn=!1,io=null,t}function $e(t,r){var o=r[Nu];o===void 0&&(o=r[Nu]=new Set);var u=t+"__bubble";o.has(u)||(_f(r,t,2,!1),o.add(u))}function Su(t,r,o){var u=0;r&&(u|=4),_f(o,t,u,r)}var Da="_reactListening"+Math.random().toString(36).slice(2);function To(t){if(!t[Da]){t[Da]=!0,s.forEach(function(o){o!=="selectionchange"&&(ty.has(o)||Su(o,!1,t),Su(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Da]||(r[Da]=!0,Su("selectionchange",!1,r))}}function _f(t,r,o,u){switch(ho(r)){case 1:var h=Qe;break;case 4:h=pu;break;default:h=co}o=h.bind(null,r,o,t),h=void 0,!zi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Au(t,r,o,u,h){var p=u;if(!(r&1)&&!(r&2)&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var w=u.stateNode.containerInfo;if(w===h||w.nodeType===8&&w.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var R=_.tag;if((R===3||R===4)&&(R=_.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;_=_.return}for(;w!==null;){if(_=di(w),_===null)return;if(R=_.tag,R===5||R===6){u=p=_;continue e}w=w.parentNode}}u=u.return}ro(function(){var F=p,Q=bi(o),W=[];e:{var H=pf.get(t);if(H!==void 0){var ee=Ji,ie=t;switch(t){case"keypress":if(Xi(o)===0)break e;case"keydown":case"keyup":ee=d;break;case"focusin":ie="focus",ee=ns;break;case"focusout":ie="blur",ee=ns;break;case"beforeblur":case"afterblur":ee=ns;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=es;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Ia;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=j;break;case cf:case hf:case ff:ee=rr;break;case df:ee=Fe;break;case"scroll":ee=mu;break;case"wheel":ee=ke;break;case"copy":case"cut":case"paste":ee=Ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=v}var oe=(r&4)!==0,tt=!oe&&t==="scroll",M=oe?H!==null?H+"Capture":null:H;oe=[];for(var C=F,O;C!==null;){O=C;var K=O.stateNode;if(O.tag===5&&K!==null&&(O=K,M!==null&&(K=et(C,M),K!=null&&oe.push(Io(C,K,O)))),tt)break;C=C.return}0<oe.length&&(H=new ee(H,ie,null,o,Q),W.push({event:H,listeners:oe}))}}if(!(r&7)){e:{if(H=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",H&&o!==ei&&(ie=o.relatedTarget||o.fromElement)&&(di(ie)||ie[ir]))break e;if((ee||H)&&(H=Q.window===Q?Q:(H=Q.ownerDocument)?H.defaultView||H.parentWindow:window,ee?(ie=o.relatedTarget||o.toElement,ee=F,ie=ie?di(ie):null,ie!==null&&(tt=_n(ie),ie!==tt||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(ee=null,ie=F),ee!==ie)){if(oe=es,K="onMouseLeave",M="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(oe=v,K="onPointerLeave",M="onPointerEnter",C="pointer"),tt=ee==null?H:cs(ee),O=ie==null?H:cs(ie),H=new oe(K,C+"leave",ee,o,Q),H.target=tt,H.relatedTarget=O,K=null,di(Q)===F&&(oe=new oe(M,C+"enter",ie,o,Q),oe.target=O,oe.relatedTarget=tt,K=oe),tt=K,ee&&ie)t:{for(oe=ee,M=ie,C=0,O=oe;O;O=ls(O))C++;for(O=0,K=M;K;K=ls(K))O++;for(;0<C-O;)oe=ls(oe),C--;for(;0<O-C;)M=ls(M),O--;for(;C--;){if(oe===M||M!==null&&oe===M.alternate)break t;oe=ls(oe),M=ls(M)}oe=null}else oe=null;ee!==null&&vf(W,H,ee,oe,!1),ie!==null&&tt!==null&&vf(W,tt,ie,oe,!0)}}e:{if(H=F?cs(F):window,ee=H.nodeName&&H.nodeName.toLowerCase(),ee==="select"||ee==="input"&&H.type==="file")var ae=Hg;else if(Xh(H))if(Zh)ae=Kg;else{ae=Wg;var he=Qg}else(ee=H.nodeName)&&ee.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(ae=Gg);if(ae&&(ae=ae(t,F))){Jh(W,ae,o,Q);break e}he&&he(t,H,F),t==="focusout"&&(he=H._wrapperState)&&he.controlled&&H.type==="number"&&Mi(H,"number",H.value)}switch(he=F?cs(F):window,t){case"focusin":(Xh(he)||he.contentEditable==="true")&&(os=he,vu=F,Eo=null);break;case"focusout":Eo=vu=os=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,lf(W,o,Q);break;case"selectionchange":if(Jg)break;case"keydown":case"keyup":lf(W,o,Q)}var fe;if(rt)e:{switch(t){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else ss?Kh(t,o)&&(de="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(de="onCompositionStart");de&&(fi&&o.locale!=="ko"&&(ss||de!=="onCompositionStart"?de==="onCompositionEnd"&&ss&&(fe=fo()):(Xt=Q,Yi="value"in Xt?Xt.value:Xt.textContent,ss=!0)),he=La(F,de),0<he.length&&(de=new go(de,t,null,o,Q),W.push({event:de,listeners:he}),fe?de.data=fe:(fe=Yh(o),fe!==null&&(de.data=fe)))),(fe=Jt?zg(t,o):Bg(t,o))&&(F=La(F,"onBeforeInput"),0<F.length&&(Q=new go("onBeforeInput","beforeinput",null,o,Q),W.push({event:Q,listeners:F}),Q.data=fe))}yf(W,r)})}function Io(t,r,o){return{instance:t,listener:r,currentTarget:o}}function La(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=et(t,o),p!=null&&u.unshift(Io(t,p,h)),p=et(t,r),p!=null&&u.push(Io(t,p,h))),t=t.return}return u}function ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vf(t,r,o,u,h){for(var p=r._reactName,_=[];o!==null&&o!==u;){var w=o,R=w.alternate,F=w.stateNode;if(R!==null&&R===u)break;w.tag===5&&F!==null&&(w=F,h?(R=et(o,p),R!=null&&_.unshift(Io(o,R,w))):h||(R=et(o,p),R!=null&&_.push(Io(o,R,w)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var ny=/\r\n?/g,ry=/\u0000|\uFFFD/g;function Ef(t){return(typeof t=="string"?t:""+t).replace(ny,`
`).replace(ry,"")}function Ma(t,r,o){if(r=Ef(r),Ef(t)!==r&&o)throw Error(n(425))}function Oa(){}var Ru=null,Cu=null;function ku(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pu=typeof setTimeout=="function"?setTimeout:void 0,iy=typeof clearTimeout=="function"?clearTimeout:void 0,wf=typeof Promise=="function"?Promise:void 0,sy=typeof queueMicrotask=="function"?queueMicrotask:typeof wf<"u"?function(t){return wf.resolve(null).then(t).catch(oy)}:Pu;function oy(t){setTimeout(function(){throw t})}function xu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),In(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);In(r)}function kr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Tf(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var us=Math.random().toString(36).slice(2),zn="__reactFiber$"+us,So="__reactProps$"+us,ir="__reactContainer$"+us,Nu="__reactEvents$"+us,ay="__reactListeners$"+us,ly="__reactHandles$"+us;function di(t){var r=t[zn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[ir]||o[zn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Tf(t);t!==null;){if(o=t[zn])return o;t=Tf(t)}return r}t=o,o=t.parentNode}return null}function Ao(t){return t=t[zn]||t[ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Fa(t){return t[So]||null}var Vu=[],hs=-1;function Pr(t){return{current:t}}function qe(t){0>hs||(t.current=Vu[hs],Vu[hs]=null,hs--)}function Be(t,r){hs++,Vu[hs]=t.current,t.current=r}var xr={},Pt=Pr(xr),Bt=Pr(!1),pi=xr;function fs(t,r){var o=t.type.contextTypes;if(!o)return xr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function $t(t){return t=t.childContextTypes,t!=null}function ba(){qe(Bt),qe(Pt)}function If(t,r,o){if(Pt.current!==xr)throw Error(n(168));Be(Pt,r),Be(Bt,o)}function Sf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Le(t)||"Unknown",h));return te({},o,u)}function ja(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xr,pi=Pt.current,Be(Pt,t),Be(Bt,Bt.current),!0}function Af(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Sf(t,r,pi),u.__reactInternalMemoizedMergedChildContext=t,qe(Bt),qe(Pt),Be(Pt,t)):qe(Bt),Be(Bt,o)}var sr=null,Ua=!1,Du=!1;function Rf(t){sr===null?sr=[t]:sr.push(t)}function uy(t){Ua=!0,Rf(t)}function Nr(){if(!Du&&sr!==null){Du=!0;var t=0,r=Ae;try{var o=sr;for(Ae=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}sr=null,Ua=!1}catch(h){throw sr!==null&&(sr=sr.slice(t+1)),Hi(si,Nr),h}finally{Ae=r,Du=!1}}return null}var ds=[],ps=0,za=null,Ba=0,an=[],ln=0,mi=null,or=1,ar="";function gi(t,r){ds[ps++]=Ba,ds[ps++]=za,za=t,Ba=r}function Cf(t,r,o){an[ln++]=or,an[ln++]=ar,an[ln++]=mi,mi=t;var u=or;t=ar;var h=32-Ot(u)-1;u&=~(1<<h),o+=1;var p=32-Ot(r)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,or=1<<32-Ot(r)+h|o<<h|u,ar=p+t}else or=1<<p|o<<h|u,ar=t}function Lu(t){t.return!==null&&(gi(t,1),Cf(t,1,0))}function Mu(t){for(;t===za;)za=ds[--ps],ds[ps]=null,Ba=ds[--ps],ds[ps]=null;for(;t===mi;)mi=an[--ln],an[ln]=null,ar=an[--ln],an[ln]=null,or=an[--ln],an[ln]=null}var Zt=null,en=null,We=!1,Rn=null;function kf(t,r){var o=fn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Pf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Zt=t,en=kr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Zt=t,en=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=mi!==null?{id:or,overflow:ar}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=fn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,Zt=t,en=null,!0):!1;default:return!1}}function Ou(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fu(t){if(We){var r=en;if(r){var o=r;if(!Pf(t,r)){if(Ou(t))throw Error(n(418));r=kr(o.nextSibling);var u=Zt;r&&Pf(t,r)?kf(u,o):(t.flags=t.flags&-4097|2,We=!1,Zt=t)}}else{if(Ou(t))throw Error(n(418));t.flags=t.flags&-4097|2,We=!1,Zt=t}}}function xf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function $a(t){if(t!==Zt)return!1;if(!We)return xf(t),We=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!ku(t.type,t.memoizedProps)),r&&(r=en)){if(Ou(t))throw Nf(),Error(n(418));for(;r;)kf(t,r),r=kr(r.nextSibling)}if(xf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){en=kr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}en=null}}else en=Zt?kr(t.stateNode.nextSibling):null;return!0}function Nf(){for(var t=en;t;)t=kr(t.nextSibling)}function ms(){en=Zt=null,We=!1}function bu(t){Rn===null?Rn=[t]:Rn.push(t)}var cy=Se.ReactCurrentBatchConfig;function Ro(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var w=h.refs;_===null?delete w[p]:w[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function qa(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Vf(t){var r=t._init;return r(t._payload)}function Df(t){function r(M,C){if(t){var O=M.deletions;O===null?(M.deletions=[C],M.flags|=16):O.push(C)}}function o(M,C){if(!t)return null;for(;C!==null;)r(M,C),C=C.sibling;return null}function u(M,C){for(M=new Map;C!==null;)C.key!==null?M.set(C.key,C):M.set(C.index,C),C=C.sibling;return M}function h(M,C){return M=jr(M,C),M.index=0,M.sibling=null,M}function p(M,C,O){return M.index=O,t?(O=M.alternate,O!==null?(O=O.index,O<C?(M.flags|=2,C):O):(M.flags|=2,C)):(M.flags|=1048576,C)}function _(M){return t&&M.alternate===null&&(M.flags|=2),M}function w(M,C,O,K){return C===null||C.tag!==6?(C=Pc(O,M.mode,K),C.return=M,C):(C=h(C,O),C.return=M,C)}function R(M,C,O,K){var ae=O.type;return ae===P?Q(M,C,O.props.children,K,O.key):C!==null&&(C.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===kt&&Vf(ae)===C.type)?(K=h(C,O.props),K.ref=Ro(M,C,O),K.return=M,K):(K=pl(O.type,O.key,O.props,null,M.mode,K),K.ref=Ro(M,C,O),K.return=M,K)}function F(M,C,O,K){return C===null||C.tag!==4||C.stateNode.containerInfo!==O.containerInfo||C.stateNode.implementation!==O.implementation?(C=xc(O,M.mode,K),C.return=M,C):(C=h(C,O.children||[]),C.return=M,C)}function Q(M,C,O,K,ae){return C===null||C.tag!==7?(C=Si(O,M.mode,K,ae),C.return=M,C):(C=h(C,O),C.return=M,C)}function W(M,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Pc(""+C,M.mode,O),C.return=M,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Je:return O=pl(C.type,C.key,C.props,null,M.mode,O),O.ref=Ro(M,null,C),O.return=M,O;case Ne:return C=xc(C,M.mode,O),C.return=M,C;case kt:var K=C._init;return W(M,K(C._payload),O)}if(Kn(C)||ce(C))return C=Si(C,M.mode,O,null),C.return=M,C;qa(M,C)}return null}function H(M,C,O,K){var ae=C!==null?C.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return ae!==null?null:w(M,C,""+O,K);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Je:return O.key===ae?R(M,C,O,K):null;case Ne:return O.key===ae?F(M,C,O,K):null;case kt:return ae=O._init,H(M,C,ae(O._payload),K)}if(Kn(O)||ce(O))return ae!==null?null:Q(M,C,O,K,null);qa(M,O)}return null}function ee(M,C,O,K,ae){if(typeof K=="string"&&K!==""||typeof K=="number")return M=M.get(O)||null,w(C,M,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Je:return M=M.get(K.key===null?O:K.key)||null,R(C,M,K,ae);case Ne:return M=M.get(K.key===null?O:K.key)||null,F(C,M,K,ae);case kt:var he=K._init;return ee(M,C,O,he(K._payload),ae)}if(Kn(K)||ce(K))return M=M.get(O)||null,Q(C,M,K,ae,null);qa(C,K)}return null}function ie(M,C,O,K){for(var ae=null,he=null,fe=C,de=C=0,_t=null;fe!==null&&de<O.length;de++){fe.index>de?(_t=fe,fe=null):_t=fe.sibling;var De=H(M,fe,O[de],K);if(De===null){fe===null&&(fe=_t);break}t&&fe&&De.alternate===null&&r(M,fe),C=p(De,C,de),he===null?ae=De:he.sibling=De,he=De,fe=_t}if(de===O.length)return o(M,fe),We&&gi(M,de),ae;if(fe===null){for(;de<O.length;de++)fe=W(M,O[de],K),fe!==null&&(C=p(fe,C,de),he===null?ae=fe:he.sibling=fe,he=fe);return We&&gi(M,de),ae}for(fe=u(M,fe);de<O.length;de++)_t=ee(fe,M,de,O[de],K),_t!==null&&(t&&_t.alternate!==null&&fe.delete(_t.key===null?de:_t.key),C=p(_t,C,de),he===null?ae=_t:he.sibling=_t,he=_t);return t&&fe.forEach(function(Ur){return r(M,Ur)}),We&&gi(M,de),ae}function oe(M,C,O,K){var ae=ce(O);if(typeof ae!="function")throw Error(n(150));if(O=ae.call(O),O==null)throw Error(n(151));for(var he=ae=null,fe=C,de=C=0,_t=null,De=O.next();fe!==null&&!De.done;de++,De=O.next()){fe.index>de?(_t=fe,fe=null):_t=fe.sibling;var Ur=H(M,fe,De.value,K);if(Ur===null){fe===null&&(fe=_t);break}t&&fe&&Ur.alternate===null&&r(M,fe),C=p(Ur,C,de),he===null?ae=Ur:he.sibling=Ur,he=Ur,fe=_t}if(De.done)return o(M,fe),We&&gi(M,de),ae;if(fe===null){for(;!De.done;de++,De=O.next())De=W(M,De.value,K),De!==null&&(C=p(De,C,de),he===null?ae=De:he.sibling=De,he=De);return We&&gi(M,de),ae}for(fe=u(M,fe);!De.done;de++,De=O.next())De=ee(fe,M,de,De.value,K),De!==null&&(t&&De.alternate!==null&&fe.delete(De.key===null?de:De.key),C=p(De,C,de),he===null?ae=De:he.sibling=De,he=De);return t&&fe.forEach(function(By){return r(M,By)}),We&&gi(M,de),ae}function tt(M,C,O,K){if(typeof O=="object"&&O!==null&&O.type===P&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Je:e:{for(var ae=O.key,he=C;he!==null;){if(he.key===ae){if(ae=O.type,ae===P){if(he.tag===7){o(M,he.sibling),C=h(he,O.props.children),C.return=M,M=C;break e}}else if(he.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===kt&&Vf(ae)===he.type){o(M,he.sibling),C=h(he,O.props),C.ref=Ro(M,he,O),C.return=M,M=C;break e}o(M,he);break}else r(M,he);he=he.sibling}O.type===P?(C=Si(O.props.children,M.mode,K,O.key),C.return=M,M=C):(K=pl(O.type,O.key,O.props,null,M.mode,K),K.ref=Ro(M,C,O),K.return=M,M=K)}return _(M);case Ne:e:{for(he=O.key;C!==null;){if(C.key===he)if(C.tag===4&&C.stateNode.containerInfo===O.containerInfo&&C.stateNode.implementation===O.implementation){o(M,C.sibling),C=h(C,O.children||[]),C.return=M,M=C;break e}else{o(M,C);break}else r(M,C);C=C.sibling}C=xc(O,M.mode,K),C.return=M,M=C}return _(M);case kt:return he=O._init,tt(M,C,he(O._payload),K)}if(Kn(O))return ie(M,C,O,K);if(ce(O))return oe(M,C,O,K);qa(M,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,C!==null&&C.tag===6?(o(M,C.sibling),C=h(C,O),C.return=M,M=C):(o(M,C),C=Pc(O,M.mode,K),C.return=M,M=C),_(M)):o(M,C)}return tt}var gs=Df(!0),Lf=Df(!1),Ha=Pr(null),Qa=null,ys=null,ju=null;function Uu(){ju=ys=Qa=null}function zu(t){var r=Ha.current;qe(Ha),t._currentValue=r}function Bu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function _s(t,r){Qa=t,ju=ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(qt=!0),t.firstContext=null)}function un(t){var r=t._currentValue;if(ju!==t)if(t={context:t,memoizedValue:r,next:null},ys===null){if(Qa===null)throw Error(n(308));ys=t,Qa.dependencies={lanes:0,firstContext:t}}else ys=ys.next=t;return r}var yi=null;function $u(t){yi===null?yi=[t]:yi.push(t)}function Mf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,$u(r)):(o.next=h.next,h.next=o),r.interleaved=o,lr(t,u)}function lr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Vr=!1;function qu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Of(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ur(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Dr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,Ve&2){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,lr(t,o)}return h=u.interleaved,h===null?(r.next=r,$u(u)):(r.next=h.next,h.next=r),u.interleaved=r,lr(t,o)}function Wa(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Tr(t,o)}}function Ff(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function Ga(t,r,o,u){var h=t.updateQueue;Vr=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var R=w,F=R.next;R.next=null,_===null?p=F:_.next=F,_=R;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,w=Q.lastBaseUpdate,w!==_&&(w===null?Q.firstBaseUpdate=F:w.next=F,Q.lastBaseUpdate=R))}if(p!==null){var W=h.baseState;_=0,Q=F=R=null,w=p;do{var H=w.lane,ee=w.eventTime;if((u&H)===H){Q!==null&&(Q=Q.next={eventTime:ee,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var ie=t,oe=w;switch(H=r,ee=o,oe.tag){case 1:if(ie=oe.payload,typeof ie=="function"){W=ie.call(ee,W,H);break e}W=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=oe.payload,H=typeof ie=="function"?ie.call(ee,W,H):ie,H==null)break e;W=te({},W,H);break e;case 2:Vr=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,H=h.effects,H===null?h.effects=[w]:H.push(w))}else ee={eventTime:ee,lane:H,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Q===null?(F=Q=ee,R=W):Q=Q.next=ee,_|=H;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;H=w,w=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);if(Q===null&&(R=W),h.baseState=R,h.firstBaseUpdate=F,h.lastBaseUpdate=Q,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Ei|=_,t.lanes=_,t.memoizedState=W}}function bf(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Co={},Bn=Pr(Co),ko=Pr(Co),Po=Pr(Co);function _i(t){if(t===Co)throw Error(n(174));return t}function Hu(t,r){switch(Be(Po,r),Be(ko,t),Be(Bn,Co),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ut(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ut(r,t)}qe(Bn),Be(Bn,r)}function vs(){qe(Bn),qe(ko),qe(Po)}function jf(t){_i(Po.current);var r=_i(Bn.current),o=ut(r,t.type);r!==o&&(Be(ko,t),Be(Bn,o))}function Qu(t){ko.current===t&&(qe(Bn),qe(ko))}var Ge=Pr(0);function Ka(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Wu=[];function Gu(){for(var t=0;t<Wu.length;t++)Wu[t]._workInProgressVersionPrimary=null;Wu.length=0}var Ya=Se.ReactCurrentDispatcher,Ku=Se.ReactCurrentBatchConfig,vi=0,Ke=null,ht=null,gt=null,Xa=!1,xo=!1,No=0,hy=0;function xt(){throw Error(n(321))}function Yu(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!An(t[o],r[o]))return!1;return!0}function Xu(t,r,o,u,h,p){if(vi=p,Ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ya.current=t===null||t.memoizedState===null?my:gy,t=o(u,h),xo){p=0;do{if(xo=!1,No=0,25<=p)throw Error(n(301));p+=1,gt=ht=null,r.updateQueue=null,Ya.current=yy,t=o(u,h)}while(xo)}if(Ya.current=el,r=ht!==null&&ht.next!==null,vi=0,gt=ht=Ke=null,Xa=!1,r)throw Error(n(300));return t}function Ju(){var t=No!==0;return No=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ke.memoizedState=gt=t:gt=gt.next=t,gt}function cn(){if(ht===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var r=gt===null?Ke.memoizedState:gt.next;if(r!==null)gt=r,ht=t;else{if(t===null)throw Error(n(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?Ke.memoizedState=gt=t:gt=gt.next=t}return gt}function Vo(t,r){return typeof r=="function"?r(t):r}function Zu(t){var r=cn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=ht,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var w=_=null,R=null,F=p;do{var Q=F.lane;if((vi&Q)===Q)R!==null&&(R=R.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),u=F.hasEagerState?F.eagerState:t(u,F.action);else{var W={lane:Q,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};R===null?(w=R=W,_=u):R=R.next=W,Ke.lanes|=Q,Ei|=Q}F=F.next}while(F!==null&&F!==p);R===null?_=u:R.next=w,An(u,r.memoizedState)||(qt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Ke.lanes|=p,Ei|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function ec(t){var r=cn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);An(p,r.memoizedState)||(qt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Uf(){}function zf(t,r){var o=Ke,u=cn(),h=r(),p=!An(u.memoizedState,h);if(p&&(u.memoizedState=h,qt=!0),u=u.queue,tc(qf.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||gt!==null&&gt.memoizedState.tag&1){if(o.flags|=2048,Do(9,$f.bind(null,o,u,h,r),void 0,null),yt===null)throw Error(n(349));vi&30||Bf(o,r,h)}return h}function Bf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Ke.updateQueue,r===null?(r={lastEffect:null,stores:null},Ke.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function $f(t,r,o,u){r.value=o,r.getSnapshot=u,Hf(r)&&Qf(t)}function qf(t,r,o){return o(function(){Hf(r)&&Qf(t)})}function Hf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!An(t,o)}catch{return!0}}function Qf(t){var r=lr(t,1);r!==null&&xn(r,t,1,-1)}function Wf(t){var r=$n();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:t},r.queue=t,t=t.dispatch=py.bind(null,Ke,t),[r.memoizedState,t]}function Do(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Ke.updateQueue,r===null?(r={lastEffect:null,stores:null},Ke.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function Gf(){return cn().memoizedState}function Ja(t,r,o,u){var h=$n();Ke.flags|=t,h.memoizedState=Do(1|r,o,void 0,u===void 0?null:u)}function Za(t,r,o,u){var h=cn();u=u===void 0?null:u;var p=void 0;if(ht!==null){var _=ht.memoizedState;if(p=_.destroy,u!==null&&Yu(u,_.deps)){h.memoizedState=Do(r,o,p,u);return}}Ke.flags|=t,h.memoizedState=Do(1|r,o,p,u)}function Kf(t,r){return Ja(8390656,8,t,r)}function tc(t,r){return Za(2048,8,t,r)}function Yf(t,r){return Za(4,2,t,r)}function Xf(t,r){return Za(4,4,t,r)}function Jf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Zf(t,r,o){return o=o!=null?o.concat([t]):null,Za(4,4,Jf.bind(null,r,t),o)}function nc(){}function ed(t,r){var o=cn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Yu(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function td(t,r){var o=cn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&Yu(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function nd(t,r,o){return vi&21?(An(o,r)||(o=li(),Ke.lanes|=o,Ei|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=o)}function fy(t,r){var o=Ae;Ae=o!==0&&4>o?o:4,t(!0);var u=Ku.transition;Ku.transition={};try{t(!1),r()}finally{Ae=o,Ku.transition=u}}function rd(){return cn().memoizedState}function dy(t,r,o){var u=Fr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},id(t))sd(r,o);else if(o=Mf(t,r,o,u),o!==null){var h=jt();xn(o,t,u,h),od(o,r,u)}}function py(t,r,o){var u=Fr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(id(t))sd(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,w=p(_,o);if(h.hasEagerState=!0,h.eagerState=w,An(w,_)){var R=r.interleaved;R===null?(h.next=h,$u(r)):(h.next=R.next,R.next=h),r.interleaved=h;return}}catch{}finally{}o=Mf(t,r,h,u),o!==null&&(h=jt(),xn(o,t,u,h),od(o,r,u))}}function id(t){var r=t.alternate;return t===Ke||r!==null&&r===Ke}function sd(t,r){xo=Xa=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function od(t,r,o){if(o&4194240){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Tr(t,o)}}var el={readContext:un,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},my={readContext:un,useCallback:function(t,r){return $n().memoizedState=[t,r===void 0?null:r],t},useContext:un,useEffect:Kf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,Ja(4194308,4,Jf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return Ja(4194308,4,t,r)},useInsertionEffect:function(t,r){return Ja(4,2,t,r)},useMemo:function(t,r){var o=$n();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=$n();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=dy.bind(null,Ke,t),[u.memoizedState,t]},useRef:function(t){var r=$n();return t={current:t},r.memoizedState=t},useState:Wf,useDebugValue:nc,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=Wf(!1),r=t[0];return t=fy.bind(null,t[1]),$n().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Ke,h=$n();if(We){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),yt===null)throw Error(n(349));vi&30||Bf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,Kf(qf.bind(null,u,p,t),[t]),u.flags|=2048,Do(9,$f.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=$n(),r=yt.identifierPrefix;if(We){var o=ar,u=or;o=(u&~(1<<32-Ot(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=No++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=hy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},gy={readContext:un,useCallback:ed,useContext:un,useEffect:tc,useImperativeHandle:Zf,useInsertionEffect:Yf,useLayoutEffect:Xf,useMemo:td,useReducer:Zu,useRef:Gf,useState:function(){return Zu(Vo)},useDebugValue:nc,useDeferredValue:function(t){var r=cn();return nd(r,ht.memoizedState,t)},useTransition:function(){var t=Zu(Vo)[0],r=cn().memoizedState;return[t,r]},useMutableSource:Uf,useSyncExternalStore:zf,useId:rd,unstable_isNewReconciler:!1},yy={readContext:un,useCallback:ed,useContext:un,useEffect:tc,useImperativeHandle:Zf,useInsertionEffect:Yf,useLayoutEffect:Xf,useMemo:td,useReducer:ec,useRef:Gf,useState:function(){return ec(Vo)},useDebugValue:nc,useDeferredValue:function(t){var r=cn();return ht===null?r.memoizedState=t:nd(r,ht.memoizedState,t)},useTransition:function(){var t=ec(Vo)[0],r=cn().memoizedState;return[t,r]},useMutableSource:Uf,useSyncExternalStore:zf,useId:rd,unstable_isNewReconciler:!1};function Cn(t,r){if(t&&t.defaultProps){r=te({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function rc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:te({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var tl={isMounted:function(t){return(t=t._reactInternals)?_n(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=jt(),h=Fr(t),p=ur(u,h);p.payload=r,o!=null&&(p.callback=o),r=Dr(t,p,h),r!==null&&(xn(r,t,h,u),Wa(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=jt(),h=Fr(t),p=ur(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Dr(t,p,h),r!==null&&(xn(r,t,h,u),Wa(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=jt(),u=Fr(t),h=ur(o,u);h.tag=2,r!=null&&(h.callback=r),r=Dr(t,h,u),r!==null&&(xn(r,t,u,o),Wa(r,t,u))}};function ad(t,r,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!vo(o,u)||!vo(h,p):!0}function ld(t,r,o){var u=!1,h=xr,p=r.contextType;return typeof p=="object"&&p!==null?p=un(p):(h=$t(r)?pi:Pt.current,u=r.contextTypes,p=(u=u!=null)?fs(t,h):xr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=tl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function ud(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&tl.enqueueReplaceState(r,r.state,null)}function ic(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},qu(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=un(p):(p=$t(r)?pi:Pt.current,h.context=fs(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(rc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&tl.enqueueReplaceState(h,h.state,null),Ga(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Es(t,r){try{var o="",u=r;do o+=we(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function sc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function oc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var _y=typeof WeakMap=="function"?WeakMap:Map;function cd(t,r,o){o=ur(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){ll||(ll=!0,wc=u),oc(t,r)},o}function hd(t,r,o){o=ur(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){oc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){oc(t,r),typeof u!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function fd(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new _y;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=Vy.bind(null,t,r,o),r.then(t,t))}function dd(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function pd(t,r,o,u,h){return t.mode&1?(t.flags|=65536,t.lanes=h,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=ur(-1,1),r.tag=2,Dr(o,r,1))),o.lanes|=1),t)}var vy=Se.ReactCurrentOwner,qt=!1;function bt(t,r,o,u){r.child=t===null?Lf(r,null,o,u):gs(r,t.child,o,u)}function md(t,r,o,u,h){o=o.render;var p=r.ref;return _s(r,h),u=Xu(t,r,o,u,p,h),o=Ju(),t!==null&&!qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,cr(t,r,h)):(We&&o&&Lu(r),r.flags|=1,bt(t,r,u,h),r.child)}function gd(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!kc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,yd(t,r,p,u,h)):(t=pl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&h)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:vo,o(_,u)&&t.ref===r.ref)return cr(t,r,h)}return r.flags|=1,t=jr(p,u),t.ref=r.ref,t.return=r,r.child=t}function yd(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(vo(p,u)&&t.ref===r.ref)if(qt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)t.flags&131072&&(qt=!0);else return r.lanes=t.lanes,cr(t,r,h)}return ac(t,r,o,u,h)}function _d(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Ts,tn),tn|=o;else{if(!(o&1073741824))return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Be(Ts,tn),tn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,Be(Ts,tn),tn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,Be(Ts,tn),tn|=u;return bt(t,r,h,o),r.child}function vd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function ac(t,r,o,u,h){var p=$t(o)?pi:Pt.current;return p=fs(r,p),_s(r,h),o=Xu(t,r,o,u,p,h),u=Ju(),t!==null&&!qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,cr(t,r,h)):(We&&u&&Lu(r),r.flags|=1,bt(t,r,o,h),r.child)}function Ed(t,r,o,u,h){if($t(o)){var p=!0;ja(r)}else p=!1;if(_s(r,h),r.stateNode===null)rl(t,r),ld(r,o,u),ic(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,w=r.memoizedProps;_.props=w;var R=_.context,F=o.contextType;typeof F=="object"&&F!==null?F=un(F):(F=$t(o)?pi:Pt.current,F=fs(r,F));var Q=o.getDerivedStateFromProps,W=typeof Q=="function"||typeof _.getSnapshotBeforeUpdate=="function";W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==u||R!==F)&&ud(r,_,u,F),Vr=!1;var H=r.memoizedState;_.state=H,Ga(r,u,_,h),R=r.memoizedState,w!==u||H!==R||Bt.current||Vr?(typeof Q=="function"&&(rc(r,o,Q,u),R=r.memoizedState),(w=Vr||ad(r,o,w,u,H,R,F))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=R),_.props=u,_.state=R,_.context=F,u=w):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Of(t,r),w=r.memoizedProps,F=r.type===r.elementType?w:Cn(r.type,w),_.props=F,W=r.pendingProps,H=_.context,R=o.contextType,typeof R=="object"&&R!==null?R=un(R):(R=$t(o)?pi:Pt.current,R=fs(r,R));var ee=o.getDerivedStateFromProps;(Q=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==W||H!==R)&&ud(r,_,u,R),Vr=!1,H=r.memoizedState,_.state=H,Ga(r,u,_,h);var ie=r.memoizedState;w!==W||H!==ie||Bt.current||Vr?(typeof ee=="function"&&(rc(r,o,ee,u),ie=r.memoizedState),(F=Vr||ad(r,o,F,u,H,ie,R)||!1)?(Q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ie,R),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ie,R)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ie),_.props=u,_.state=ie,_.context=R,u=F):(typeof _.componentDidUpdate!="function"||w===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),u=!1)}return lc(t,r,o,u,p,h)}function lc(t,r,o,u,h,p){vd(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&Af(r,o,!1),cr(t,r,p);u=r.stateNode,vy.current=r;var w=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=gs(r,t.child,null,p),r.child=gs(r,null,w,p)):bt(t,r,w,p),r.memoizedState=u.state,h&&Af(r,o,!0),r.child}function wd(t){var r=t.stateNode;r.pendingContext?If(t,r.pendingContext,r.pendingContext!==r.context):r.context&&If(t,r.context,!1),Hu(t,r.containerInfo)}function Td(t,r,o,u,h){return ms(),bu(h),r.flags|=256,bt(t,r,o,u),r.child}var uc={dehydrated:null,treeContext:null,retryLane:0};function cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Id(t,r,o){var u=r.pendingProps,h=Ge.current,p=!1,_=(r.flags&128)!==0,w;if((w=_)||(w=t!==null&&t.memoizedState===null?!1:(h&2)!==0),w?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),Be(Ge,h&1),t===null)return Fu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=_):p=ml(_,u,0,null),t=Si(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=cc(o),r.memoizedState=uc,t):hc(r,_));if(h=t.memoizedState,h!==null&&(w=h.dehydrated,w!==null))return Ey(t,r,_,u,w,h,o);if(p){p=u.fallback,_=r.mode,h=t.child,w=h.sibling;var R={mode:"hidden",children:u.children};return!(_&1)&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=R,r.deletions=null):(u=jr(h,R),u.subtreeFlags=h.subtreeFlags&14680064),w!==null?p=jr(w,p):(p=Si(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?cc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=uc,u}return p=t.child,t=p.sibling,u=jr(p,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function hc(t,r){return r=ml({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function nl(t,r,o,u){return u!==null&&bu(u),gs(r,t.child,null,o),t=hc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ey(t,r,o,u,h,p,_){if(o)return r.flags&256?(r.flags&=-257,u=sc(Error(n(422))),nl(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=ml({mode:"visible",children:u.children},h,0,null),p=Si(p,h,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,r.mode&1&&gs(r,t.child,null,_),r.child.memoizedState=cc(_),r.memoizedState=uc,p);if(!(r.mode&1))return nl(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var w=u.dgst;return u=w,p=Error(n(419)),u=sc(p,u,void 0),nl(t,r,_,u)}if(w=(_&t.childLanes)!==0,qt||w){if(u=yt,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(u.suspendedLanes|_)?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,lr(t,h),xn(u,t,h,-1))}return Cc(),u=sc(Error(n(421))),nl(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=Dy.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,en=kr(h.nextSibling),Zt=r,We=!0,Rn=null,t!==null&&(an[ln++]=or,an[ln++]=ar,an[ln++]=mi,or=t.id,ar=t.overflow,mi=r),r=hc(r,u.children),r.flags|=4096,r)}function Sd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Bu(t.return,r,o)}function fc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Ad(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(bt(t,r,u.children,o),u=Ge.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sd(t,o,r);else if(t.tag===19)Sd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Be(Ge,u),!(r.mode&1))r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&Ka(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),fc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&Ka(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}fc(r,!0,o,null,p);break;case"together":fc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function rl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function cr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Ei|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=jr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=jr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function wy(t,r,o){switch(r.tag){case 3:wd(r),ms();break;case 5:jf(r);break;case 1:$t(r.type)&&ja(r);break;case 4:Hu(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;Be(Ha,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(Be(Ge,Ge.current&1),r.flags|=128,null):o&r.child.childLanes?Id(t,r,o):(Be(Ge,Ge.current&1),t=cr(t,r,o),t!==null?t.sibling:null);Be(Ge,Ge.current&1);break;case 19:if(u=(o&r.childLanes)!==0,t.flags&128){if(u)return Ad(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Be(Ge,Ge.current),u)break;return null;case 22:case 23:return r.lanes=0,_d(t,r,o)}return cr(t,r,o)}var Rd,dc,Cd,kd;Rd=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},dc=function(){},Cd=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,_i(Bn.current);var p=null;switch(o){case"input":h=Xr(t,h),u=Xr(t,u),p=[];break;case"select":h=te({},h,{value:void 0}),u=te({},u,{value:void 0}),p=[];break;case"textarea":h=Ws(t,h),u=Ws(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Oa)}Zs(o,u);var _;o=null;for(F in h)if(!u.hasOwnProperty(F)&&h.hasOwnProperty(F)&&h[F]!=null)if(F==="style"){var w=h[F];for(_ in w)w.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(a.hasOwnProperty(F)?p||(p=[]):(p=p||[]).push(F,null));for(F in u){var R=u[F];if(w=h!=null?h[F]:void 0,u.hasOwnProperty(F)&&R!==w&&(R!=null||w!=null))if(F==="style")if(w){for(_ in w)!w.hasOwnProperty(_)||R&&R.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in R)R.hasOwnProperty(_)&&w[_]!==R[_]&&(o||(o={}),o[_]=R[_])}else o||(p||(p=[]),p.push(F,o)),o=R;else F==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,w=w?w.__html:void 0,R!=null&&w!==R&&(p=p||[]).push(F,R)):F==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(F,""+R):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(a.hasOwnProperty(F)?(R!=null&&F==="onScroll"&&$e("scroll",t),p||w===R||(p=[])):(p=p||[]).push(F,R))}o&&(p=p||[]).push("style",o);var F=p;(r.updateQueue=F)&&(r.flags|=4)}},kd=function(t,r,o,u){o!==u&&(r.flags|=4)};function Lo(t,r){if(!We)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Nt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function Ty(t,r,o){var u=r.pendingProps;switch(Mu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(r),null;case 1:return $t(r.type)&&ba(),Nt(r),null;case 3:return u=r.stateNode,vs(),qe(Bt),qe(Pt),Gu(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&($a(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Rn!==null&&(Sc(Rn),Rn=null))),dc(t,r),Nt(r),null;case 5:Qu(r);var h=_i(Po.current);if(o=r.type,t!==null&&r.stateNode!=null)Cd(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Nt(r),null}if(t=_i(Bn.current),$a(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[zn]=r,u[So]=p,t=(r.mode&1)!==0,o){case"dialog":$e("cancel",u),$e("close",u);break;case"iframe":case"object":case"embed":$e("load",u);break;case"video":case"audio":for(h=0;h<wo.length;h++)$e(wo[h],u);break;case"source":$e("error",u);break;case"img":case"image":case"link":$e("error",u),$e("load",u);break;case"details":$e("toggle",u);break;case"input":Li(u,p),$e("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},$e("invalid",u);break;case"textarea":Oi(u,p),$e("invalid",u)}Zs(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var w=p[_];_==="children"?typeof w=="string"?u.textContent!==w&&(p.suppressHydrationWarning!==!0&&Ma(u.textContent,w,t),h=["children",w]):typeof w=="number"&&u.textContent!==""+w&&(p.suppressHydrationWarning!==!0&&Ma(u.textContent,w,t),h=["children",""+w]):a.hasOwnProperty(_)&&w!=null&&_==="onScroll"&&$e("scroll",u)}switch(o){case"input":Gn(u),aa(u,p,!0);break;case"textarea":Gn(u),Gs(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Oa)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[zn]=r,t[So]=u,Rd(t,r,!1,!1),r.stateNode=t;e:{switch(_=eo(o,u),o){case"dialog":$e("cancel",t),$e("close",t),h=u;break;case"iframe":case"object":case"embed":$e("load",t),h=u;break;case"video":case"audio":for(h=0;h<wo.length;h++)$e(wo[h],t);h=u;break;case"source":$e("error",t),h=u;break;case"img":case"image":case"link":$e("error",t),$e("load",t),h=u;break;case"details":$e("toggle",t),h=u;break;case"input":Li(t,u),h=Xr(t,u),$e("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=te({},u,{value:void 0}),$e("invalid",t);break;case"textarea":Oi(t,u),h=Ws(t,u),$e("invalid",t);break;default:h=u}Zs(o,h),w=h;for(p in w)if(w.hasOwnProperty(p)){var R=w[p];p==="style"?Xs(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Ks(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&yr(t,R):typeof R=="number"&&yr(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?R!=null&&p==="onScroll"&&$e("scroll",t):R!=null&&_e(t,p,R,_))}switch(o){case"input":Gn(t),aa(t,u,!1);break;case"textarea":Gn(t),Gs(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Me(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?Yn(t,!!u.multiple,p,!1):u.defaultValue!=null&&Yn(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Oa)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Nt(r),null;case 6:if(t&&r.stateNode!=null)kd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=_i(Po.current),_i(Bn.current),$a(r)){if(u=r.stateNode,o=r.memoizedProps,u[zn]=r,(p=u.nodeValue!==o)&&(t=Zt,t!==null))switch(t.tag){case 3:Ma(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ma(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[zn]=r,r.stateNode=u}return Nt(r),null;case 13:if(qe(Ge),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(We&&en!==null&&r.mode&1&&!(r.flags&128))Nf(),ms(),r.flags|=98560,p=!1;else if(p=$a(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[zn]=r}else ms(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Nt(r),p=!1}else Rn!==null&&(Sc(Rn),Rn=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,r.mode&1&&(t===null||Ge.current&1?ft===0&&(ft=3):Cc())),r.updateQueue!==null&&(r.flags|=4),Nt(r),null);case 4:return vs(),dc(t,r),t===null&&To(r.stateNode.containerInfo),Nt(r),null;case 10:return zu(r.type._context),Nt(r),null;case 17:return $t(r.type)&&ba(),Nt(r),null;case 19:if(qe(Ge),p=r.memoizedState,p===null)return Nt(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)Lo(p,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(_=Ka(t),_!==null){for(r.flags|=128,Lo(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return Be(Ge,Ge.current&1|2),r.child}t=t.sibling}p.tail!==null&&ze()>Is&&(r.flags|=128,u=!0,Lo(p,!1),r.lanes=4194304)}else{if(!u)if(t=Ka(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),Lo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!We)return Nt(r),null}else 2*ze()-p.renderingStartTime>Is&&o!==1073741824&&(r.flags|=128,u=!0,Lo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=ze(),r.sibling=null,o=Ge.current,Be(Ge,u?o&1|2:o&1),r):(Nt(r),null);case 22:case 23:return Rc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&r.mode&1?tn&1073741824&&(Nt(r),r.subtreeFlags&6&&(r.flags|=8192)):Nt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function Iy(t,r){switch(Mu(r),r.tag){case 1:return $t(r.type)&&ba(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return vs(),qe(Bt),qe(Pt),Gu(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return Qu(r),null;case 13:if(qe(Ge),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));ms()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return qe(Ge),null;case 4:return vs(),null;case 10:return zu(r.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var il=!1,Vt=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,re=null;function ws(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Xe(t,r,u)}else o.current=null}function pc(t,r,o){try{o()}catch(u){Xe(t,r,u)}}var Pd=!1;function Ay(t,r){if(Ru=Ar,t=af(),_u(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,w=-1,R=-1,F=0,Q=0,W=t,H=null;t:for(;;){for(var ee;W!==o||h!==0&&W.nodeType!==3||(w=_+h),W!==p||u!==0&&W.nodeType!==3||(R=_+u),W.nodeType===3&&(_+=W.nodeValue.length),(ee=W.firstChild)!==null;)H=W,W=ee;for(;;){if(W===t)break t;if(H===o&&++F===h&&(w=_),H===p&&++Q===u&&(R=_),(ee=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=ee}o=w===-1||R===-1?null:{start:w,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Cu={focusedElem:t,selectionRange:o},Ar=!1,re=r;re!==null;)if(r=re,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,re=t;else for(;re!==null;){r=re;try{var ie=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var oe=ie.memoizedProps,tt=ie.memoizedState,M=r.stateNode,C=M.getSnapshotBeforeUpdate(r.elementType===r.type?oe:Cn(r.type,oe),tt);M.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var O=r.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){Xe(r,r.return,K)}if(t=r.sibling,t!==null){t.return=r.return,re=t;break}re=r.return}return ie=Pd,Pd=!1,ie}function Mo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&pc(r,o,p)}h=h.next}while(h!==u)}}function sl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function mc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function xd(t){var r=t.alternate;r!==null&&(t.alternate=null,xd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[zn],delete r[So],delete r[Nu],delete r[ay],delete r[ly])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nd(t){return t.tag===5||t.tag===3||t.tag===4}function Vd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Oa));else if(u!==4&&(t=t.child,t!==null))for(gc(t,r,o),t=t.sibling;t!==null;)gc(t,r,o),t=t.sibling}function yc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(yc(t,r,o),t=t.sibling;t!==null;)yc(t,r,o),t=t.sibling}var Tt=null,kn=!1;function Lr(t,r,o){for(o=o.child;o!==null;)Dd(t,r,o),o=o.sibling}function Dd(t,r,o){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(oi,o)}catch{}switch(o.tag){case 5:Vt||ws(o,r);case 6:var u=Tt,h=kn;Tt=null,Lr(t,r,o),Tt=u,kn=h,Tt!==null&&(kn?(t=Tt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Tt.removeChild(o.stateNode));break;case 18:Tt!==null&&(kn?(t=Tt,o=o.stateNode,t.nodeType===8?xu(t.parentNode,o):t.nodeType===1&&xu(t,o),In(t)):xu(Tt,o.stateNode));break;case 4:u=Tt,h=kn,Tt=o.stateNode.containerInfo,kn=!0,Lr(t,r,o),Tt=u,kn=h;break;case 0:case 11:case 14:case 15:if(!Vt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&(p&2||p&4)&&pc(o,r,_),h=h.next}while(h!==u)}Lr(t,r,o);break;case 1:if(!Vt&&(ws(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(w){Xe(o,r,w)}Lr(t,r,o);break;case 21:Lr(t,r,o);break;case 22:o.mode&1?(Vt=(u=Vt)||o.memoizedState!==null,Lr(t,r,o),Vt=u):Lr(t,r,o);break;default:Lr(t,r,o)}}function Ld(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new Sy),r.forEach(function(u){var h=Ly.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Pn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=r,w=_;e:for(;w!==null;){switch(w.tag){case 5:Tt=w.stateNode,kn=!1;break e;case 3:Tt=w.stateNode.containerInfo,kn=!0;break e;case 4:Tt=w.stateNode.containerInfo,kn=!0;break e}w=w.return}if(Tt===null)throw Error(n(160));Dd(p,_,h),Tt=null,kn=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(F){Xe(h,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Md(r,t),r=r.sibling}function Md(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(r,t),qn(t),u&4){try{Mo(3,t,t.return),sl(3,t)}catch(oe){Xe(t,t.return,oe)}try{Mo(5,t,t.return)}catch(oe){Xe(t,t.return,oe)}}break;case 1:Pn(r,t),qn(t),u&512&&o!==null&&ws(o,o.return);break;case 5:if(Pn(r,t),qn(t),u&512&&o!==null&&ws(o,o.return),t.flags&32){var h=t.stateNode;try{yr(h,"")}catch(oe){Xe(t,t.return,oe)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,w=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{w==="input"&&p.type==="radio"&&p.name!=null&&Hs(h,p),eo(w,_);var F=eo(w,p);for(_=0;_<R.length;_+=2){var Q=R[_],W=R[_+1];Q==="style"?Xs(h,W):Q==="dangerouslySetInnerHTML"?Ks(h,W):Q==="children"?yr(h,W):_e(h,Q,W,F)}switch(w){case"input":Qs(h,p);break;case"textarea":Fi(h,p);break;case"select":var H=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var ee=p.value;ee!=null?Yn(h,!!p.multiple,ee,!1):H!==!!p.multiple&&(p.defaultValue!=null?Yn(h,!!p.multiple,p.defaultValue,!0):Yn(h,!!p.multiple,p.multiple?[]:"",!1))}h[So]=p}catch(oe){Xe(t,t.return,oe)}}break;case 6:if(Pn(r,t),qn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(oe){Xe(t,t.return,oe)}}break;case 3:if(Pn(r,t),qn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{In(r.containerInfo)}catch(oe){Xe(t,t.return,oe)}break;case 4:Pn(r,t),qn(t);break;case 13:Pn(r,t),qn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Ec=ze())),u&4&&Ld(t);break;case 22:if(Q=o!==null&&o.memoizedState!==null,t.mode&1?(Vt=(F=Vt)||Q,Pn(r,t),Vt=F):Pn(r,t),qn(t),u&8192){if(F=t.memoizedState!==null,(t.stateNode.isHidden=F)&&!Q&&t.mode&1)for(re=t,Q=t.child;Q!==null;){for(W=re=Q;re!==null;){switch(H=re,ee=H.child,H.tag){case 0:case 11:case 14:case 15:Mo(4,H,H.return);break;case 1:ws(H,H.return);var ie=H.stateNode;if(typeof ie.componentWillUnmount=="function"){u=H,o=H.return;try{r=u,ie.props=r.memoizedProps,ie.state=r.memoizedState,ie.componentWillUnmount()}catch(oe){Xe(u,o,oe)}}break;case 5:ws(H,H.return);break;case 22:if(H.memoizedState!==null){bd(W);continue}}ee!==null?(ee.return=H,re=ee):bd(W)}Q=Q.sibling}e:for(Q=null,W=t;;){if(W.tag===5){if(Q===null){Q=W;try{h=W.stateNode,F?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(w=W.stateNode,R=W.memoizedProps.style,_=R!=null&&R.hasOwnProperty("display")?R.display:null,w.style.display=Ys("display",_))}catch(oe){Xe(t,t.return,oe)}}}else if(W.tag===6){if(Q===null)try{W.stateNode.nodeValue=F?"":W.memoizedProps}catch(oe){Xe(t,t.return,oe)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===t)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===t)break e;for(;W.sibling===null;){if(W.return===null||W.return===t)break e;Q===W&&(Q=null),W=W.return}Q===W&&(Q=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:Pn(r,t),qn(t),u&4&&Ld(t);break;case 21:break;default:Pn(r,t),qn(t)}}function qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Nd(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(yr(h,""),u.flags&=-33);var p=Vd(t);yc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,w=Vd(t);gc(t,w,_);break;default:throw Error(n(161))}}catch(R){Xe(t,t.return,R)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Ry(t,r,o){re=t,Od(t)}function Od(t,r,o){for(var u=(t.mode&1)!==0;re!==null;){var h=re,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||il;if(!_){var w=h.alternate,R=w!==null&&w.memoizedState!==null||Vt;w=il;var F=Vt;if(il=_,(Vt=R)&&!F)for(re=h;re!==null;)_=re,R=_.child,_.tag===22&&_.memoizedState!==null?jd(h):R!==null?(R.return=_,re=R):jd(h);for(;p!==null;)re=p,Od(p),p=p.sibling;re=h,il=w,Vt=F}Fd(t)}else h.subtreeFlags&8772&&p!==null?(p.return=h,re=p):Fd(t)}}function Fd(t){for(;re!==null;){var r=re;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Vt||sl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Vt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Cn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&bf(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}bf(r,_,o)}break;case 5:var w=r.stateNode;if(o===null&&r.flags&4){o=w;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var F=r.alternate;if(F!==null){var Q=F.memoizedState;if(Q!==null){var W=Q.dehydrated;W!==null&&In(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Vt||r.flags&512&&mc(r)}catch(H){Xe(r,r.return,H)}}if(r===t){re=null;break}if(o=r.sibling,o!==null){o.return=r.return,re=o;break}re=r.return}}function bd(t){for(;re!==null;){var r=re;if(r===t){re=null;break}var o=r.sibling;if(o!==null){o.return=r.return,re=o;break}re=r.return}}function jd(t){for(;re!==null;){var r=re;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{sl(4,r)}catch(R){Xe(r,o,R)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(R){Xe(r,h,R)}}var p=r.return;try{mc(r)}catch(R){Xe(r,p,R)}break;case 5:var _=r.return;try{mc(r)}catch(R){Xe(r,_,R)}}}catch(R){Xe(r,r.return,R)}if(r===t){re=null;break}var w=r.sibling;if(w!==null){w.return=r.return,re=w;break}re=r.return}}var Cy=Math.ceil,ol=Se.ReactCurrentDispatcher,_c=Se.ReactCurrentOwner,hn=Se.ReactCurrentBatchConfig,Ve=0,yt=null,it=null,It=0,tn=0,Ts=Pr(0),ft=0,Oo=null,Ei=0,al=0,vc=0,Fo=null,Ht=null,Ec=0,Is=1/0,hr=null,ll=!1,wc=null,Mr=null,ul=!1,Or=null,cl=0,bo=0,Tc=null,hl=-1,fl=0;function jt(){return Ve&6?ze():hl!==-1?hl:hl=ze()}function Fr(t){return t.mode&1?Ve&2&&It!==0?It&-It:cy.transition!==null?(fl===0&&(fl=li()),fl):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:ho(t.type)),t):1}function xn(t,r,o,u){if(50<bo)throw bo=0,Tc=null,Error(n(185));wr(t,o,u),(!(Ve&2)||t!==yt)&&(t===yt&&(!(Ve&2)&&(al|=o),ft===4&&br(t,It)),Qt(t,u),o===1&&Ve===0&&!(r.mode&1)&&(Is=ze()+500,Ua&&Nr()))}function Qt(t,r){var o=t.callbackNode;Zn(t,r);var u=ai(t,t===yt?It:0);if(u===0)o!==null&&oo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&oo(o),r===1)t.tag===0?uy(zd.bind(null,t)):Rf(zd.bind(null,t)),sy(function(){!(Ve&6)&&Nr()}),o=null;else{switch(Ir(u)){case 1:o=si;break;case 4:o=_r;break;case 16:o=rn;break;case 536870912:o=fa;break;default:o=rn}o=Kd(o,Ud.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function Ud(t,r){if(hl=-1,fl=0,Ve&6)throw Error(n(327));var o=t.callbackNode;if(Ss()&&t.callbackNode!==o)return null;var u=ai(t,t===yt?It:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=dl(t,u);else{r=u;var h=Ve;Ve|=2;var p=$d();(yt!==t||It!==r)&&(hr=null,Is=ze()+500,Ti(t,r));do try{xy();break}catch(w){Bd(t,w)}while(!0);Uu(),ol.current=p,Ve=h,it!==null?r=0:(yt=null,It=0,r=ft)}if(r!==0){if(r===2&&(h=Yt(t),h!==0&&(u=h,r=Ic(t,h))),r===1)throw o=Oo,Ti(t,0),br(t,u),Qt(t,ze()),o;if(r===6)br(t,u);else{if(h=t.current.alternate,!(u&30)&&!ky(h)&&(r=dl(t,u),r===2&&(p=Yt(t),p!==0&&(u=p,r=Ic(t,p))),r===1))throw o=Oo,Ti(t,0),br(t,u),Qt(t,ze()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Ii(t,Ht,hr);break;case 3:if(br(t,u),(u&130023424)===u&&(r=Ec+500-ze(),10<r)){if(ai(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){jt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Pu(Ii.bind(null,t,Ht,hr),r);break}Ii(t,Ht,hr);break;case 4:if(br(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-Ot(u);p=1<<_,_=r[_],_>h&&(h=_),u&=~p}if(u=h,u=ze()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Cy(u/1960))-u,10<u){t.timeoutHandle=Pu(Ii.bind(null,t,Ht,hr),u);break}Ii(t,Ht,hr);break;case 5:Ii(t,Ht,hr);break;default:throw Error(n(329))}}}return Qt(t,ze()),t.callbackNode===o?Ud.bind(null,t):null}function Ic(t,r){var o=Fo;return t.current.memoizedState.isDehydrated&&(Ti(t,r).flags|=256),t=dl(t,r),t!==2&&(r=Ht,Ht=o,r!==null&&Sc(r)),t}function Sc(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function ky(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!An(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function br(t,r){for(r&=~vc,r&=~al,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ot(r),u=1<<o;t[o]=-1,r&=~u}}function zd(t){if(Ve&6)throw Error(n(327));Ss();var r=ai(t,0);if(!(r&1))return Qt(t,ze()),null;var o=dl(t,r);if(t.tag!==0&&o===2){var u=Yt(t);u!==0&&(r=u,o=Ic(t,u))}if(o===1)throw o=Oo,Ti(t,0),br(t,r),Qt(t,ze()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ii(t,Ht,hr),Qt(t,ze()),null}function Ac(t,r){var o=Ve;Ve|=1;try{return t(r)}finally{Ve=o,Ve===0&&(Is=ze()+500,Ua&&Nr())}}function wi(t){Or!==null&&Or.tag===0&&!(Ve&6)&&Ss();var r=Ve;Ve|=1;var o=hn.transition,u=Ae;try{if(hn.transition=null,Ae=1,t)return t()}finally{Ae=u,hn.transition=o,Ve=r,!(Ve&6)&&Nr()}}function Rc(){tn=Ts.current,qe(Ts)}function Ti(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,iy(o)),it!==null)for(o=it.return;o!==null;){var u=o;switch(Mu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&ba();break;case 3:vs(),qe(Bt),qe(Pt),Gu();break;case 5:Qu(u);break;case 4:vs();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:zu(u.type._context);break;case 22:case 23:Rc()}o=o.return}if(yt=t,it=t=jr(t.current,null),It=tn=r,ft=0,Oo=null,vc=al=Ei=0,Ht=Fo=null,yi!==null){for(r=0;r<yi.length;r++)if(o=yi[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}yi=null}return t}function Bd(t,r){do{var o=it;try{if(Uu(),Ya.current=el,Xa){for(var u=Ke.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}Xa=!1}if(vi=0,gt=ht=Ke=null,xo=!1,No=0,_c.current=null,o===null||o.return===null){ft=1,Oo=r,it=null;break}e:{var p=t,_=o.return,w=o,R=r;if(r=It,w.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var F=R,Q=w,W=Q.tag;if(!(Q.mode&1)&&(W===0||W===11||W===15)){var H=Q.alternate;H?(Q.updateQueue=H.updateQueue,Q.memoizedState=H.memoizedState,Q.lanes=H.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ee=dd(_);if(ee!==null){ee.flags&=-257,pd(ee,_,w,p,r),ee.mode&1&&fd(p,F,r),r=ee,R=F;var ie=r.updateQueue;if(ie===null){var oe=new Set;oe.add(R),r.updateQueue=oe}else ie.add(R);break e}else{if(!(r&1)){fd(p,F,r),Cc();break e}R=Error(n(426))}}else if(We&&w.mode&1){var tt=dd(_);if(tt!==null){!(tt.flags&65536)&&(tt.flags|=256),pd(tt,_,w,p,r),bu(Es(R,w));break e}}p=R=Es(R,w),ft!==4&&(ft=2),Fo===null?Fo=[p]:Fo.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=cd(p,R,r);Ff(p,M);break e;case 1:w=R;var C=p.type,O=p.stateNode;if(!(p.flags&128)&&(typeof C.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Mr===null||!Mr.has(O)))){p.flags|=65536,r&=-r,p.lanes|=r;var K=hd(p,w,r);Ff(p,K);break e}}p=p.return}while(p!==null)}Hd(o)}catch(ae){r=ae,it===o&&o!==null&&(it=o=o.return);continue}break}while(!0)}function $d(){var t=ol.current;return ol.current=el,t===null?el:t}function Cc(){(ft===0||ft===3||ft===2)&&(ft=4),yt===null||!(Ei&268435455)&&!(al&268435455)||br(yt,It)}function dl(t,r){var o=Ve;Ve|=2;var u=$d();(yt!==t||It!==r)&&(hr=null,Ti(t,r));do try{Py();break}catch(h){Bd(t,h)}while(!0);if(Uu(),Ve=o,ol.current=u,it!==null)throw Error(n(261));return yt=null,It=0,ft}function Py(){for(;it!==null;)qd(it)}function xy(){for(;it!==null&&!ca();)qd(it)}function qd(t){var r=Gd(t.alternate,t,tn);t.memoizedProps=t.pendingProps,r===null?Hd(t):it=r,_c.current=null}function Hd(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=Iy(o,r),o!==null){o.flags&=32767,it=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,it=null;return}}else if(o=Ty(o,r,tn),o!==null){it=o;return}if(r=r.sibling,r!==null){it=r;return}it=r=t}while(r!==null);ft===0&&(ft=5)}function Ii(t,r,o){var u=Ae,h=hn.transition;try{hn.transition=null,Ae=1,Ny(t,r,o,u)}finally{hn.transition=h,Ae=u}return null}function Ny(t,r,o,u){do Ss();while(Or!==null);if(Ve&6)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(je(t,p),t===yt&&(it=yt=null,It=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||ul||(ul=!0,Kd(rn,function(){return Ss(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=hn.transition,hn.transition=null;var _=Ae;Ae=1;var w=Ve;Ve|=4,_c.current=null,Ay(t,o),Md(o,t),Xg(Cu),Ar=!!Ru,Cu=Ru=null,t.current=o,Ry(o),cu(),Ve=w,Ae=_,hn.transition=p}else t.current=o;if(ul&&(ul=!1,Or=t,cl=h),p=t.pendingLanes,p===0&&(Mr=null),da(o.stateNode),Qt(t,ze()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(ll)throw ll=!1,t=wc,wc=null,t;return cl&1&&t.tag!==0&&Ss(),p=t.pendingLanes,p&1?t===Tc?bo++:(bo=0,Tc=t):bo=0,Nr(),null}function Ss(){if(Or!==null){var t=Ir(cl),r=hn.transition,o=Ae;try{if(hn.transition=null,Ae=16>t?16:t,Or===null)var u=!1;else{if(t=Or,Or=null,cl=0,Ve&6)throw Error(n(331));var h=Ve;for(Ve|=4,re=t.current;re!==null;){var p=re,_=p.child;if(re.flags&16){var w=p.deletions;if(w!==null){for(var R=0;R<w.length;R++){var F=w[R];for(re=F;re!==null;){var Q=re;switch(Q.tag){case 0:case 11:case 15:Mo(8,Q,p)}var W=Q.child;if(W!==null)W.return=Q,re=W;else for(;re!==null;){Q=re;var H=Q.sibling,ee=Q.return;if(xd(Q),Q===F){re=null;break}if(H!==null){H.return=ee,re=H;break}re=ee}}}var ie=p.alternate;if(ie!==null){var oe=ie.child;if(oe!==null){ie.child=null;do{var tt=oe.sibling;oe.sibling=null,oe=tt}while(oe!==null)}}re=p}}if(p.subtreeFlags&2064&&_!==null)_.return=p,re=_;else e:for(;re!==null;){if(p=re,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Mo(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,re=M;break e}re=p.return}}var C=t.current;for(re=C;re!==null;){_=re;var O=_.child;if(_.subtreeFlags&2064&&O!==null)O.return=_,re=O;else e:for(_=C;re!==null;){if(w=re,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:sl(9,w)}}catch(ae){Xe(w,w.return,ae)}if(w===_){re=null;break e}var K=w.sibling;if(K!==null){K.return=w.return,re=K;break e}re=w.return}}if(Ve=h,Nr(),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(oi,t)}catch{}u=!0}return u}finally{Ae=o,hn.transition=r}}return!1}function Qd(t,r,o){r=Es(o,r),r=cd(t,r,1),t=Dr(t,r,1),r=jt(),t!==null&&(wr(t,1,r),Qt(t,r))}function Xe(t,r,o){if(t.tag===3)Qd(t,t,o);else for(;r!==null;){if(r.tag===3){Qd(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Mr===null||!Mr.has(u))){t=Es(o,t),t=hd(r,t,1),r=Dr(r,t,1),t=jt(),r!==null&&(wr(r,1,t),Qt(r,t));break}}r=r.return}}function Vy(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=jt(),t.pingedLanes|=t.suspendedLanes&o,yt===t&&(It&o)===o&&(ft===4||ft===3&&(It&130023424)===It&&500>ze()-Ec?Ti(t,0):vc|=o),Qt(t,r)}function Wd(t,r){r===0&&(t.mode&1?(r=Wi,Wi<<=1,!(Wi&130023424)&&(Wi=4194304)):r=1);var o=jt();t=lr(t,r),t!==null&&(wr(t,r,o),Qt(t,o))}function Dy(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),Wd(t,o)}function Ly(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),Wd(t,o)}var Gd;Gd=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Bt.current)qt=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return qt=!1,wy(t,r,o);qt=!!(t.flags&131072)}else qt=!1,We&&r.flags&1048576&&Cf(r,Ba,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;rl(t,r),t=r.pendingProps;var h=fs(r,Pt.current);_s(r,o),h=Xu(null,r,u,t,h,o);var p=Ju();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,$t(u)?(p=!0,ja(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,qu(r),h.updater=tl,r.stateNode=h,h._reactInternals=r,ic(r,u,t,o),r=lc(null,r,u,!0,p,o)):(r.tag=0,We&&p&&Lu(r),bt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(rl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=Oy(u),t=Cn(u,t),h){case 0:r=ac(null,r,u,t,o);break e;case 1:r=Ed(null,r,u,t,o);break e;case 11:r=md(null,r,u,t,o);break e;case 14:r=gd(null,r,u,Cn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Cn(u,h),ac(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Cn(u,h),Ed(t,r,u,h,o);case 3:e:{if(wd(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Of(t,r),Ga(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Es(Error(n(423)),r),r=Td(t,r,u,o,h);break e}else if(u!==h){h=Es(Error(n(424)),r),r=Td(t,r,u,o,h);break e}else for(en=kr(r.stateNode.containerInfo.firstChild),Zt=r,We=!0,Rn=null,o=Lf(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ms(),u===h){r=cr(t,r,o);break e}bt(t,r,u,o)}r=r.child}return r;case 5:return jf(r),t===null&&Fu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,ku(u,h)?_=null:p!==null&&ku(u,p)&&(r.flags|=32),vd(t,r),bt(t,r,_,o),r.child;case 6:return t===null&&Fu(r),null;case 13:return Id(t,r,o);case 4:return Hu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=gs(r,null,u,o):bt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Cn(u,h),md(t,r,u,h,o);case 7:return bt(t,r,r.pendingProps,o),r.child;case 8:return bt(t,r,r.pendingProps.children,o),r.child;case 12:return bt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,Be(Ha,u._currentValue),u._currentValue=_,p!==null)if(An(p.value,_)){if(p.children===h.children&&!Bt.current){r=cr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var w=p.dependencies;if(w!==null){_=p.child;for(var R=w.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=ur(-1,o&-o),R.tag=2;var F=p.updateQueue;if(F!==null){F=F.shared;var Q=F.pending;Q===null?R.next=R:(R.next=Q.next,Q.next=R),F.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),Bu(p.return,o,r),w.lanes|=o;break}R=R.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,w=_.alternate,w!==null&&(w.lanes|=o),Bu(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}bt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,_s(r,o),h=un(h),u=u(h),r.flags|=1,bt(t,r,u,o),r.child;case 14:return u=r.type,h=Cn(u,r.pendingProps),h=Cn(u.type,h),gd(t,r,u,h,o);case 15:return yd(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Cn(u,h),rl(t,r),r.tag=1,$t(u)?(t=!0,ja(r)):t=!1,_s(r,o),ld(r,u,h),ic(r,u,h,o),lc(null,r,u,!0,t,o);case 19:return Ad(t,r,o);case 22:return _d(t,r,o)}throw Error(n(156,r.tag))};function Kd(t,r){return Hi(t,r)}function My(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,r,o,u){return new My(t,r,o,u)}function kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oy(t){if(typeof t=="function")return kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===Ct)return 14}return 2}function jr(t,r){var o=t.alternate;return o===null?(o=fn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function pl(t,r,o,u,h,p){var _=2;if(u=t,typeof t=="function")kc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case P:return Si(o.children,h,p,r);case T:_=8,h|=8;break;case A:return t=fn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case S:return t=fn(13,o,r,h),t.elementType=S,t.lanes=p,t;case Ze:return t=fn(19,o,r,h),t.elementType=Ze,t.lanes=p,t;case be:return ml(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:_=10;break e;case x:_=9;break e;case D:_=11;break e;case Ct:_=14;break e;case kt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=fn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Si(t,r,o,u){return t=fn(7,t,u,r),t.lanes=o,t}function ml(t,r,o,u){return t=fn(22,t,u,r),t.elementType=be,t.lanes=o,t.stateNode={isHidden:!1},t}function Pc(t,r,o){return t=fn(6,t,null,r),t.lanes=o,t}function xc(t,r,o){return r=fn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function Fy(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Er(0),this.expirationTimes=Er(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Er(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Nc(t,r,o,u,h,p,_,w,R){return t=new Fy(t,r,o,w,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=fn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},qu(p),t}function by(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ne,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function Yd(t){if(!t)return xr;t=t._reactInternals;e:{if(_n(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if($t(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if($t(o))return Sf(t,o,r)}return r}function Xd(t,r,o,u,h,p,_,w,R){return t=Nc(o,u,!0,t,h,p,_,w,R),t.context=Yd(null),o=t.current,u=jt(),h=Fr(o),p=ur(u,h),p.callback=r??null,Dr(o,p,h),t.current.lanes=h,wr(t,h,u),Qt(t,u),t}function gl(t,r,o,u){var h=r.current,p=jt(),_=Fr(h);return o=Yd(o),r.context===null?r.context=o:r.pendingContext=o,r=ur(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Dr(h,r,_),t!==null&&(xn(t,h,_,p),Wa(t,h,_)),_}function yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jd(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Vc(t,r){Jd(t,r),(t=t.alternate)&&Jd(t,r)}var Zd=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dc(t){this._internalRoot=t}_l.prototype.render=Dc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));gl(t,r,null,null)},_l.prototype.unmount=Dc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;wi(function(){gl(null,t,null,null)}),r[ir]=null}};function _l(t){this._internalRoot=t}_l.prototype.unstable_scheduleHydration=function(t){if(t){var r=_a();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Fn.length&&r!==0&&r<Fn[o].priority;o++);Fn.splice(o,0,t),o===0&&wa(t)}};function Lc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ep(){}function jy(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var F=yl(_);p.call(F)}}var _=Xd(r,u,t,0,null,!1,!1,"",ep);return t._reactRootContainer=_,t[ir]=_.current,To(t.nodeType===8?t.parentNode:t),wi(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var w=u;u=function(){var F=yl(R);w.call(F)}}var R=Nc(t,0,!1,null,null,!1,!1,"",ep);return t._reactRootContainer=R,t[ir]=R.current,To(t.nodeType===8?t.parentNode:t),wi(function(){gl(r,R,o,u)}),R}function El(t,r,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var w=h;h=function(){var R=yl(_);w.call(R)}}gl(r,_,t,h)}else _=jy(o,r,t,h,u);return yl(_)}ga=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=vr(r.pendingLanes);o!==0&&(Tr(r,o|1),Qt(r,ze()),!(Ve&6)&&(Is=ze()+500,Nr()))}break;case 13:wi(function(){var u=lr(t,1);if(u!==null){var h=jt();xn(u,t,1,h)}}),Vc(t,1)}},Gi=function(t){if(t.tag===13){var r=lr(t,134217728);if(r!==null){var o=jt();xn(r,t,134217728,o)}Vc(t,134217728)}},ya=function(t){if(t.tag===13){var r=Fr(t),o=lr(t,r);if(o!==null){var u=jt();xn(o,t,r,u)}Vc(t,r)}},_a=function(){return Ae},va=function(t,r){var o=Ae;try{return Ae=t,r()}finally{Ae=o}},ji=function(t,r,o){switch(r){case"input":if(Qs(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Fa(u);if(!h)throw Error(n(90));Di(u),Qs(u,h)}}}break;case"textarea":Fi(t,o);break;case"select":r=o.value,r!=null&&Yn(t,!!o.multiple,r,!1)}},ti=Ac,no=wi;var Uy={usingClientEntryPoint:!1,Events:[Ao,cs,Fa,Mn,to,Ac]},jo={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zy={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Se.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=so(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{oi=wl.inject(zy),Kt=wl}catch{}}return Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uy,Wt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lc(r))throw Error(n(200));return by(t,r,null,o)},Wt.createRoot=function(t,r){if(!Lc(t))throw Error(n(299));var o=!1,u="",h=Zd;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Nc(t,1,!1,null,null,o,!1,u,h),t[ir]=r.current,To(t.nodeType===8?t.parentNode:t),new Dc(r)},Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=so(r),t=t===null?null:t.stateNode,t},Wt.flushSync=function(t){return wi(t)},Wt.hydrate=function(t,r,o){if(!vl(r))throw Error(n(200));return El(null,t,r,!0,o)},Wt.hydrateRoot=function(t,r,o){if(!Lc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=Zd;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=Xd(r,null,t,1,o??null,h,!1,p,_),t[ir]=r.current,To(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new _l(r)},Wt.render=function(t,r,o){if(!vl(r))throw Error(n(200));return El(null,t,r,!1,o)},Wt.unmountComponentAtNode=function(t){if(!vl(t))throw Error(n(40));return t._reactRootContainer?(wi(function(){El(null,null,t,!1,function(){t._reactRootContainer=null,t[ir]=null})}),!0):!1},Wt.unstable_batchedUpdates=Ac,Wt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!vl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return El(t,r,o,!1,u)},Wt.version="18.3.1-next-f1338f8080-20240426",Wt}var lp;function Yy(){if(lp)return Fc.exports;lp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Fc.exports=Ky(),Fc.exports}var up;function Xy(){if(up)return Tl;up=1;var i=Yy();return Tl.createRoot=i.createRoot,Tl.hydrateRoot=i.hydrateRoot,Tl}var Jy=Xy();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),um=(...i)=>i.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=pn.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:c,iconNode:f,...m},y)=>pn.createElement("svg",{ref:y,...e_,width:e,height:e,stroke:i,strokeWidth:s?Number(n)*24/Number(e):n,className:um("lucide",a),...m},[...f.map(([E,I])=>pn.createElement(E,I)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=(i,e)=>{const n=pn.forwardRef(({className:s,...a},c)=>pn.createElement(t_,{ref:c,iconNode:e,className:um(`lucide-${Zy(i)}`,s),...a}));return n.displayName=`${i}`,n};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Dn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=Dn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=Dn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=Dn("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=Dn("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=Dn("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=Dn("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=Dn("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=Dn("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=Dn("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=Dn("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),f_=({theme:i,toggleTheme:e,scroll:n,scrolled:s})=>U.jsx("nav",{className:`fixed w-full z-50 transition-all duration-300 ${n?`${i==="dark"?"bg-gray-900/80":"bg-white/80"} backdrop-blur-lg shadow-lg`:"bg-transparent"}`,children:U.jsxs("div",{className:"container mx-auto px-4 py-4",children:[U.jsxs("div",{className:"flex items-center justify-between",children:[U.jsxs("div",{className:"flex items-center space-x-3",children:[U.jsx("div",{className:`p-2 rounded-xl ${i==="dark"?"bg-blue-500":"bg-blue-600"}`,children:U.jsx(r_,{className:"w-6 h-6 text-white"})}),U.jsx("span",{className:"text-xl font-bold",children:"EarnYourTime"})]}),U.jsxs("div",{className:"flex items-center space-x-6",children:[U.jsx("button",{onClick:e,className:`p-2 rounded-full transition-colors ${i==="dark"?"bg-gray-800 text-yellow-500":"bg-gray-100 text-gray-600"}`,children:i==="dark"?U.jsx(l_,{className:"w-5 h-5"}):U.jsx(s_,{className:"w-5 h-5"})}),U.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-full flex items-center space-x-2 hover:bg-blue-700 transition-colors",children:[U.jsx(i_,{className:"w-4 h-4"}),U.jsx("span",{className:"text-xs sm:text-sm",children:"Star on GitHub"})]})]})]}),s>0&&U.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-blue-600 to-blue-400",style:{width:`${s}%`,transition:"width 0.2s ease-in-out"}})]})}),d_=({theme:i})=>U.jsxs("section",{className:"pt-32 pb-20 relative overflow-hidden",children:[U.jsx("div",{className:"container mx-auto px-4",children:U.jsxs("div",{className:"max-w-4xl mx-auto text-center relative z-10",children:[U.jsxs("div",{className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full mb-8 border backdrop-blur-sm\r
              transition-colors duration-300 dark:border-gray-800 dark:bg-gray-800/10\r
              border-gray-200 bg-white`,children:[U.jsx(h_,{className:`w-4 h-4 ${i==="dark"?"text-yellow-400":"text-yellow-500"}`}),U.jsx("span",{className:"text-sm",children:"Revolutionizing Digital Wellness"})]}),U.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-8 leading-tight",children:["Master Your Time,",U.jsx("span",{className:`block ${i==="dark"?"text-blue-400":"text-blue-600"}`,children:"Earn Your Breaks"})]}),U.jsx("p",{className:`text-xl mb-12 max-w-2xl mx-auto transition-colors duration-300\r
              dark:text-gray-400 text-gray-600`,children:"The first productivity app that syncs your PC work with mobile rewards, creating a perfect balance between focus and relaxation."}),U.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[U.jsxs("button",{className:`px-8 py-4 rounded-full font-medium inline-flex items-center space-x-2\r
                transition-all duration-300 transform hover:scale-105\r
                bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow-lg\r
                hover:shadow-blue-500/25`,children:[U.jsx("a",{href:"#join-waitlist",children:"Coming Soon"}),U.jsx(cm,{className:"w-5 h-5"})]}),U.jsx("a",{href:"#features",className:`px-8 py-4 rounded-full font-medium inline-flex items-center space-x-2
                transition-colors duration-300
                ${i==="dark"?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:"Learn More"})]})]})}),U.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[U.jsx("div",{className:`absolute top-1/4 left-1/4 w-64 h-64 rounded-full blur-3xl opacity-20
            animate-pulse transform -translate-x-1/2 -translate-y-1/2
            ${i==="dark"?"bg-blue-600":"bg-blue-500"}`}),U.jsx("div",{className:`absolute bottom-1/4 right-1/4 w-64 h-64 rounded-full blur-3xl opacity-20
            animate-pulse delay-1000 transform translate-x-1/2 translate-y-1/2
            ${i==="dark"?"bg-purple-600":"bg-purple-500"}`})]})]}),p_=({theme:i})=>{const e=[{icon:c_,title:"Smart Time Tracking",description:"Automatically tracks your productive time on PC and syncs with mobile usage.",color:"from-blue-500 to-cyan-500"},{icon:u_,title:"Reward System",description:"Earn mobile time by being productive on your PC. Set your own reward ratios.",color:"from-purple-500 to-pink-500"},{icon:o_,title:"Privacy First",description:"Your data stays private with end-to-end encryption and local processing.",color:"from-amber-500 to-orange-500"},{icon:a_,title:"Smart Insights",description:"Get detailed analytics about your productivity patterns and improvements.",color:"from-emerald-500 to-teal-500"}];return U.jsx("section",{id:"features",className:"py-20 relative",children:U.jsx("div",{className:"container mx-auto px-4",children:U.jsxs("div",{className:"max-w-6xl mx-auto",children:[U.jsxs("div",{className:"text-center mb-16",children:[U.jsx("h2",{className:"text-4xl font-bold mb-4",children:"How It Works"}),U.jsx("p",{className:`text-xl ${i==="dark"?"text-gray-400":"text-gray-600"}`,children:"A revolutionary approach to digital wellness"})]}),U.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:e.map((n,s)=>U.jsxs("div",{className:`group p-8 rounded-2xl transition-all duration-500 transform hover:scale-105 hover:-rotate-1
                ${i==="dark"?"bg-gray-800/50":"bg-white"}
                border shadow-md ${i==="dark"?"border-gray-800":"border-gray-100"}
                ${i==="dark"?"hover:bg-gray-800":"hover:shadow-xl"}`,children:[U.jsx("div",{className:`w-12 h-12 rounded-xl mb-6 flex items-center justify-center
                bg-gradient-to-r ${n.color}`,children:U.jsx(n.icon,{className:"w-6 h-6 text-white"})}),U.jsx("h3",{className:"text-xl font-semibold mb-4",children:n.title}),U.jsx("p",{className:`${i==="dark"?"text-gray-400":"text-gray-600"}`,children:n.description})]},s))})]})})})},m_=({theme:i})=>{const e=[{label:"Beta Testers",value:"500+"},{label:"Early Access Requests",value:"5k+"},{label:"Expected Productivity Gain",value:"40%+"},{label:"Community Feedback",value:"4.8/5"}];return U.jsx("section",{className:`py-20 ${i==="dark"?"bg-gray-800/50":"bg-gray-50"}`,children:U.jsx("div",{className:"container mx-auto px-4",children:U.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:e.map((n,s)=>U.jsxs("div",{children:[U.jsx("div",{className:`text-4xl font-bold mb-2 ${i==="dark"?"text-blue-400":"text-blue-600"}`,children:n.value}),U.jsx("div",{className:`${i==="dark"?"text-gray-400":"text-gray-600"}`,children:n.label})]},s))})})})},g_=({theme:i})=>U.jsxs("section",{className:"py-20 relative overflow-hidden",children:[U.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-blue-50/50 to-transparent dark:via-blue-900/10"}),U.jsx("div",{className:"container mx-auto px-4 relative",children:U.jsx("div",{className:"max-w-5xl mx-auto",children:U.jsx("div",{className:`rounded-2xl p-8 md:p-12 shadow-xl ${i==="dark"?"bg-gray-800":"bg-white"} transition-colors duration-300`,children:U.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[U.jsxs("div",{children:[U.jsx("h2",{className:`text-3xl font-bold mb-6 ${i==="dark"?"text-white":"text-gray-900"}`,children:"Balance Your Digital Life"}),U.jsx("p",{className:`mb-8 ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"Our innovative approach helps you maintain a healthy balance between work and leisure. The more you focus, the more free time you earn."}),U.jsx("div",{className:"space-y-4",children:["Smart time tracking","Customizable rewards","Progress insights","Habit formation"].map((e,n)=>U.jsxs("div",{className:"flex items-center space-x-3",children:[U.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${i==="dark"?"bg-blue-900/50":"bg-blue-100"}`,children:U.jsx(n_,{className:`w-4 h-4 ${i==="dark"?"text-blue-400":"text-blue-600"}`})}),U.jsx("span",{className:`${i==="dark"?"text-gray-300":"text-gray-600"}`,children:e})]},n))})]}),U.jsxs("div",{className:"relative",children:[U.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-cyan-500 rounded-2xl blur-2xl opacity-20"}),U.jsx("div",{className:`relative rounded-2xl p-6 border transition-colors duration-300 ${i==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:U.jsxs("div",{className:"space-y-6",children:[U.jsxs("div",{className:"flex justify-between items-center",children:[U.jsx("span",{className:`${i==="dark"?"text-gray-300":"text-gray-600"}`,children:"Today's Progress"}),U.jsx("span",{className:`text-2xl font-bold ${i==="dark"?"text-white":"text-gray-900"}`,children:"78%"})]}),U.jsx("div",{className:`h-2 rounded-full overflow-hidden ${i==="dark"?"bg-gray-700":"bg-gray-100"}`,children:U.jsx("div",{className:"h-full w-[78%] bg-gradient-to-r from-blue-600 to-cyan-500 rounded-full"})}),U.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[U.jsxs("div",{className:`rounded-xl p-4 transition-colors duration-300 ${i==="dark"?"bg-gray-900/50":"bg-gray-50"}`,children:[U.jsx("div",{className:`text-sm ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:"Focus Time"}),U.jsx("div",{className:`text-lg font-semibold ${i==="dark"?"text-white":"text-gray-900"}`,children:"4h 30m"})]}),U.jsxs("div",{className:`rounded-xl p-4 transition-colors duration-300 ${i==="dark"?"bg-gray-900/50":"bg-gray-50"}`,children:[U.jsx("div",{className:`text-sm ${i==="dark"?"text-gray-400":"text-gray-500"}`,children:"Earned Break"}),U.jsx("div",{className:`text-lg font-semibold ${i==="dark"?"text-white":"text-gray-900"}`,children:"45m"})]})]})]})})]})]})})})})]});var cp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},y_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],m=i[n++],y=((a&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},fm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,m=f?i[a+1]:0,y=a+2<i.length,E=y?i[a+2]:0,I=c>>2,N=(c&3)<<4|m>>4;let b=(m&15)<<2|E>>6,q=E&63;y||(q=64,f||(b=64)),s.push(n[I],n[N],n[b],n[q])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(hm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):y_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const E=a<i.length?n[i.charAt(a)]:64;++a;const N=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||E==null||N==null)throw new __;const b=c<<2|m>>4;if(s.push(b),E!==64){const q=m<<4&240|E>>2;if(s.push(q),N!==64){const J=E<<6&192|N;s.push(J)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class __ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v_=function(i){const e=hm(i);return fm.encodeByteArray(e,!0)},Ml=function(i){return v_(i).replace(/\./g,"")},E_=function(i){try{return fm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=()=>w_().__FIREBASE_DEFAULTS__,I_=()=>{if(typeof process>"u"||typeof cp>"u")return;const i=cp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},S_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&E_(i[1]);return e&&JSON.parse(e)},yh=()=>{try{return T_()||I_()||S_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},A_=i=>{var e,n;return(n=(e=yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},R_=i=>{const e=A_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},dm=()=>{var i;return(i=yh())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ml(JSON.stringify(n)),Ml(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function x_(){var i;const e=(i=yh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N_(){return!x_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V_(){try{return typeof indexedDB=="object"}catch{return!1}}function D_(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="FirebaseError";class js extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=L_,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pm.prototype.create)}}class pm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?M_(c,s):"Error",m=`${this.serviceName}: ${f} (${a}).`;return new js(a,m,s)}}function M_(i,e){return i.replace(O_,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const O_=/\{\$([^}]+)}/g;function Kc(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(hp(c)&&hp(f)){if(!Kc(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function hp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(i){return i&&i._delegate?i._delegate:i}class Go{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new C_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j_(e))try{this.getOrInitializeService({instanceIdentifier:Ai})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ai){return this.instances.has(e)}getOptions(e=Ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const f=this.instances.get(a);return f&&e(f,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:b_(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ai){return this.component?this.component.multipleInstances?e:Ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function b_(i){return i===Ai?void 0:i}function j_(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(xe||(xe={}));const z_={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},B_=xe.INFO,$_={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},q_=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=$_[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mm{constructor(e){this.name=e,this._logLevel=B_,this._logHandler=q_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const H_=(i,e)=>e.some(n=>i instanceof n);let fp,dp;function Q_(){return fp||(fp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W_(){return dp||(dp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gm=new WeakMap,Yc=new WeakMap,ym=new WeakMap,Uc=new WeakMap,_h=new WeakMap;function G_(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Br(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&gm.set(n,i)}).catch(()=>{}),_h.set(e,i),e}function K_(i){if(Yc.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Yc.set(i,e)}let Xc={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Yc.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ym.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Br(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Y_(i){Xc=i(Xc)}function X_(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(zc(this),e,...n);return ym.set(s,e.sort?e.sort():[e]),Br(s)}:W_().includes(i)?function(...e){return i.apply(zc(this),e),Br(gm.get(this))}:function(...e){return Br(i.apply(zc(this),e))}}function J_(i){return typeof i=="function"?X_(i):(i instanceof IDBTransaction&&K_(i),H_(i,Q_())?new Proxy(i,Xc):i)}function Br(i){if(i instanceof IDBRequest)return G_(i);if(Uc.has(i))return Uc.get(i);const e=J_(i);return e!==i&&(Uc.set(i,e),_h.set(e,i)),e}const zc=i=>_h.get(i);function Z_(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),m=Br(f);return s&&f.addEventListener("upgradeneeded",y=>{s(Br(f.result),y.oldVersion,y.newVersion,Br(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",E=>a(E.oldVersion,E.newVersion,E))}).catch(()=>{}),m}const ev=["get","getKey","getAll","getAllKeys","count"],tv=["put","add","delete","clear"],Bc=new Map;function pp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Bc.get(e))return Bc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=tv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||ev.includes(n)))return;const c=async function(f,...m){const y=this.transaction(f,a?"readwrite":"readonly");let E=y.store;return s&&(E=E.index(m.shift())),(await Promise.all([E[n](...m),a&&y.done]))[0]};return Bc.set(e,c),c}Y_(i=>({...i,get:(e,n,s)=>pp(e,n)||i.get(e,n,s),has:(e,n)=>!!pp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function rv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jc="@firebase/app",mp="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new mm("@firebase/app"),iv="@firebase/app-compat",sv="@firebase/analytics-compat",ov="@firebase/analytics",av="@firebase/app-check-compat",lv="@firebase/app-check",uv="@firebase/auth",cv="@firebase/auth-compat",hv="@firebase/database",fv="@firebase/data-connect",dv="@firebase/database-compat",pv="@firebase/functions",mv="@firebase/functions-compat",gv="@firebase/installations",yv="@firebase/installations-compat",_v="@firebase/messaging",vv="@firebase/messaging-compat",Ev="@firebase/performance",wv="@firebase/performance-compat",Tv="@firebase/remote-config",Iv="@firebase/remote-config-compat",Sv="@firebase/storage",Av="@firebase/storage-compat",Rv="@firebase/firestore",Cv="@firebase/vertexai",kv="@firebase/firestore-compat",Pv="firebase",xv="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="[DEFAULT]",Nv={[Jc]:"fire-core",[iv]:"fire-core-compat",[ov]:"fire-analytics",[sv]:"fire-analytics-compat",[lv]:"fire-app-check",[av]:"fire-app-check-compat",[uv]:"fire-auth",[cv]:"fire-auth-compat",[hv]:"fire-rtdb",[fv]:"fire-data-connect",[dv]:"fire-rtdb-compat",[pv]:"fire-fn",[mv]:"fire-fn-compat",[gv]:"fire-iid",[yv]:"fire-iid-compat",[_v]:"fire-fcm",[vv]:"fire-fcm-compat",[Ev]:"fire-perf",[wv]:"fire-perf-compat",[Tv]:"fire-rc",[Iv]:"fire-rc-compat",[Sv]:"fire-gcs",[Av]:"fire-gcs-compat",[Rv]:"fire-fst",[kv]:"fire-fst-compat",[Cv]:"fire-vertex","fire-js":"fire-js",[Pv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new Map,Vv=new Map,eh=new Map;function gp(i,e){try{i.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Fl(i){const e=i.name;if(eh.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;eh.set(e,i);for(const n of Ol.values())gp(n,i);for(const n of Vv.values())gp(n,i);return!0}function Dv(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new pm("app","Firebase",Lv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=xv;function _m(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Zc,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw $r.create("bad-app-name",{appName:String(a)});if(n||(n=dm()),!n)throw $r.create("no-options");const c=Ol.get(a);if(c){if(Kc(n,c.options)&&Kc(s,c.config))return c;throw $r.create("duplicate-app",{appName:a})}const f=new U_(a);for(const y of eh.values())f.addComponent(y);const m=new Mv(n,s,f);return Ol.set(a,m),m}function Fv(i=Zc){const e=Ol.get(i);if(!e&&i===Zc&&dm())return _m();if(!e)throw $r.create("no-app",{appName:i});return e}function Ps(i,e,n){var s;let a=(s=Nv[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&f&&m.push("and"),f&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(m.join(" "));return}Fl(new Go(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="firebase-heartbeat-database",jv=1,Ko="firebase-heartbeat-store";let $c=null;function vm(){return $c||($c=Z_(bv,jv,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ko)}catch(n){console.warn(n)}}}}).catch(i=>{throw $r.create("idb-open",{originalErrorMessage:i.message})})),$c}async function Uv(i){try{const n=(await vm()).transaction(Ko),s=await n.objectStore(Ko).get(Em(i));return await n.done,s}catch(e){if(e instanceof js)dr.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(n.message)}}}async function yp(i,e){try{const s=(await vm()).transaction(Ko,"readwrite");await s.objectStore(Ko).put(e,Em(i)),await s.done}catch(n){if(n instanceof js)dr.warn(n.message);else{const s=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dr.warn(s.message)}}}function Em(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=1024,Bv=30*24*60*60*1e3;class $v{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Hv(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=_p();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const m=new Date(f.date).valueOf();return Date.now()-m<=Bv}),this._storage.overwrite(this._heartbeatsCache))}catch(s){dr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_p(),{heartbeatsToSend:s,unsentEntries:a}=qv(this._heartbeatsCache.heartbeats),c=Ml(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return dr.warn(n),""}}}function _p(){return new Date().toISOString().substring(0,10)}function qv(i,e=zv){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),vp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),vp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Hv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V_()?D_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Uv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return yp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return yp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function vp(i){return Ml(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(i){Fl(new Go("platform-logger",e=>new nv(e),"PRIVATE")),Fl(new Go("heartbeat",e=>new $v(e),"PRIVATE")),Ps(Jc,mp,i),Ps(Jc,mp,"esm2017"),Ps("fire-js","")}Qv("");var Wv="firebase",Gv="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ps(Wv,Gv,"app");var Ep=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,wm;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,T){function A(){}A.prototype=T.prototype,P.D=T.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(k,x,D){for(var S=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)S[Ze-2]=arguments[Ze];return T.prototype[x].apply(k,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,T,A){A||(A=0);var k=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)k[x]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(x=0;16>x;++x)k[x]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=P.g[0],A=P.g[1],x=P.g[2];var D=P.g[3],S=T+(D^A&(x^D))+k[0]+3614090360&4294967295;T=A+(S<<7&4294967295|S>>>25),S=D+(x^T&(A^x))+k[1]+3905402710&4294967295,D=T+(S<<12&4294967295|S>>>20),S=x+(A^D&(T^A))+k[2]+606105819&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(T^x&(D^T))+k[3]+3250441966&4294967295,A=x+(S<<22&4294967295|S>>>10),S=T+(D^A&(x^D))+k[4]+4118548399&4294967295,T=A+(S<<7&4294967295|S>>>25),S=D+(x^T&(A^x))+k[5]+1200080426&4294967295,D=T+(S<<12&4294967295|S>>>20),S=x+(A^D&(T^A))+k[6]+2821735955&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(T^x&(D^T))+k[7]+4249261313&4294967295,A=x+(S<<22&4294967295|S>>>10),S=T+(D^A&(x^D))+k[8]+1770035416&4294967295,T=A+(S<<7&4294967295|S>>>25),S=D+(x^T&(A^x))+k[9]+2336552879&4294967295,D=T+(S<<12&4294967295|S>>>20),S=x+(A^D&(T^A))+k[10]+4294925233&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(T^x&(D^T))+k[11]+2304563134&4294967295,A=x+(S<<22&4294967295|S>>>10),S=T+(D^A&(x^D))+k[12]+1804603682&4294967295,T=A+(S<<7&4294967295|S>>>25),S=D+(x^T&(A^x))+k[13]+4254626195&4294967295,D=T+(S<<12&4294967295|S>>>20),S=x+(A^D&(T^A))+k[14]+2792965006&4294967295,x=D+(S<<17&4294967295|S>>>15),S=A+(T^x&(D^T))+k[15]+1236535329&4294967295,A=x+(S<<22&4294967295|S>>>10),S=T+(x^D&(A^x))+k[1]+4129170786&4294967295,T=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(T^A))+k[6]+3225465664&4294967295,D=T+(S<<9&4294967295|S>>>23),S=x+(T^A&(D^T))+k[11]+643717713&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^T&(x^D))+k[0]+3921069994&4294967295,A=x+(S<<20&4294967295|S>>>12),S=T+(x^D&(A^x))+k[5]+3593408605&4294967295,T=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(T^A))+k[10]+38016083&4294967295,D=T+(S<<9&4294967295|S>>>23),S=x+(T^A&(D^T))+k[15]+3634488961&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^T&(x^D))+k[4]+3889429448&4294967295,A=x+(S<<20&4294967295|S>>>12),S=T+(x^D&(A^x))+k[9]+568446438&4294967295,T=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(T^A))+k[14]+3275163606&4294967295,D=T+(S<<9&4294967295|S>>>23),S=x+(T^A&(D^T))+k[3]+4107603335&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^T&(x^D))+k[8]+1163531501&4294967295,A=x+(S<<20&4294967295|S>>>12),S=T+(x^D&(A^x))+k[13]+2850285829&4294967295,T=A+(S<<5&4294967295|S>>>27),S=D+(A^x&(T^A))+k[2]+4243563512&4294967295,D=T+(S<<9&4294967295|S>>>23),S=x+(T^A&(D^T))+k[7]+1735328473&4294967295,x=D+(S<<14&4294967295|S>>>18),S=A+(D^T&(x^D))+k[12]+2368359562&4294967295,A=x+(S<<20&4294967295|S>>>12),S=T+(A^x^D)+k[5]+4294588738&4294967295,T=A+(S<<4&4294967295|S>>>28),S=D+(T^A^x)+k[8]+2272392833&4294967295,D=T+(S<<11&4294967295|S>>>21),S=x+(D^T^A)+k[11]+1839030562&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^T)+k[14]+4259657740&4294967295,A=x+(S<<23&4294967295|S>>>9),S=T+(A^x^D)+k[1]+2763975236&4294967295,T=A+(S<<4&4294967295|S>>>28),S=D+(T^A^x)+k[4]+1272893353&4294967295,D=T+(S<<11&4294967295|S>>>21),S=x+(D^T^A)+k[7]+4139469664&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^T)+k[10]+3200236656&4294967295,A=x+(S<<23&4294967295|S>>>9),S=T+(A^x^D)+k[13]+681279174&4294967295,T=A+(S<<4&4294967295|S>>>28),S=D+(T^A^x)+k[0]+3936430074&4294967295,D=T+(S<<11&4294967295|S>>>21),S=x+(D^T^A)+k[3]+3572445317&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^T)+k[6]+76029189&4294967295,A=x+(S<<23&4294967295|S>>>9),S=T+(A^x^D)+k[9]+3654602809&4294967295,T=A+(S<<4&4294967295|S>>>28),S=D+(T^A^x)+k[12]+3873151461&4294967295,D=T+(S<<11&4294967295|S>>>21),S=x+(D^T^A)+k[15]+530742520&4294967295,x=D+(S<<16&4294967295|S>>>16),S=A+(x^D^T)+k[2]+3299628645&4294967295,A=x+(S<<23&4294967295|S>>>9),S=T+(x^(A|~D))+k[0]+4096336452&4294967295,T=A+(S<<6&4294967295|S>>>26),S=D+(A^(T|~x))+k[7]+1126891415&4294967295,D=T+(S<<10&4294967295|S>>>22),S=x+(T^(D|~A))+k[14]+2878612391&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~T))+k[5]+4237533241&4294967295,A=x+(S<<21&4294967295|S>>>11),S=T+(x^(A|~D))+k[12]+1700485571&4294967295,T=A+(S<<6&4294967295|S>>>26),S=D+(A^(T|~x))+k[3]+2399980690&4294967295,D=T+(S<<10&4294967295|S>>>22),S=x+(T^(D|~A))+k[10]+4293915773&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~T))+k[1]+2240044497&4294967295,A=x+(S<<21&4294967295|S>>>11),S=T+(x^(A|~D))+k[8]+1873313359&4294967295,T=A+(S<<6&4294967295|S>>>26),S=D+(A^(T|~x))+k[15]+4264355552&4294967295,D=T+(S<<10&4294967295|S>>>22),S=x+(T^(D|~A))+k[6]+2734768916&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~T))+k[13]+1309151649&4294967295,A=x+(S<<21&4294967295|S>>>11),S=T+(x^(A|~D))+k[4]+4149444226&4294967295,T=A+(S<<6&4294967295|S>>>26),S=D+(A^(T|~x))+k[11]+3174756917&4294967295,D=T+(S<<10&4294967295|S>>>22),S=x+(T^(D|~A))+k[2]+718787259&4294967295,x=D+(S<<15&4294967295|S>>>17),S=A+(D^(x|~T))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,P.g[2]=P.g[2]+x&4294967295,P.g[3]=P.g[3]+D&4294967295}s.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var A=T-this.blockSize,k=this.B,x=this.h,D=0;D<T;){if(x==0)for(;D<=A;)a(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<T;)if(k[x++]=P.charCodeAt(D++),x==this.blockSize){a(this,k),x=0;break}}else for(;D<T;)if(k[x++]=P[D++],x==this.blockSize){a(this,k),x=0;break}}this.h=x,this.o+=T},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var A=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=A&255,A/=256;for(this.u(P),P=Array(16),T=A=0;4>T;++T)for(var k=0;32>k;k+=8)P[A++]=this.g[T]>>>k&255;return P};function c(P,T){var A=m;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=T(P)}function f(P,T){this.h=T;for(var A=[],k=!0,x=P.length-1;0<=x;x--){var D=P[x]|0;k&&D==T||(A[x]=D,k=!1)}this.g=A}var m={};function y(P){return-128<=P&&128>P?c(P,function(T){return new f([T|0],0>T?-1:0)}):new f([P|0],0>P?-1:0)}function E(P){if(isNaN(P)||!isFinite(P))return N;if(0>P)return G(E(-P));for(var T=[],A=1,k=0;P>=A;k++)T[k]=P/A|0,A*=4294967296;return new f(T,0)}function I(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return G(I(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=E(Math.pow(T,8)),k=N,x=0;x<P.length;x+=8){var D=Math.min(8,P.length-x),S=parseInt(P.substring(x,x+D),T);8>D?(D=E(Math.pow(T,D)),k=k.j(D).add(E(S))):(k=k.j(A),k=k.add(E(S)))}return k}var N=y(0),b=y(1),q=y(16777216);i=f.prototype,i.m=function(){if(Z(this))return-G(this).m();for(var P=0,T=1,A=0;A<this.g.length;A++){var k=this.i(A);P+=(0<=k?k:4294967296+k)*T,T*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(J(this))return"0";if(Z(this))return"-"+G(this).toString(P);for(var T=E(Math.pow(P,6)),A=this,k="";;){var x=Se(A,T).g;A=Ee(A,x.j(T));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=x,J(A))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function J(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function Z(P){return P.h==-1}i.l=function(P){return P=Ee(this,P),Z(P)?-1:J(P)?0:1};function G(P){for(var T=P.g.length,A=[],k=0;k<T;k++)A[k]=~P.g[k];return new f(A,~P.h).add(b)}i.abs=function(){return Z(this)?G(this):this},i.add=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],k=0,x=0;x<=T;x++){var D=k+(this.i(x)&65535)+(P.i(x)&65535),S=(D>>>16)+(this.i(x)>>>16)+(P.i(x)>>>16);k=S>>>16,D&=65535,S&=65535,A[x]=S<<16|D}return new f(A,A[A.length-1]&-2147483648?-1:0)};function Ee(P,T){return P.add(G(T))}i.j=function(P){if(J(this)||J(P))return N;if(Z(this))return Z(P)?G(this).j(G(P)):G(G(this).j(P));if(Z(P))return G(this.j(G(P)));if(0>this.l(q)&&0>P.l(q))return E(this.m()*P.m());for(var T=this.g.length+P.g.length,A=[],k=0;k<2*T;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var x=0;x<P.g.length;x++){var D=this.i(k)>>>16,S=this.i(k)&65535,Ze=P.i(x)>>>16,Ct=P.i(x)&65535;A[2*k+2*x]+=S*Ct,ye(A,2*k+2*x),A[2*k+2*x+1]+=D*Ct,ye(A,2*k+2*x+1),A[2*k+2*x+1]+=S*Ze,ye(A,2*k+2*x+1),A[2*k+2*x+2]+=D*Ze,ye(A,2*k+2*x+2)}for(k=0;k<T;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=T;k<2*T;k++)A[k]=0;return new f(A,0)};function ye(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function _e(P,T){this.g=P,this.h=T}function Se(P,T){if(J(T))throw Error("division by zero");if(J(P))return new _e(N,N);if(Z(P))return T=Se(G(P),T),new _e(G(T.g),G(T.h));if(Z(T))return T=Se(P,G(T)),new _e(G(T.g),T.h);if(30<P.g.length){if(Z(P)||Z(T))throw Error("slowDivide_ only works with positive integers.");for(var A=b,k=T;0>=k.l(P);)A=Je(A),k=Je(k);var x=Ne(A,1),D=Ne(k,1);for(k=Ne(k,2),A=Ne(A,2);!J(k);){var S=D.add(k);0>=S.l(P)&&(x=x.add(A),D=S),k=Ne(k,1),A=Ne(A,1)}return T=Ee(P,x.j(T)),new _e(x,T)}for(x=N;0<=P.l(T);){for(A=Math.max(1,Math.floor(P.m()/T.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=E(A),S=D.j(T);Z(S)||0<S.l(P);)A-=k,D=E(A),S=D.j(T);J(D)&&(D=b),x=x.add(D),P=Ee(P,S)}return new _e(x,P)}i.A=function(P){return Se(this,P).h},i.and=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)&P.i(k);return new f(A,this.h&P.h)},i.or=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)|P.i(k);return new f(A,this.h|P.h)},i.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)^P.i(k);return new f(A,this.h^P.h)};function Je(P){for(var T=P.g.length+1,A=[],k=0;k<T;k++)A[k]=P.i(k)<<1|P.i(k-1)>>>31;return new f(A,P.h)}function Ne(P,T){var A=T>>5;T%=32;for(var k=P.g.length-A,x=[],D=0;D<k;D++)x[D]=0<T?P.i(D+A)>>>T|P.i(D+A+1)<<32-T:P.i(D+A);return new f(x,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,wm=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=E,f.fromString=I,Ci=f}).apply(typeof Ep<"u"?Ep:typeof self<"u"?self:typeof window<"u"?window:{});var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tm,zo,Im,Pl,th,Sm,Am,Rm;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Il=="object"&&Il];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var g=s;l=l.split(".");for(var v=0;v<l.length-1;v++){var L=l[v];if(!(L in g))break e;g=g[L]}l=l[l.length-1],v=g[l],d=d(v),d!=v&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var g=0,v=!1,L={next:function(){if(!v&&g<l.length){var j=g++;return{value:d(j,l[j]),done:!1}}return v=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function y(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function E(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function I(l,d,g){return l.call.apply(l.bind,arguments)}function N(l,d,g){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,v),l.apply(d,L)}}return function(){return l.apply(d,arguments)}}function b(l,d,g){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:N,b.apply(null,arguments)}function q(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function J(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(v,L,j){for(var Y=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)Y[Fe-2]=arguments[Fe];return d.prototype[L].apply(v,Y)}}function Z(l){const d=l.length;if(0<d){const g=Array(d);for(let v=0;v<d;v++)g[v]=l[v];return g}return[]}function G(l,d){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(y(v)){const L=l.length||0,j=v.length||0;l.length=L+j;for(let Y=0;Y<j;Y++)l[L+Y]=v[Y]}else l.push(v)}}class Ee{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ye(l){return/^[\s\xa0]*$/.test(l)}function _e(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function Se(l){return Se[" "](l),l}Se[" "]=function(){};var Je=_e().indexOf("Gecko")!=-1&&!(_e().toLowerCase().indexOf("webkit")!=-1&&_e().indexOf("Edge")==-1)&&!(_e().indexOf("Trident")!=-1||_e().indexOf("MSIE")!=-1)&&_e().indexOf("Edge")==-1;function Ne(l,d,g){for(const v in l)d.call(g,l[v],v,l)}function P(l,d){for(const g in l)d.call(void 0,l[g],g,l)}function T(l){const d={};for(const g in l)d[g]=l[g];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,d){let g,v;for(let L=1;L<arguments.length;L++){v=arguments[L];for(g in v)l[g]=v[g];for(let j=0;j<A.length;j++)g=A[j],Object.prototype.hasOwnProperty.call(v,g)&&(l[g]=v[g])}}function x(l){var d=1;l=l.split(":");const g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function D(l){m.setTimeout(()=>{throw l},0)}function S(){var l=ce;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ze{constructor(){this.h=this.g=null}add(d,g){const v=Ct.get();v.set(d,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Ct=new Ee(()=>new kt,l=>l.reset());class kt{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let be,X=!1,ce=new Ze,te=()=>{const l=m.Promise.resolve(void 0);be=()=>{l.then(V)}};var V=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){D(g)}var d=Ct;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}X=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,d),m.removeEventListener("test",g,d)}catch{}return l}();function we(l,d){if(le.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(Je){e:{try{Se(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ce[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&we.aa.h.call(this)}}J(we,le);var Ce={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Me=0;function Ue(l,d,g,v,L){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!v,this.ha=L,this.key=++Me,this.da=this.fa=!1}function pt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Gn(l){this.src=l,this.g={},this.h=0}Gn.prototype.add=function(l,d,g,v,L){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var Y=gr(l,d,v,L);return-1<Y?(d=l[Y],g||(d.fa=!1)):(d=new Ue(d,this.src,j,!!v,L),d.fa=g,l.push(d)),d};function Di(l,d){var g=d.type;if(g in l.g){var v=l.g[g],L=Array.prototype.indexOf.call(v,d,void 0),j;(j=0<=L)&&Array.prototype.splice.call(v,L,1),j&&(pt(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function gr(l,d,g,v){for(var L=0;L<l.length;++L){var j=l[L];if(!j.da&&j.listener==d&&j.capture==!!g&&j.ha==v)return L}return-1}var Xr="closure_lm_"+(1e6*Math.random()|0),Li={};function Hs(l,d,g,v,L){if(Array.isArray(d)){for(var j=0;j<d.length;j++)Hs(l,d[j],g,v,L);return null}return g=Gs(g),l&&l[Le]?l.K(d,g,E(v)?!!v.capture:!1,L):Qs(l,d,g,!1,v,L)}function Qs(l,d,g,v,L,j){if(!d)throw Error("Invalid event type");var Y=E(L)?!!L.capture:!!L,Fe=Oi(l);if(Fe||(l[Xr]=Fe=new Gn(l)),g=Fe.add(d,g,v,Y,j),g.proxy)return g;if(v=aa(),g.proxy=v,v.src=l,v.listener=g,l.addEventListener)ve||(L=Y),L===void 0&&(L=!1),l.addEventListener(d.toString(),v,L);else if(l.attachEvent)l.attachEvent(Yn(d.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function aa(){function l(g){return d.call(l.src,l.listener,g)}const d=Ws;return l}function Mi(l,d,g,v,L){if(Array.isArray(d))for(var j=0;j<d.length;j++)Mi(l,d[j],g,v,L);else v=E(v)?!!v.capture:!!v,g=Gs(g),l&&l[Le]?(l=l.i,d=String(d).toString(),d in l.g&&(j=l.g[d],g=gr(j,g,v,L),-1<g&&(pt(j[g]),Array.prototype.splice.call(j,g,1),j.length==0&&(delete l.g[d],l.h--)))):l&&(l=Oi(l))&&(d=l.g[d.toString()],l=-1,d&&(l=gr(d,g,v,L)),(g=-1<l?d[l]:null)&&Kn(g))}function Kn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Le])Di(d.i,l);else{var g=l.type,v=l.proxy;d.removeEventListener?d.removeEventListener(g,v,l.capture):d.detachEvent?d.detachEvent(Yn(g),v):d.addListener&&d.removeListener&&d.removeListener(v),(g=Oi(d))?(Di(g,l),g.h==0&&(g.src=null,d[Xr]=null)):pt(l)}}}function Yn(l){return l in Li?Li[l]:Li[l]="on"+l}function Ws(l,d){if(l.da)l=!0;else{d=new we(d,this);var g=l.listener,v=l.ha||l.src;l.fa&&Kn(l),l=g.call(v,d)}return l}function Oi(l){return l=l[Xr],l instanceof Gn?l:null}var Fi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gs(l){return typeof l=="function"?l:(l[Fi]||(l[Fi]=function(d){return l.handleEvent(d)}),l[Fi])}function lt(){B.call(this),this.i=new Gn(this),this.M=this,this.F=null}J(lt,B),lt.prototype[Le]=!0,lt.prototype.removeEventListener=function(l,d,g,v){Mi(this,l,d,g,v)};function ut(l,d){var g,v=l.F;if(v)for(g=[];v;v=v.F)g.push(v);if(l=l.M,v=d.type||d,typeof d=="string")d=new le(d,l);else if(d instanceof le)d.target=d.target||l;else{var L=d;d=new le(v,l),k(d,L)}if(L=!0,g)for(var j=g.length-1;0<=j;j--){var Y=d.g=g[j];L=Xn(Y,v,!0,d)&&L}if(Y=d.g=l,L=Xn(Y,v,!0,d)&&L,L=Xn(Y,v,!1,d)&&L,g)for(j=0;j<g.length;j++)Y=d.g=g[j],L=Xn(Y,v,!1,d)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],v=0;v<g.length;v++)pt(g[v]);delete l.g[d],l.h--}}this.F=null},lt.prototype.K=function(l,d,g,v){return this.i.add(String(l),d,!1,g,v)},lt.prototype.L=function(l,d,g,v){return this.i.add(String(l),d,!0,g,v)};function Xn(l,d,g,v){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,j=0;j<d.length;++j){var Y=d[j];if(Y&&!Y.da&&Y.capture==g){var Fe=Y.listener,ct=Y.ha||Y.src;Y.fa&&Di(l.i,Y),L=Fe.call(ct,v)!==!1&&L}}return L&&!v.defaultPrevented}function Ks(l,d,g){if(typeof l=="function")g&&(l=b(l,g));else if(l&&typeof l.handleEvent=="function")l=b(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:m.setTimeout(l,d||0)}function yr(l){l.g=Ks(()=>{l.g=null,l.i&&(l.i=!1,yr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class Jr extends B{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:yr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(l){B.call(this),this.h=l,this.g={}}J(Zr,B);var Ys=[];function Xs(l){Ne(l.g,function(d,g){this.g.hasOwnProperty(g)&&Kn(d)},l),l.g={}}Zr.prototype.N=function(){Zr.aa.N.call(this),Xs(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Js=m.JSON.stringify,Zs=m.JSON.parse,eo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function ei(){}ei.prototype.h=null;function bi(l){return l.h||(l.h=l.i())}function ji(){}var nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){le.call(this,"d")}J(Ln,le);function Ui(){le.call(this,"c")}J(Ui,le);var Mn={},to=null;function ti(){return to=to||new lt}Mn.La="serverreachability";function no(l){le.call(this,Mn.La,l)}J(no,le);function Jn(l){const d=ti();ut(d,new no(d))}Mn.STAT_EVENT="statevent";function ro(l,d){le.call(this,Mn.STAT_EVENT,l),this.stat=d}J(ro,le);function et(l){const d=ti();ut(d,new ro(d,l))}Mn.Ma="timingevent";function zi(l,d){le.call(this,Mn.Ma,l),this.size=d}J(zi,le);function gn(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},d)}function ni(){this.g=!0}ni.prototype.xa=function(){this.g=!1};function ri(l,d,g,v,L,j){l.info(function(){if(l.g)if(j)for(var Y="",Fe=j.split("&"),ct=0;ct<Fe.length;ct++){var ke=Fe[ct].split("=");if(1<ke.length){var mt=ke[0];ke=ke[1];var rt=mt.split("_");Y=2<=rt.length&&rt[1]=="type"?Y+(mt+"="+ke+"&"):Y+(mt+"=redacted&")}}else Y=null;else Y=j;return"XMLHTTP REQ ("+v+") [attempt "+L+"]: "+d+`
`+g+`
`+Y})}function Bi(l,d,g,v,L,j,Y){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+L+"]: "+d+`
`+g+`
`+j+" "+Y})}function yn(l,d,g,v){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+uu(l,g)+(v?" "+v:"")})}function io(l,d){l.info(function(){return"TIMEOUT: "+d})}ni.prototype.info=function(){};function uu(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var v=g[l];if(!(2>v.length)){var L=v[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var Y=1;Y<L.length;Y++)L[Y]=""}}}}return Js(g)}catch{return d}}var $i={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},la={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_n;function ii(){}J(ii,ei),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},_n=new ii;function vn(l,d,g,v){this.j=l,this.i=d,this.l=g,this.R=v||1,this.U=new Zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ua}function ua(){this.i=null,this.g="",this.h=!1}var so={},qi={};function Hi(l,d,g){l.L=1,l.v=Tr(Yt(d)),l.m=g,l.P=!0,oo(l,null)}function oo(l,d){l.F=Date.now(),ze(l),l.A=Yt(l.v);var g=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Sr(g.i,"t",v),l.C=0,g=l.j.J,l.h=new ua,l.g=Ca(l.j,g?d:null,!l.m),0<l.O&&(l.M=new Jr(b(l.Y,l,l.g),l.O)),d=l.U,g=l.g,v=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ys[0]=L.toString()),L=Ys);for(var j=0;j<L.length;j++){var Y=Hs(g,L[j],v||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Jn(),ri(l.i,l.u,l.A,l.l,l.R,l.m)}vn.prototype.ca=function(l){l=l.target;const d=this.M;d&&zt(l)==3?d.j():this.Y(l)},vn.prototype.Y=function(l){try{if(l==this.g)e:{const rt=zt(this.g);var d=this.g.Ba();const on=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||fo(this.g)))){this.J||rt!=4||d==7||(d==8||0>=on?Jn(3):Jn(2)),si(this);var g=this.g.Z();this.X=g;t:if(ca(this)){var v=fo(this.g);l="";var L=v.length,j=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rn(this),_r(this);var Y="";break t}this.h.i=new m.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,l+=this.h.i.decode(v[d],{stream:!(j&&d==L-1)});v.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,Bi(this.i,this.u,this.A,this.l,this.R,rt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,ct=this.g;if((Fe=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ye(Fe)){var ke=Fe;break t}}ke=null}if(g=ke)yn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ao(this,g);else{this.o=!1,this.s=3,et(12),rn(this),_r(this);break e}}if(this.P){g=!0;let Jt;for(;!this.J&&this.C<Y.length;)if(Jt=cu(this,Y),Jt==qi){rt==4&&(this.s=4,et(14),g=!1),yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==so){this.s=4,et(15),yn(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else yn(this.i,this.l,Jt,null),ao(this,Jt);if(ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||Y.length!=0||this.h.h||(this.s=1,et(16),g=!1),this.o=this.o&&g,!g)yn(this.i,this.l,Y,"[Invalid Chunked Response]"),rn(this),_r(this);else if(0<Y.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),mo(mt),mt.M=!0,et(11))}}else yn(this.i,this.l,Y,null),ao(this,Y);rt==4&&rn(this),this.o&&!this.J&&(rt==4?ns(this.j,this):(this.o=!1,ze(this)))}else Xi(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),rn(this),_r(this)}}}catch{}finally{}};function ca(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function cu(l,d){var g=l.C,v=d.indexOf(`
`,g);return v==-1?qi:(g=Number(d.substring(g,v)),isNaN(g)?so:(v+=1,v+g>d.length?qi:(d=d.slice(v,v+g),l.C=v+g,d)))}vn.prototype.cancel=function(){this.J=!0,rn(this)};function ze(l){l.S=Date.now()+l.I,ha(l,l.I)}function ha(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=gn(b(l.ba,l),d)}function si(l){l.B&&(m.clearTimeout(l.B),l.B=null)}vn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(io(this.i,this.A),this.L!=2&&(Jn(),et(17)),rn(this),this.s=2,_r(this)):ha(this,this.S-l)};function _r(l){l.j.G==0||l.J||ns(l.j,l)}function rn(l){si(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Xs(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function ao(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||Ot(g.h,l))){if(!l.K&&Ot(g.h,l)&&g.G==3){try{var v=g.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var L=v;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)ts(g),Sn(g);else break e;es(g),et(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=gn(b(g.Za,g),6e3));if(1>=da(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else rr(g,11)}else if((l.K||g.g==l)&&ts(g),!ye(d))for(L=g.Da.g.parse(d),d=0;d<L.length;d++){let ke=L[d];if(g.T=ke[0],ke=ke[1],g.G==2)if(ke[0]=="c"){g.K=ke[1],g.ia=ke[2];const mt=ke[3];mt!=null&&(g.la=mt,g.j.info("VER="+g.la));const rt=ke[4];rt!=null&&(g.Aa=rt,g.j.info("SVER="+g.Aa));const on=ke[5];on!=null&&typeof on=="number"&&0<on&&(v=1.5*on,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const Jt=l.g;if(Jt){const fi=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fi){var j=v.h;j.g||fi.indexOf("spdy")==-1&&fi.indexOf("quic")==-1&&fi.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(lo(j,j.h),j.h=null))}if(v.D){const is=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;is&&(v.ya=is,je(v.I,v.D,is))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var Y=l;if(v.qa=Ra(v,v.J?v.ia:null,v.W),Y.K){pa(v.h,Y);var Fe=Y,ct=v.L;ct&&(Fe.I=ct),Fe.B&&(si(Fe),ze(Fe)),v.g=Y}else hi(v);0<g.i.length&&jn(g)}else ke[0]!="stop"&&ke[0]!="close"||rr(g,7);else g.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?rr(g,7):wt(g):ke[0]!="noop"&&g.l&&g.l.ta(ke),g.v=0)}}Jn(4)}catch{}}var fa=class{constructor(l,d){this.g=l,this.map=d}};function oi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function da(l){return l.h?1:l.g?l.g.size:0}function Ot(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function lo(l,d){l.g?l.g.add(d):l.h=d}function pa(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}oi.prototype.cancel=function(){if(this.i=ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ma(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const g of l.g.values())d=d.concat(g.D);return d}return Z(l.i)}function Qi(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var d=[],g=l.length,v=0;v<g;v++)d.push(l[v]);return d}d=[],g=0;for(v in l)d[g++]=l[v];return d}function Wi(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(const v in l)d[g++]=v;return d}}}function vr(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=Wi(l),v=Qi(l),L=v.length,j=0;j<L;j++)d.call(void 0,v[j],g&&g[j],l)}var ai=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hu(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var v=l[g].indexOf("="),L=null;if(0<=v){var j=l[g].substring(0,v);L=l[g].substring(v+1)}else j=l[g];d(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Zn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Zn){this.h=l.h,li(this,l.j),this.o=l.o,this.g=l.g,Er(this,l.s),this.l=l.l;var d=l.i,g=new On;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),wr(this,g),this.m=l.m}else l&&(d=String(l).match(ai))?(this.h=!1,li(this,d[1]||"",!0),this.o=Ae(d[2]||""),this.g=Ae(d[3]||"",!0),Er(this,d[4]),this.l=Ae(d[5]||"",!0),wr(this,d[6]||"",!0),this.m=Ae(d[7]||"")):(this.h=!1,this.i=new On(null,this.h))}Zn.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Ir(d,Gi,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Ir(d,Gi,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Ir(g,g.charAt(0)=="/"?_a:ya,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Ir(g,uo)),l.join("")};function Yt(l){return new Zn(l)}function li(l,d,g){l.j=g?Ae(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Er(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function wr(l,d,g){d instanceof On?(l.i=d,Fn(l.i,l.h)):(g||(d=Ir(d,va)),l.i=new On(d,l.h))}function je(l,d,g){l.i.set(d,g)}function Tr(l){return je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ae(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ir(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,ga),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ga(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Gi=/[#\/\?@]/g,ya=/[#\?:]/g,_a=/[#\?]/g,va=/[#\?@]/g,uo=/#/g;function On(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Et(l){l.g||(l.g=new Map,l.h=0,l.i&&hu(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}i=On.prototype,i.add=function(l,d){Et(this),this.i=null,l=sn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function En(l,d){Et(l),d=sn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function wn(l,d){return Et(l),d=sn(l,d),l.g.has(d)}i.forEach=function(l,d){Et(this),this.g.forEach(function(g,v){g.forEach(function(L){l.call(d,L,v,this)},this)},this)},i.na=function(){Et(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let v=0;v<d.length;v++){const L=l[v];for(let j=0;j<L.length;j++)g.push(d[v])}return g},i.V=function(l){Et(this);let d=[];if(typeof l=="string")wn(this,l)&&(d=d.concat(this.g.get(sn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},i.set=function(l,d){return Et(this),this.i=null,l=sn(this,l),wn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Sr(l,d,g){En(l,d),0<g.length&&(l.i=null,l.g.set(sn(l,d),Z(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var v=d[g];const j=encodeURIComponent(String(v)),Y=this.V(v);for(v=0;v<Y.length;v++){var L=j;Y[v]!==""&&(L+="="+encodeURIComponent(String(Y[v]))),l.push(L)}}return this.i=l.join("&")};function sn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Fn(l,d){d&&!l.j&&(Et(l),l.i=null,l.g.forEach(function(g,v){var L=v.toLowerCase();v!=L&&(En(this,v),Sr(this,L,g))},l)),l.j=d}function fu(l,d){const g=new ni;if(m.Image){const v=new Image;v.onload=q(Ut,g,"TestLoadImage: loaded",!0,d,v),v.onerror=q(Ut,g,"TestLoadImage: error",!1,d,v),v.onabort=q(Ut,g,"TestLoadImage: abort",!1,d,v),v.ontimeout=q(Ut,g,"TestLoadImage: timeout",!1,d,v),m.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else d(!1)}function Ea(l,d){const g=new ni,v=new AbortController,L=setTimeout(()=>{v.abort(),Ut(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:v.signal}).then(j=>{clearTimeout(L),j.ok?Ut(g,"TestPingServer: ok",!0,d):Ut(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Ut(g,"TestPingServer: error",!1,d)})}function Ut(l,d,g,v,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),v(g)}catch{}}function du(){this.g=new eo}function wa(l,d,g){const v=g||"";try{vr(l,function(L,j){let Y=L;E(L)&&(Y=Js(L)),d.push(v+j+"="+encodeURIComponent(Y))})}catch(L){throw d.push(v+"type="+encodeURIComponent("_badmap")),L}}function er(l){this.l=l.Ub||null,this.j=l.eb||!1}J(er,ei),er.prototype.g=function(){return new ui(this.l,this.j)},er.prototype.i=function(l){return function(){return l}}({});function ui(l,d){lt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}J(ui,lt),i=ui.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,In(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||m).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ta(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ta(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Tn(this):In(this),this.readyState==3&&Ta(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Tn(this))},i.Qa=function(l){this.g&&(this.response=l,Tn(this))},i.ga=function(){this.g&&Tn(this)};function Tn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,In(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function In(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function tr(l){let d="";return Ne(l,function(g,v){d+=v,d+=":",d+=g,d+=`\r
`}),d}function Ar(l,d,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=tr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):je(l,d,g))}function Qe(l){lt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}J(Qe,lt);var pu=/^https?$/i,co=["POST","PUT"];i=Qe.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_n.g(),this.v=this.o?bi(this.o):bi(_n),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(j){ci(this,j);return}if(l=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var L in v)g.set(L,v[L]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())g.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(j=>j.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(co,d,void 0))||v||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,Y]of g)this.g.setRequestHeader(j,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yi(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){ci(this,j)}};function ci(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Ki(l),Xt(l)}function Ki(l){l.A||(l.A=!0,ut(l,"complete"),ut(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ut(this,"complete"),ut(this,"abort"),Xt(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xt(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ho(this):this.bb())},i.bb=function(){ho(this)};function ho(l){if(l.h&&typeof f<"u"&&(!l.v[1]||zt(l)!=4||l.Z()!=2)){if(l.u&&zt(l)==4)Ks(l.Ea,0,l);else if(ut(l,"readystatechange"),zt(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var v;if(v=Y===0){var L=String(l.D).match(ai)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),v=!pu.test(L?L.toLowerCase():"")}g=v}if(g)ut(l,"complete"),ut(l,"success");else{l.m=6;try{var j=2<zt(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",Ki(l)}}finally{Xt(l)}}}}function Xt(l,d){if(l.g){Yi(l);const g=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||ut(l,"ready");try{g.onreadystatechange=v}catch{}}}function Yi(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function zt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Zs(d)}};function fo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Xi(l){const d={};l=(l.g&&2<=zt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(ye(l[v]))continue;var g=x(l[v]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const j=d[L]||[];d[L]=j,j.push(g)}P(d,function(v){return v.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bn(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function po(l){this.Aa=0,this.i=[],this.j=new ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bn("baseRetryDelayMs",5e3,l),this.cb=bn("retryDelaySeedMs",1e4,l),this.Wa=bn("forwardChannelMaxRetries",2,l),this.wa=bn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new oi(l&&l.concurrentRequestLimit),this.Da=new du,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=po.prototype,i.la=8,i.G=1,i.connect=function(l,d,g,v){et(0),this.W=l,this.H=d||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Ra(this,null,this.W),jn(this)};function wt(l){if(Ji(l),l.G==3){var d=l.U++,g=Yt(l.I);if(je(g,"SID",l.K),je(g,"RID",d),je(g,"TYPE","terminate"),nr(l,g),d=new vn(l,l.j,d),d.L=2,d.v=Tr(Yt(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=d.v,g=!0),g||(d.g=Ca(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ze(d)}Aa(l)}function Sn(l){l.g&&(mo(l),l.g.cancel(),l.g=null)}function Ji(l){Sn(l),l.u&&(m.clearTimeout(l.u),l.u=null),ts(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function jn(l){if(!Kt(l.h)&&!l.s){l.s=!0;var d=l.Ga;be||te(),X||(be(),X=!0),ce.add(d,l),l.B=0}}function mu(l,d){return da(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=gn(b(l.Ga,l,d),Sa(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new vn(this,this.j,l);let j=this.o;if(this.S&&(j?(j=T(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=Rr(this,L,d),g=Yt(this.I),je(g,"RID",l),je(g,"CVER",22),this.D&&je(g,"X-HTTP-Session-Id",this.D),nr(this,g),j&&(this.O?d="headers="+encodeURIComponent(String(tr(j)))+"&"+d:this.m&&Ar(g,this.m,j)),lo(this.h,L),this.Ua&&je(g,"TYPE","init"),this.P?(je(g,"$req",d),je(g,"SID","null"),L.T=!0,Hi(L,g,null)):Hi(L,g,d),this.G=2}}else this.G==3&&(l?Zi(this,l):this.i.length==0||Kt(this.h)||Zi(this))};function Zi(l,d){var g;d?g=d.l:g=l.U++;const v=Yt(l.I);je(v,"SID",l.K),je(v,"RID",g),je(v,"AID",l.T),nr(l,v),l.m&&l.o&&Ar(v,l.m,l.o),g=new vn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Rr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),lo(l.h,g),Hi(g,v,d)}function nr(l,d){l.H&&Ne(l.H,function(g,v){je(d,v,g)}),l.l&&vr({},function(g,v){je(d,v,g)})}function Rr(l,d,g){g=Math.min(l.i.length,g);var v=l.l?b(l.l.Na,l.l,l):null;e:{var L=l.i;let j=-1;for(;;){const Y=["count="+g];j==-1?0<g?(j=L[0].g,Y.push("ofs="+j)):j=0:Y.push("ofs="+j);let Fe=!0;for(let ct=0;ct<g;ct++){let ke=L[ct].g;const mt=L[ct].map;if(ke-=j,0>ke)j=Math.max(0,L[ct].g-100),Fe=!1;else try{wa(mt,Y,"req"+ke+"_")}catch{v&&v(mt)}}if(Fe){v=Y.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,v}function hi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;be||te(),X||(be(),X=!0),ce.add(d,l),l.v=0}}function es(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=gn(b(l.Fa,l),Sa(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Ia(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=gn(b(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Sn(this),Ia(this))};function mo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Ia(l){l.g=new vn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Yt(l.qa);je(d,"RID","rpc"),je(d,"SID",l.K),je(d,"AID",l.T),je(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&je(d,"TO",l.ja),je(d,"TYPE","xmlhttp"),nr(l,d),l.m&&l.o&&Ar(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Tr(Yt(d)),g.m=null,g.P=!0,oo(g,l)}i.Za=function(){this.C!=null&&(this.C=null,Sn(this),es(this),et(19))};function ts(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ns(l,d){var g=null;if(l.g==d){ts(l),mo(l),l.g=null;var v=2}else if(Ot(l.h,d))g=d.D,pa(l.h,d),v=1;else return;if(l.G!=0){if(d.o)if(v==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var L=l.B;v=ti(),ut(v,new zi(v,g)),jn(l)}else hi(l);else if(L=d.s,L==3||L==0&&0<d.X||!(v==1&&mu(l,d)||v==2&&es(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),L){case 1:rr(l,5);break;case 4:rr(l,10);break;case 3:rr(l,6);break;default:rr(l,2)}}}function Sa(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function rr(l,d){if(l.j.info("Error code "+d),d==2){var g=b(l.fb,l),v=l.Xa;const L=!v;v=new Zn(v||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||li(v,"https"),Tr(v),L?fu(v.toString(),g):Ea(v.toString(),g)}else et(2);l.G=0,l.l&&l.l.sa(d),Aa(l),Ji(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Aa(l){if(l.G=0,l.ka=[],l.l){const d=ma(l.h);(d.length!=0||l.i.length!=0)&&(G(l.ka,d),G(l.ka,l.i),l.h.i.length=0,Z(l.i),l.i.length=0),l.l.ra()}}function Ra(l,d,g){var v=g instanceof Zn?Yt(g):new Zn(g);if(v.g!="")d&&(v.g=d+"."+v.g),Er(v,v.s);else{var L=m.location;v=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var j=new Zn(null);v&&li(j,v),d&&(j.g=d),L&&Er(j,L),g&&(j.l=g),v=j}return g=l.D,d=l.ya,g&&d&&je(v,g,d),je(v,"VER",l.la),nr(l,v),v}function Ca(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Qe(new er({eb:g})):new Qe(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function go(){}i=go.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function rs(){}rs.prototype.g=function(l,d){return new Ft(l,d)};function Ft(l,d){lt.call(this),this.g=new po(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!ye(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ye(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Un(this)}J(Ft,lt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){wt(this.g)},Ft.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Js(l),l=g);d.i.push(new fa(d.Ya++,l)),d.G==3&&jn(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,wt(this.g),delete this.g,Ft.aa.N.call(this)};function ka(l){Ln.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}J(ka,Ln);function Pa(){Ui.call(this),this.status=1}J(Pa,Ui);function Un(l){this.g=l}J(Un,go),Un.prototype.ua=function(){ut(this.g,"a")},Un.prototype.ta=function(l){ut(this.g,new ka(l))},Un.prototype.sa=function(l){ut(this.g,new Pa)},Un.prototype.ra=function(){ut(this.g,"b")},rs.prototype.createWebChannel=rs.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,Rm=function(){return new rs},Am=function(){return ti()},Sm=Mn,th={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$i.NO_ERROR=0,$i.TIMEOUT=8,$i.HTTP_ERROR=6,Pl=$i,la.COMPLETE="complete",Im=la,ji.EventType=nn,nn.OPEN="a",nn.CLOSE="b",nn.ERROR="c",nn.MESSAGE="d",lt.prototype.listen=lt.prototype.K,zo=ji,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Tm=Qe}).apply(typeof Il<"u"?Il:typeof self<"u"?self:typeof window<"u"?window:{});const wp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Us="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new mm("@firebase/firestore");function As(){return ki.logLevel}function ne(i,...e){if(ki.logLevel<=xe.DEBUG){const n=e.map(vh);ki.debug(`Firestore (${Us}): ${i}`,...n)}}function pr(i,...e){if(ki.logLevel<=xe.ERROR){const n=e.map(vh);ki.error(`Firestore (${Us}): ${i}`,...n)}}function Vs(i,...e){if(ki.logLevel<=xe.WARN){const n=e.map(vh);ki.warn(`Firestore (${Us}): ${i}`,...n)}}function vh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(i="Unexpected state"){const e=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: `+i;throw pr(e),new Error(e)}function Oe(i,e){i||pe()}function ge(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class Yv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Xv{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0);let s=this.i;const a=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new qr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},m=y=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new qr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Oe(typeof s.accessToken=="string"),new Cm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Lt(e)}}class Jv{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Zv{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new Jv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Oe(this.o===void 0);const s=c=>{c.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.R;return this.R=c.token,ne("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new e0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=n0(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%e.length))}return s}}function Re(i,e){return i<e?-1:i>e?1:0}function Ds(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new at(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new at(0,0))}static max(){return new me(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(),s===void 0?s=e.length-n:s>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Yo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yo?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=e.get(a),f=n.get(a);if(c<f)return-1;if(c>f)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class He extends Yo{construct(e,n,s){return new He(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new se($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new He(n)}static emptyPath(){return new He([])}}const r0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Yo{construct(e,n,s){return new At(e,n,s)}static isValidIdentifier(e){return r0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new se($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new se($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new se($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(f=!f,a++):m!=="."||f?(s+=m,a++):(c(),a++)}if(c(),f)throw new se($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(He.fromString(e))}static fromName(e){return new ue(He.fromString(e).popFirst(5))}static empty(){return new ue(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new He(e.slice()))}}function i0(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=me.fromTimestamp(s===1e9?new at(n+1,0):new at(n,s));return new Qr(a,ue.empty(),e)}function s0(i){return new Qr(i.readTime,i.key,-1)}class Qr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Qr(me.min(),ue.empty(),-1)}static max(){return new Qr(me.max(),ue.empty(),-1)}}function o0(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(i.documentKey,e.documentKey),n!==0?n:Re(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(i){if(i.code!==$.FAILED_PRECONDITION||i.message!==a0)throw i;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,s)=>{n(e)})}static reject(e){return new z((n,s)=>{s(e)})}static waitFor(e){return new z((n,s)=>{let a=0,c=0,f=!1;e.forEach(m=>{++a,m.next(()=>{++c,f&&c===a&&n()},y=>s(y))}),f=!0,c===a&&n()})}static or(e){let n=z.resolve(!1);for(const s of e)n=n.next(a=>a?z.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new z((s,a)=>{const c=e.length,f=new Array(c);let m=0;for(let y=0;y<c;y++){const E=y;n(e[E]).next(I=>{f[E]=I,++m,m===c&&s(f)},I=>a(I))}})}static doWhile(e,n){return new z((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function u0(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bs(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Kl.oe=-1;function Yl(i){return i==null}function bl(i){return i===0&&1/i==-1/0}function c0(i){return typeof i=="number"&&Number.isInteger(i)&&!bl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Tp(e)),e=f0(i.get(n),e);return Tp(e)}function f0(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function Tp(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Pi(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Pm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sl(this.root,e,this.comparator,!0)}}class Sl{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??St.RED,this.left=a??St.EMPTY,this.right=c??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new St(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return St.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,s,a,c){return this}insert(e,n,s){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sp(this.data.getIterator())}getIteratorFrom(e){return new Sp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class Sp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new dt(At.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ds(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new xm("Invalid base64 string: "+c):c}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const d0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(i){if(Oe(!!i),typeof i=="string"){let e=0;const n=d0.exec(i);if(Oe(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(i.seconds),nanos:nt(i.nanos)}}function nt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Gr(i){return typeof i=="string"?Rt.fromBase64String(i):Rt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xl(i){const e=i.mapValue.fields.__previous_value__;return Eh(e)?Xl(e):e}function Xo(i){const e=Wr(i.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n,s,a,c,f,m,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=E}}class Jo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Jo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Eh(i)?4:g0(i)?9007199254740991:m0(i)?10:11:pe()}function Wn(i,e){if(i===e)return!0;const n=Kr(i);if(n!==Kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Xo(i).isEqual(Xo(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=Wr(a.timestampValue),m=Wr(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return Gr(a.bytesValue).isEqual(Gr(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return nt(a.geoPointValue.latitude)===nt(c.geoPointValue.latitude)&&nt(a.geoPointValue.longitude)===nt(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return nt(a.integerValue)===nt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=nt(a.doubleValue),m=nt(c.doubleValue);return f===m?bl(f)===bl(m):isNaN(f)&&isNaN(m)}return!1}(i,e);case 9:return Ds(i.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return function(a,c){const f=a.mapValue.fields||{},m=c.mapValue.fields||{};if(Ip(f)!==Ip(m))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(m[y]===void 0||!Wn(f[y],m[y])))return!1;return!0}(i,e);default:return pe()}}function Zo(i,e){return(i.values||[]).find(n=>Wn(n,e))!==void 0}function Ls(i,e){if(i===e)return 0;const n=Kr(i),s=Kr(e);if(n!==s)return Re(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(i.booleanValue,e.booleanValue);case 2:return function(c,f){const m=nt(c.integerValue||c.doubleValue),y=nt(f.integerValue||f.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(i,e);case 3:return Ap(i.timestampValue,e.timestampValue);case 4:return Ap(Xo(i),Xo(e));case 5:return Re(i.stringValue,e.stringValue);case 6:return function(c,f){const m=Gr(c),y=Gr(f);return m.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const m=c.split("/"),y=f.split("/");for(let E=0;E<m.length&&E<y.length;E++){const I=Re(m[E],y[E]);if(I!==0)return I}return Re(m.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const m=Re(nt(c.latitude),nt(f.latitude));return m!==0?m:Re(nt(c.longitude),nt(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Rp(i.arrayValue,e.arrayValue);case 10:return function(c,f){var m,y,E,I;const N=c.fields||{},b=f.fields||{},q=(m=N.value)===null||m===void 0?void 0:m.arrayValue,J=(y=b.value)===null||y===void 0?void 0:y.arrayValue,Z=Re(((E=q==null?void 0:q.values)===null||E===void 0?void 0:E.length)||0,((I=J==null?void 0:J.values)===null||I===void 0?void 0:I.length)||0);return Z!==0?Z:Rp(q,J)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===Al.mapValue&&f===Al.mapValue)return 0;if(c===Al.mapValue)return 1;if(f===Al.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),E=f.fields||{},I=Object.keys(E);y.sort(),I.sort();for(let N=0;N<y.length&&N<I.length;++N){const b=Re(y[N],I[N]);if(b!==0)return b;const q=Ls(m[y[N]],E[I[N]]);if(q!==0)return q}return Re(y.length,I.length)}(i.mapValue,e.mapValue);default:throw pe()}}function Ap(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Re(i,e);const n=Wr(i),s=Wr(e),a=Re(n.seconds,s.seconds);return a!==0?a:Re(n.nanos,s.nanos)}function Rp(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=Ls(n[a],s[a]);if(c)return c}return Re(n.length,s.length)}function Ms(i){return nh(i)}function nh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=Wr(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Gr(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return ue.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=nh(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${nh(n.fields[f])}`;return a+"}"}(i.mapValue):pe()}function xl(i){switch(Kr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xl(i);return e?16+xl(e):16;case 5:return 2*i.stringValue.length;case 6:return Gr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+xl(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return Pi(s.fields,(c,f)=>{a+=c.length+xl(f)}),a}(i.mapValue);default:throw pe()}}function Cp(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function rh(i){return!!i&&"integerValue"in i}function wh(i){return!!i&&"arrayValue"in i}function kp(i){return!!i&&"nullValue"in i}function Pp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Nl(i){return!!i&&"mapValue"in i}function m0(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function qo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Pi(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=qo(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qo(i.arrayValue.values[n]);return e}return Object.assign({},i)}function g0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Nl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qo(n)}setAll(e){let n=At.emptyPath(),s={},a=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,a),s={},a=[],n=m.popLast()}f?s[m.lastSegment()]=qo(f):a.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Nl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Nl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){Pi(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new dn(qo(this.value))}}function Nm(i){const e=[];return Pi(i.fields,(n,s)=>{const a=new At([n]);if(Nl(s)){const c=Nm(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,s,a,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Mt(e,0,me.min(),me.min(),me.min(),dn.empty(),0)}static newFoundDocument(e,n,s,a){return new Mt(e,1,n,me.min(),s,a,0)}static newNoDocument(e,n){return new Mt(e,2,n,me.min(),me.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,me.min(),me.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n){this.position=e,this.inclusive=n}}function xp(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=ue.comparator(ue.fromName(f.referenceValue),n.key):s=Ls(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Np(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Wn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function y0(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{}class ot extends Vm{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new v0(e,n,s):n==="array-contains"?new T0(e,s):n==="in"?new I0(e,s):n==="not-in"?new S0(e,s):n==="array-contains-any"?new A0(e,s):new ot(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new E0(e,s):new w0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ls(n,this.value)):n!==null&&Kr(this.value)===Kr(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends Vm{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vn(e,n)}matches(e){return Dm(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Dm(i){return i.op==="and"}function Lm(i){return _0(i)&&Dm(i)}function _0(i){for(const e of i.filters)if(e instanceof Vn)return!1;return!0}function ih(i){if(i instanceof ot)return i.field.canonicalString()+i.op.toString()+Ms(i.value);if(Lm(i))return i.filters.map(e=>ih(e)).join(",");{const e=i.filters.map(n=>ih(n)).join(",");return`${i.op}(${e})`}}function Mm(i,e){return i instanceof ot?function(s,a){return a instanceof ot&&s.op===a.op&&s.field.isEqual(a.field)&&Wn(s.value,a.value)}(i,e):i instanceof Vn?function(s,a){return a instanceof Vn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,f,m)=>c&&Mm(f,a.filters[m]),!0):!1}(i,e):void pe()}function Om(i){return i instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`}(i):i instanceof Vn?function(n){return n.op.toString()+" {"+n.getFilters().map(Om).join(" ,")+"}"}(i):"Filter"}class v0 extends ot{constructor(e,n,s){super(e,n,s),this.key=ue.fromName(s.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class E0 extends ot{constructor(e,n){super(e,"in",n),this.keys=Fm("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class w0 extends ot{constructor(e,n){super(e,"not-in",n),this.keys=Fm("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Fm(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ue.fromName(s.referenceValue))}class T0 extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wh(n)&&Zo(n.arrayValue,this.value)}}class I0 extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zo(this.value.arrayValue,n)}}class S0 extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Zo(this.value.arrayValue,n)}}class A0 extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Zo(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n=null,s=[],a=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=m,this.ue=null}}function Vp(i,e=null,n=[],s=[],a=null,c=null,f=null){return new R0(i,e,n,s,a,c,f)}function Th(i){const e=ge(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>ih(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),Yl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ms(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ms(s)).join(",")),e.ue=n}return e.ue}function Ih(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!y0(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Mm(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Np(i.startAt,e.startAt)&&Np(i.endAt,e.endAt)}function sh(i){return ue.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n=null,s=[],a=[],c=null,f="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function C0(i,e,n,s,a,c,f,m){return new na(i,e,n,s,a,c,f,m)}function bm(i){return new na(i)}function Dp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function jm(i){return i.collectionGroup!==null}function Ho(i){const e=ge(i);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new dt(At.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(E=>{E.isInequality()&&(m=m.add(E.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Ul(c,s))}),n.has(At.keyField().canonicalString())||e.ce.push(new Ul(At.keyField(),s))}return e.ce}function Hn(i){const e=ge(i);return e.le||(e.le=k0(e,Ho(i))),e.le}function k0(i,e){if(i.limitType==="F")return Vp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new Ul(a.field,c)});const n=i.endAt?new jl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new jl(i.startAt.position,i.startAt.inclusive):null;return Vp(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function oh(i,e){const n=i.filters.concat([e]);return new na(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function ah(i,e,n){return new na(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Jl(i,e){return Ih(Hn(i),Hn(e))&&i.limitType===e.limitType}function Um(i){return`${Th(Hn(i))}|lt:${i.limitType}`}function Rs(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>Om(a)).join(", ")}]`),Yl(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Ms(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Ms(a)).join(",")),`Target(${s})`}(Hn(i))}; limitType=${i.limitType})`}function Zl(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ue.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of Ho(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(f,m,y){const E=xp(f,m,y);return f.inclusive?E<=0:E<0}(s.startAt,Ho(s),a)||s.endAt&&!function(f,m,y){const E=xp(f,m,y);return f.inclusive?E>=0:E>0}(s.endAt,Ho(s),a))}(i,e)}function P0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function zm(i){return(e,n)=>{let s=!1;for(const a of Ho(i)){const c=x0(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function x0(i,e,n){const s=i.field.isKeyField()?ue.comparator(e.key,n.key):function(c,f,m){const y=f.data.field(c),E=m.data.field(c);return y!==null&&E!==null?Ls(y,E):pe()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Pm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Ye(ue.comparator);function mr(){return N0}const Bm=new Ye(ue.comparator);function Bo(...i){let e=Bm;for(const n of i)e=e.insert(n.key,n);return e}function $m(i){let e=Bm;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ri(){return Qo()}function qm(){return Qo()}function Qo(){return new xi(i=>i.toString(),(i,e)=>i.isEqual(e))}const V0=new Ye(ue.comparator),D0=new dt(ue.comparator);function Ie(...i){let e=D0;for(const n of i)e=e.add(n);return e}const L0=new dt(Re);function M0(){return L0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bl(e)?"-0":e}}function Hm(i){return{integerValue:""+i}}function O0(i,e){return c0(e)?Hm(e):Sh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this._=void 0}}function F0(i,e,n){return i instanceof zl?function(a,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Eh(c)&&(c=Xl(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}}(n,e):i instanceof ea?Wm(i,e):i instanceof ta?Gm(i,e):function(a,c){const f=Qm(a,c),m=Lp(f)+Lp(a.Pe);return rh(f)&&rh(a.Pe)?Hm(m):Sh(a.serializer,m)}(i,e)}function b0(i,e,n){return i instanceof ea?Wm(i,e):i instanceof ta?Gm(i,e):n}function Qm(i,e){return i instanceof Bl?function(s){return rh(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class zl extends eu{}class ea extends eu{constructor(e){super(),this.elements=e}}function Wm(i,e){const n=Km(e);for(const s of i.elements)n.some(a=>Wn(a,s))||n.push(s);return{arrayValue:{values:n}}}class ta extends eu{constructor(e){super(),this.elements=e}}function Gm(i,e){let n=Km(e);for(const s of i.elements)n=n.filter(a=>!Wn(a,s));return{arrayValue:{values:n}}}class Bl extends eu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Lp(i){return nt(i.integerValue||i.doubleValue)}function Km(i){return wh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function j0(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof ea&&a instanceof ea||s instanceof ta&&a instanceof ta?Ds(s.elements,a.elements,Wn):s instanceof Bl&&a instanceof Bl?Wn(s.Pe,a.Pe):s instanceof zl&&a instanceof zl}(i.transform,e.transform)}class U0{constructor(e,n){this.version=e,this.transformResults=n}}class fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class tu{}function Ym(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Jm(i.key,fr.none()):new ra(i.key,i.data,fr.none());{const n=i.data,s=dn.empty();let a=new dt(At.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new Ni(i.key,s,new Nn(a.toArray()),fr.none())}}function z0(i,e,n){i instanceof ra?function(a,c,f){const m=a.value.clone(),y=Op(a.fieldTransforms,c,f.transformResults);m.setAll(y),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(i,e,n):i instanceof Ni?function(a,c,f){if(!Vl(a.precondition,c))return void c.convertToUnknownDocument(f.version);const m=Op(a.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(Xm(a)),y.setAll(m),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(i,e,n):function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Wo(i,e,n,s){return i instanceof ra?function(c,f,m,y){if(!Vl(c.precondition,f))return m;const E=c.value.clone(),I=Fp(c.fieldTransforms,y,f);return E.setAll(I),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),null}(i,e,n,s):i instanceof Ni?function(c,f,m,y){if(!Vl(c.precondition,f))return m;const E=Fp(c.fieldTransforms,y,f),I=f.data;return I.setAll(Xm(c)),I.setAll(E),f.convertToFoundDocument(f.version,I).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(N=>N.field))}(i,e,n,s):function(c,f,m){return Vl(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(i,e,n)}function B0(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=Qm(s.transform,a||null);c!=null&&(n===null&&(n=dn.empty()),n.set(s.field,c))}return n||null}function Mp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Ds(s,a,(c,f)=>j0(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ra extends tu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ni extends tu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Xm(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Op(i,e,n){const s=new Map;Oe(i.length===n.length);for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,m=e.data.field(c.field);s.set(c.field,b0(f,m,n[a]))}return s}function Fp(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,F0(c,f,e))}return s}class Jm extends tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $0 extends tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&z0(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Wo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Wo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=qm();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(a.key)?null:m;const y=Ym(f,m);y!==null&&s.set(a.key,y),f.isValidDocument()||f.convertToNoDocument(me.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Ds(this.mutations,e.mutations,(n,s)=>Mp(n,s))&&Ds(this.baseMutations,e.baseMutations,(n,s)=>Mp(n,s))}}class Ah{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Oe(e.mutations.length===s.length);let a=function(){return V0}();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Ah(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Pe;function W0(i){switch(i){default:return pe();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function Zm(i){if(i===void 0)return pr("GRPC error has no .code"),$.UNKNOWN;switch(i){case st.OK:return $.OK;case st.CANCELLED:return $.CANCELLED;case st.UNKNOWN:return $.UNKNOWN;case st.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case st.INTERNAL:return $.INTERNAL;case st.UNAVAILABLE:return $.UNAVAILABLE;case st.UNAUTHENTICATED:return $.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case st.NOT_FOUND:return $.NOT_FOUND;case st.ALREADY_EXISTS:return $.ALREADY_EXISTS;case st.PERMISSION_DENIED:return $.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case st.ABORTED:return $.ABORTED;case st.OUT_OF_RANGE:return $.OUT_OF_RANGE;case st.UNIMPLEMENTED:return $.UNIMPLEMENTED;case st.DATA_LOSS:return $.DATA_LOSS;default:return pe()}}(Pe=st||(st={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new Ci([4294967295,4294967295],0);function bp(i){const e=G0().encode(i),n=new wm;return n.update(e),new Uint8Array(n.digest())}function jp(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ci([n,s],0),new Ci([a,c],0)]}class Rh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new $o(`Invalid padding: ${n}`);if(s<0)throw new $o(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $o(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new $o(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ci.fromNumber(this.Te)}Ee(e,n,s){let a=e.add(n.multiply(Ci.fromNumber(s)));return a.compare(K0)===1&&(a=new Ci([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=bp(e),[s,a]=jp(n);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,a,c);if(!this.de(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Rh(c,a,n);return s.forEach(m=>f.insert(m)),f}insert(e){if(this.Te===0)return;const n=bp(e),[s,a]=jp(n);for(let c=0;c<this.hashCount;c++){const f=this.Ee(s,a,c);this.Ae(f)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class $o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ia.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new nu(me.min(),a,new Ye(Re),mr(),Ie())}}class ia{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ia(s,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class eg{constructor(e,n){this.targetId=e,this.me=n}}class tg{constructor(e,n,s=Rt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Up{constructor(){this.fe=0,this.ge=zp(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),n=Ie(),s=Ie();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:pe()}}),new ia(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=zp()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Y0{constructor(e){this.Le=e,this.Be=new Map,this.ke=mr(),this.qe=Rl(),this.Qe=Rl(),this.Ke=new Ye(Re)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const c=a.target;if(sh(c))if(s===0){const f=new ue(c.path);this.We(n,f,Mt.newNoDocument(f,me.min()))}else Oe(s===1);else{const f=this.Ze(n);if(f!==s){const m=this.Xe(e),y=m?this.et(m,e,f):1;if(y!==0){this.He(n);const E=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,E)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,m;try{f=Gr(s).toUint8Array()}catch(y){if(y instanceof xm)return Vs("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Rh(f,a,c)}catch(y){return Vs(y instanceof $o?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const f=this.Le.nt(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(n,c,null),a++)}),a}it(e){const n=new Map;this.Be.forEach((c,f)=>{const m=this.Ye(f);if(m){if(c.current&&sh(m.target)){const y=new ue(m.target.path);this.st(y).has(f)||this.ot(f,y)||this.We(f,y,Mt.newNoDocument(y,e))}c.be&&(n.set(f,c.ve()),c.Ce())}});let s=Ie();this.Qe.forEach((c,f)=>{let m=!0;f.forEachWhile(y=>{const E=this.Ye(y);return!E||E.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ke.forEach((c,f)=>f.setReadTime(e));const a=new nu(e,n,this.Ke,this.ke,s);return this.ke=mr(),this.qe=Rl(),this.Qe=Rl(),this.Ke=new Ye(Re),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Up,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new dt(Re),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(Re),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Up),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Rl(){return new Ye(ue.comparator)}function zp(){return new Ye(ue.comparator)}const X0={asc:"ASCENDING",desc:"DESCENDING"},J0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z0={and:"AND",or:"OR"};class eE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lh(i,e){return i.useProto3Json||Yl(e)?e:{value:e}}function $l(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ng(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function tE(i,e){return $l(i,e.toTimestamp())}function Qn(i){return Oe(!!i),me.fromTimestamp(function(n){const s=Wr(n);return new at(s.seconds,s.nanos)}(i))}function Ch(i,e){return uh(i,e).canonicalString()}function uh(i,e){const n=function(a){return new He(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function rg(i){const e=He.fromString(i);return Oe(lg(e)),e}function ch(i,e){return Ch(i.databaseId,e.path)}function qc(i,e){const n=rg(e);if(n.get(1)!==i.databaseId.projectId)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new se($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ue(sg(n))}function ig(i,e){return Ch(i.databaseId,e)}function nE(i){const e=rg(i);return e.length===4?He.emptyPath():sg(e)}function hh(i){return new He(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function sg(i){return Oe(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Bp(i,e,n){return{name:ch(i,e),fields:n.value.mapValue.fields}}function rE(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(E,I){return E.useProto3Json?(Oe(I===void 0||typeof I=="string"),Rt.fromBase64String(I||"")):(Oe(I===void 0||I instanceof Buffer||I instanceof Uint8Array),Rt.fromUint8Array(I||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(E){const I=E.code===void 0?$.UNKNOWN:Zm(E.code);return new se(I,E.message||"")}(f);n=new tg(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=qc(i,s.document.name),c=Qn(s.document.updateTime),f=s.document.createTime?Qn(s.document.createTime):me.min(),m=new dn({mapValue:{fields:s.document.fields}}),y=Mt.newFoundDocument(a,c,f,m),E=s.targetIds||[],I=s.removedTargetIds||[];n=new Dl(E,I,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=qc(i,s.document),c=s.readTime?Qn(s.readTime):me.min(),f=Mt.newNoDocument(a,c),m=s.removedTargetIds||[];n=new Dl([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=qc(i,s.document),c=s.removedTargetIds||[];n=new Dl([],c,a,null)}else{if(!("filter"in e))return pe();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new Q0(a,c),m=s.targetId;n=new eg(m,f)}}return n}function iE(i,e){let n;if(e instanceof ra)n={update:Bp(i,e.key,e.value)};else if(e instanceof Jm)n={delete:ch(i,e.key)};else if(e instanceof Ni)n={update:Bp(i,e.key,e.data),updateMask:dE(e.fieldMask)};else{if(!(e instanceof $0))return pe();n={verify:ch(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const m=f.transform;if(m instanceof zl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ea)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ta)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Bl)return{fieldPath:f.field.canonicalString(),increment:m.Pe};throw pe()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:tE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pe()}(i,e.precondition)),n}function sE(i,e){return i&&i.length>0?(Oe(e!==void 0),i.map(n=>function(a,c){let f=a.updateTime?Qn(a.updateTime):Qn(c);return f.isEqual(me.min())&&(f=Qn(c)),new U0(f,a.transformResults||[])}(n,e))):[]}function oE(i,e){return{documents:[ig(i,e.path)]}}function aE(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=ig(i,a);const c=function(E){if(E.length!==0)return ag(Vn.create(E,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(E){if(E.length!==0)return E.map(I=>function(b){return{field:Cs(b.field),direction:cE(b.dir)}}(I))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=lh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(E){return{before:E.inclusive,values:E.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(e.endAt)),{ct:n,parent:a}}function lE(i){let e=nE(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Oe(s===1);const I=n.from[0];I.allDescendants?a=I.collectionId:e=e.child(I.collectionId)}let c=[];n.where&&(c=function(N){const b=og(N);return b instanceof Vn&&Lm(b)?b.getFilters():[b]}(n.where));let f=[];n.orderBy&&(f=function(N){return N.map(b=>function(J){return new Ul(ks(J.field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(J.direction))}(b))}(n.orderBy));let m=null;n.limit&&(m=function(N){let b;return b=typeof N=="object"?N.value:N,Yl(b)?null:b}(n.limit));let y=null;n.startAt&&(y=function(N){const b=!!N.before,q=N.values||[];return new jl(q,b)}(n.startAt));let E=null;return n.endAt&&(E=function(N){const b=!N.before,q=N.values||[];return new jl(q,b)}(n.endAt)),C0(e,a,f,c,m,"F",y,E)}function uE(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function og(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ks(n.unaryFilter.field);return ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=ks(n.unaryFilter.field);return ot.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ks(n.unaryFilter.field);return ot.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ks(n.unaryFilter.field);return ot.create(f,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(i):i.fieldFilter!==void 0?function(n){return ot.create(ks(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Vn.create(n.compositeFilter.filters.map(s=>og(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(i):pe()}function cE(i){return X0[i]}function hE(i){return J0[i]}function fE(i){return Z0[i]}function Cs(i){return{fieldPath:i.canonicalString()}}function ks(i){return At.fromServerFormat(i.fieldPath)}function ag(i){return i instanceof ot?function(n){if(n.op==="=="){if(Pp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NAN"}};if(kp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NAN"}};if(kp(n.value))return{unaryFilter:{field:Cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cs(n.field),op:hE(n.op),value:n.value}}}(i):i instanceof Vn?function(n){const s=n.getFilters().map(a=>ag(a));return s.length===1?s[0]:{compositeFilter:{op:fE(n.op),filters:s}}}(i):pe()}function dE(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,s,a,c=me.min(),f=me.min(),m=Rt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e){this.ht=e}}function mE(i){const e=lE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ah(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.ln=new yE}addToCollectionParentIndex(e,n){return this.ln.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Qr.min())}updateCollectionGroup(e,n,s){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class yE{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new dt(He.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new dt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(41943040,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Os(0)}static Qn(){return new Os(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp([i,e],[n,s]){const a=Re(i,n);return a===0?Re(e,s):a}class _E{constructor(e){this.Gn=e,this.buffer=new dt(qp),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();qp(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vE{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bs(n)?ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await zs(n)}await this.Yn(3e5)})}}class EE{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return z.resolve(Kl.oe);const s=new _E(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve($p)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$p):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,c,f,m,y,E;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),a=this.params.maximumSequenceNumbersToCollect):a=N,f=Date.now(),this.nthSequenceNumber(e,a))).next(N=>(s=N,m=Date.now(),this.removeTargets(e,s,n))).next(N=>(c=N,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(N=>(E=Date.now(),As()<=xe.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-I}ms
	Determined least recently used ${a} in `+(m-f)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${N} documents in `+(E-y)+`ms
Total Duration: ${E-I}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:N})))}}function wE(i,e){return new EE(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.changes=new xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?z.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&Wo(s.mutation,a,Nn.empty(),at.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ie()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ie()){const a=Ri();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let f=Bo();return c.forEach((m,y)=>{f=f.insert(m,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Ri();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ie()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,s,a){let c=mr();const f=Qo(),m=function(){return Qo()}();return n.forEach((y,E)=>{const I=s.get(E.key);a.has(E.key)&&(I===void 0||I.mutation instanceof Ni)?c=c.insert(E.key,E):I!==void 0?(f.set(E.key,I.mutation.getFieldMask()),Wo(I.mutation,E,I.mutation.getFieldMask(),at.now())):f.set(E.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((E,I)=>f.set(E,I)),n.forEach((E,I)=>{var N;return m.set(E,new IE(I,(N=f.get(E))!==null&&N!==void 0?N:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Qo();let a=new Ye((f,m)=>f-m),c=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(y=>{const E=n.get(y);if(E===null)return;let I=s.get(y)||Nn.empty();I=m.applyToLocalView(E,I),s.set(y,I);const N=(a.get(m.batchId)||Ie()).add(y);a=a.insert(m.batchId,N)})}).next(()=>{const f=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),E=y.key,I=y.value,N=qm();I.forEach(b=>{if(!c.has(b)){const q=Ym(n.get(b),s.get(b));q!==null&&N.set(b,q),c=c.add(b)}}),f.push(this.documentOverlayCache.saveOverlays(e,E,N))}return z.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(f){return ue.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):z.resolve(Ri());let m=-1,y=c;return f.next(E=>z.forEach(E,(I,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),c.get(I)?z.resolve():this.remoteDocumentCache.getEntry(e,I).next(b=>{y=y.insert(I,b)}))).next(()=>this.populateOverlays(e,E,c)).next(()=>this.computeViews(e,y,E,Ie())).next(I=>({batchId:m,changes:$m(I)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(s=>{let a=Bo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=Bo();return this.indexManager.getCollectionParents(e,c).next(m=>z.forEach(m,y=>{const E=function(N,b){return new na(b,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)}(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,s,a).next(I=>{I.forEach((N,b)=>{f=f.insert(N,b)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(f=>{c.forEach((y,E)=>{const I=E.getKey();f.get(I)===null&&(f=f.insert(I,Mt.newInvalidDocument(I)))});let m=Bo();return f.forEach((y,E)=>{const I=c.get(y);I!==void 0&&Wo(I.mutation,E,Nn.empty(),at.now()),Zl(n,E)&&(m=m.insert(y,E))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return z.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Qn(a.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:mE(a.bundledQuery),readTime:Qn(a.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.overlays=new Ye(ue.comparator),this.Er=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ri();return z.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.Tt(e,n,c)}),z.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Er.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Er.delete(s)),z.resolve()}getOverlaysForCollection(e,n,s){const a=Ri(),c=n.length+1,f=new ue(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const y=m.getNext().value,E=y.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return z.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Ye((E,I)=>E-I);const f=this.overlays.getIterator();for(;f.hasNext();){const E=f.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>s){let I=c.get(E.largestBatchId);I===null&&(I=Ri(),c=c.insert(E.largestBatchId,I)),I.set(E.getKey(),E)}}const m=Ri(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,I)=>m.set(E,I)),!(m.size()>=a)););return z.resolve(m)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.Er.get(a.largestBatchId).delete(s.key);this.Er.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new H0(n,s));let c=this.Er.get(n);c===void 0&&(c=Ie(),this.Er.set(n,c)),this.Er.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.dr=new dt(vt.Ar),this.Rr=new dt(vt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const s=new vt(e,n);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new vt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new ue(new He([])),s=new vt(n,e),a=new vt(n,e+1),c=[];return this.Rr.forEachInRange([s,a],f=>{this.gr(f),c.push(f.key)}),c}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ue(new He([])),s=new vt(n,e),a=new vt(n,e+1);let c=Ie();return this.Rr.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new vt(e,0),s=this.dr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class vt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ue.comparator(e.key,n.key)||Re(e.br,n.br)}static Vr(e,n){return Re(e.br,n.br)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new dt(vt.Ar)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new q0(c,n,s,a);this.mutationQueue.push(f);for(const m of a)this.vr=this.vr.add(new vt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return z.resolve(f)}lookupMutationBatch(e,n){return z.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),c=a<0?0:a;return z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new vt(n,0),a=new vt(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([s,a],f=>{const m=this.Cr(f.br);c.push(m)}),z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new dt(Re);return n.forEach(a=>{const c=new vt(a,0),f=new vt(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,f],m=>{s=s.add(m.br)})}),z.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;ue.isDocumentKey(c)||(c=c.child(""));const f=new vt(new ue(c),0);let m=new dt(Re);return this.vr.forEachWhile(y=>{const E=y.key.path;return!!s.isPrefixOf(E)&&(E.length===a&&(m=m.add(y.br)),!0)},f),z.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Oe(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return z.forEach(n.mutations,a=>{const c=new vt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,n){const s=new vt(n,0),a=this.vr.firstAfterOrEqual(s);return z.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.Nr=e,this.docs=function(){return new Ye(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return z.resolve(s?s.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let s=mr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Mt.newInvalidDocument(a))}),z.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=mr();const f=n.path,m=new ue(f.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:E,value:{document:I}}=y.getNext();if(!f.isPrefixOf(E.path))break;E.path.length>f.length+1||o0(s0(I),s)<=0||(a.has(I.key)||Zl(n,I))&&(c=c.insert(I.key,I.mutableCopy()))}return z.resolve(c)}getAllFromCollectionGroup(e,n,s,a){pe()}Lr(e,n){return z.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new xE(this)}getSize(e){return z.resolve(this.size)}}class xE extends TE{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),z.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.persistence=e,this.Br=new xi(n=>Th(n),Ih),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.kr=0,this.qr=new kh,this.targetCount=0,this.Qr=Os.qn()}forEachTarget(e,n){return this.Br.forEach((s,a)=>n(a)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),z.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Os(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Un(n),z.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.Br.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Br.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),z.waitFor(c).next(()=>a)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const s=this.Br.get(n)||null;return z.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),z.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),z.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return z.resolve(s)}containsKey(e,n){return z.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Kl(0),this.Ur=!1,this.Ur=!0,this.Wr=new CE,this.referenceDelegate=e(this),this.Gr=new NE(this),this.indexManager=new gE,this.remoteDocumentCache=function(a){return new PE(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new pE(n),this.jr=new AE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new kE(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){ne("MemoryPersistence","Starting transaction:",e);const a=new VE(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(c=>this.referenceDelegate.Jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Yr(e,n){return z.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class VE extends l0{constructor(e){super(),this.currentSequenceNumber=e}}class Ph{constructor(e){this.persistence=e,this.Zr=new kh,this.Xr=null}static ei(e){return new Ph(e)}get ti(){if(this.Xr)return this.Xr;throw pe()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),z.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),z.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.ti.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.ti,s=>{const a=ue.fromPath(s);return this.ni(e,a).next(c=>{c||n.removeEntry(a,me.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return z.or([()=>z.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class ql{constructor(e,n){this.persistence=e,this.ri=new xi(s=>h0(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=wE(this,n)}static ei(e,n){return new ql(e,n)}Hr(){}Jr(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return z.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(c=>c?z.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.Lr(e,f=>this.ir(e,f,n).next(m=>{m||(s++,c.removeEntry(f,me.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),z.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),z.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xl(e.data.value)),n}ir(e,n,s){return z.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return z.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=Ie(),a=Ie();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new xh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return N_()?8:u0(P_())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.Xi(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.es(e,n,a,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new DE;return this.ts(e,n,f).next(m=>{if(c.result=m,this.Hi)return this.ns(e,n,f,m.size)})}).next(()=>c.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(As()<=xe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),z.resolve()):(As()<=xe.DEBUG&&ne("QueryEngine","Query:",Rs(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(As()<=xe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(n))):z.resolve())}Xi(e,n){if(Dp(n))return z.resolve(null);let s=Hn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=ah(n,null,"F"),s=Hn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=Ie(...c);return this.Zi.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,s).next(y=>{const E=this.rs(n,m);return this.ss(n,E,f,y.readTime)?this.Xi(e,ah(n,null,"F")):this.os(e,E,n,y)}))})))}es(e,n,s,a){return Dp(n)||a.isEqual(me.min())?z.resolve(null):this.Zi.getDocuments(e,s).next(c=>{const f=this.rs(n,c);return this.ss(n,f,s,a)?z.resolve(null):(As()<=xe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Rs(n)),this.os(e,f,n,i0(a,-1)).next(m=>m))})}rs(e,n){let s=new dt(zm(e));return n.forEach((a,c)=>{Zl(e,c)&&(s=s.add(c))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ts(e,n,s){return As()<=xe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Rs(n)),this.Zi.getDocumentsMatchingQuery(e,n,Qr.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new Ye(Re),this.cs=new xi(c=>Th(c),Ih),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SE(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function OE(i,e,n,s){return new ME(i,e,n,s)}async function cg(i,e){const n=ge(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],m=[];let y=Ie();for(const E of a){f.push(E.batchId);for(const I of E.mutations)y=y.add(I.key)}for(const E of c){m.push(E.batchId);for(const I of E.mutations)y=y.add(I.key)}return n.localDocuments.getDocuments(s,y).next(E=>({Ts:E,removedBatchIds:f,addedBatchIds:m}))})})}function FE(i,e){const n=ge(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,y,E,I){const N=E.batch,b=N.keys();let q=z.resolve();return b.forEach(J=>{q=q.next(()=>I.getEntry(y,J)).next(Z=>{const G=E.docVersions.get(J);Oe(G!==null),Z.version.compareTo(G)<0&&(N.applyToRemoteDocument(Z,E),Z.isValidDocument()&&(Z.setReadTime(E.commitVersion),I.addEntry(Z)))})}),q.next(()=>m.mutationQueue.removeMutationBatch(y,N))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=Ie();for(let E=0;E<m.mutationResults.length;++E)m.mutationResults[E].transformResults.length>0&&(y=y.add(m.batch.mutations[E].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function hg(i){const e=ge(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function bE(i,e){const n=ge(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const m=[];e.targetChanges.forEach((I,N)=>{const b=a.get(N);if(!b)return;m.push(n.Gr.removeMatchingKeys(c,I.removedDocuments,N).next(()=>n.Gr.addMatchingKeys(c,I.addedDocuments,N)));let q=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(N)!==null?q=q.withResumeToken(Rt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):I.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(I.resumeToken,s)),a=a.insert(N,q),function(Z,G,Ee){return Z.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8?!0:Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0}(b,q,I)&&m.push(n.Gr.updateTargetData(c,q))});let y=mr(),E=Ie();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,I))}),m.push(jE(c,f,e.documentUpdates).next(I=>{y=I.Is,E=I.Es})),!s.isEqual(me.min())){const I=n.Gr.getLastRemoteSnapshotVersion(c).next(N=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(I)}return z.waitFor(m).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,y,E)).next(()=>y)}).then(c=>(n.us=a,c))}function jE(i,e,n){let s=Ie(),a=Ie();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=mr();return n.forEach((m,y)=>{const E=c.get(m);y.isFoundDocument()!==E.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(me.min())?(e.removeEntry(m,y.readTime),f=f.insert(m,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(y),f=f.insert(m,y)):ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",y.version)}),{Is:f,Es:a}})}function UE(i,e){const n=ge(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function zE(i,e){const n=ge(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(c=>c?(a=c,z.resolve(a)):n.Gr.allocateTargetId(s).next(f=>(a=new zr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function fh(i,e,n){const s=ge(i),a=s.us.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a))}catch(f){if(!Bs(f))throw f;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function Hp(i,e,n){const s=ge(i);let a=me.min(),c=Ie();return s.persistence.runTransaction("Execute query","readwrite",f=>function(y,E,I){const N=ge(y),b=N.cs.get(I);return b!==void 0?z.resolve(N.us.get(b)):N.Gr.getTargetData(E,I)}(s,f,Hn(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(f,m.targetId).next(y=>{c=y})}).next(()=>s._s.getDocumentsMatchingQuery(f,e,n?a:me.min(),n?c:Ie())).next(m=>(BE(s,P0(e),m),{documents:m,ds:c})))}function BE(i,e,n){let s=i.ls.get(e)||me.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.ls.set(e,s)}class Qp{constructor(){this.activeTargetIds=M0()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $E{constructor(){this._o=new Qp,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Qp,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl=null;function Hc(){return Cl===null?Cl=function(){return 268435456+Math.round(2147483648*Math.random())}():Cl++,"0x"+Cl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class WE extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Oo(n,s,a,c,f){const m=Hc(),y=this.No(n,s.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${m}:`,y,a);const E={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(E,c,f),this.Bo(n,y,E,a).then(I=>(ne("RestConnection",`Received RPC '${n}' ${m}: `,I),I),I=>{throw Vs("RestConnection",`RPC '${n}' ${m} failed with error: `,I,"url: ",y,"request:",a),I})}ko(n,s,a,c,f,m){return this.Oo(n,s,a,c,f)}Lo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Us}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,f)=>n[f]=c),a&&a.headers.forEach((c,f)=>n[f]=c)}No(n,s){const a=HE[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,s,a){const c=Hc();return new Promise((f,m)=>{const y=new Tm;y.setWithCredentials(!0),y.listenOnce(Im.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Pl.NO_ERROR:const I=y.getResponseJson();ne(Dt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),f(I);break;case Pl.TIMEOUT:ne(Dt,`RPC '${e}' ${c} timed out`),m(new se($.DEADLINE_EXCEEDED,"Request time out"));break;case Pl.HTTP_ERROR:const N=y.getStatus();if(ne(Dt,`RPC '${e}' ${c} failed with status:`,N,"response text:",y.getResponseText()),N>0){let b=y.getResponseJson();Array.isArray(b)&&(b=b[0]);const q=b==null?void 0:b.error;if(q&&q.status&&q.message){const J=function(G){const Ee=G.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(Ee)>=0?Ee:$.UNKNOWN}(q.status);m(new se(J,q.message))}else m(new se($.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new se($.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{ne(Dt,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(a);ne(Dt,`RPC '${e}' ${c} sending request:`,a),y.send(n,"POST",E,s,15)})}qo(e,n,s){const a=Hc(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Rm(),m=Am(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Lo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const I=c.join("");ne(Dt,`Creating RPC '${e}' stream ${a}: ${I}`,y);const N=f.createWebChannel(I,y);let b=!1,q=!1;const J=new QE({Eo:G=>{q?ne(Dt,`Not sending because RPC '${e}' stream ${a} is closed:`,G):(b||(ne(Dt,`Opening RPC '${e}' stream ${a} transport.`),N.open(),b=!0),ne(Dt,`RPC '${e}' stream ${a} sending:`,G),N.send(G))},Ao:()=>N.close()}),Z=(G,Ee,ye)=>{G.listen(Ee,_e=>{try{ye(_e)}catch(Se){setTimeout(()=>{throw Se},0)}})};return Z(N,zo.EventType.OPEN,()=>{q||(ne(Dt,`RPC '${e}' stream ${a} transport opened.`),J.So())}),Z(N,zo.EventType.CLOSE,()=>{q||(q=!0,ne(Dt,`RPC '${e}' stream ${a} transport closed`),J.Do())}),Z(N,zo.EventType.ERROR,G=>{q||(q=!0,Vs(Dt,`RPC '${e}' stream ${a} transport errored:`,G),J.Do(new se($.UNAVAILABLE,"The operation could not be completed")))}),Z(N,zo.EventType.MESSAGE,G=>{var Ee;if(!q){const ye=G.data[0];Oe(!!ye);const _e=ye,Se=(_e==null?void 0:_e.error)||((Ee=_e[0])===null||Ee===void 0?void 0:Ee.error);if(Se){ne(Dt,`RPC '${e}' stream ${a} received error:`,Se);const Je=Se.status;let Ne=function(A){const k=st[A];if(k!==void 0)return Zm(k)}(Je),P=Se.message;Ne===void 0&&(Ne=$.INTERNAL,P="Unknown error status: "+Je+" with message "+Se.message),q=!0,J.Do(new se(Ne,P)),N.close()}else ne(Dt,`RPC '${e}' stream ${a} received:`,ye),J.vo(ye)}}),Z(m,Sm.STAT_EVENT,G=>{G.stat===th.PROXY?ne(Dt,`RPC '${e}' stream ${a} detected buffering proxy`):G.stat===th.NOPROXY&&ne(Dt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{J.bo()},0),J}}function Qc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(i){return new eE(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,s=1e3,a=1.5,c=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&ne("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,s,a,c,f,m,y){this.li=e,this.Yo=s,this.Zo=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new fg(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new se($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.E_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GE extends dg{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=rE(this.serializer,e),s=function(c){if(!("targetChange"in c))return me.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?me.min():f.readTime?Qn(f.readTime):me.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=hh(this.serializer),n.addTarget=function(c,f){let m;const y=f.target;if(m=sh(y)?{documents:oE(c,y)}:{query:aE(c,y).ct},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=ng(c,f.resumeToken);const E=lh(c,f.expectedCount);E!==null&&(m.expectedCount=E)}else if(f.snapshotVersion.compareTo(me.min())>0){m.readTime=$l(c,f.snapshotVersion.toTimestamp());const E=lh(c,f.expectedCount);E!==null&&(m.expectedCount=E)}return m}(this.serializer,e);const s=uE(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=hh(this.serializer),n.removeTarget=e,this.c_(n)}}class KE extends dg{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=sE(e.writeResults,e.commitTime),s=Qn(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=hh(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>iE(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Oo(e,uh(n,s),a,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se($.UNKNOWN,c.toString())})}ko(e,n,s,a,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.ko(e,uh(n,s),a,f,m,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new se($.UNKNOWN,f.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class XE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(pr(n),this.C_=!1):ne("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(f=>{s.enqueueAndForget(async()=>{Vi(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(y){const E=ge(y);E.k_.add(4),await sa(E),E.K_.set("Unknown"),E.k_.delete(4),await iu(E)}(this))})}),this.K_=new XE(s,a)}}async function iu(i){if(Vi(i))for(const e of i.q_)await e(!0)}async function sa(i){for(const e of i.q_)await e(!1)}function pg(i,e){const n=ge(i);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Lh(n)?Dh(n):$s(n).s_()&&Vh(n,e))}function Nh(i,e){const n=ge(i),s=$s(n);n.B_.delete(e),s.s_()&&mg(n,e),n.B_.size===0&&(s.s_()?s.a_():Vi(n)&&n.K_.set("Unknown"))}function Vh(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$s(i).V_(e)}function mg(i,e){i.U_.xe(e),$s(i).m_(e)}function Dh(i){i.U_=new Y0({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),$s(i).start(),i.K_.F_()}function Lh(i){return Vi(i)&&!$s(i).i_()&&i.B_.size>0}function Vi(i){return ge(i).k_.size===0}function gg(i){i.U_=void 0}async function ZE(i){i.K_.set("Online")}async function ew(i){i.B_.forEach((e,n)=>{Vh(i,e)})}async function tw(i,e){gg(i),Lh(i)?(i.K_.O_(e),Dh(i)):i.K_.set("Unknown")}async function nw(i,e,n){if(i.K_.set("Online"),e instanceof tg&&e.state===2&&e.cause)try{await async function(a,c){const f=c.cause;for(const m of c.targetIds)a.B_.has(m)&&(await a.remoteSyncer.rejectListen(m,f),a.B_.delete(m),a.U_.removeTarget(m))}(i,e)}catch(s){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hl(i,s)}else if(e instanceof Dl?i.U_.$e(e):e instanceof eg?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(me.min()))try{const s=await hg(i.localStore);n.compareTo(s)>=0&&await function(c,f){const m=c.U_.it(f);return m.targetChanges.forEach((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const I=c.B_.get(E);I&&c.B_.set(E,I.withResumeToken(y.resumeToken,f))}}),m.targetMismatches.forEach((y,E)=>{const I=c.B_.get(y);if(!I)return;c.B_.set(y,I.withResumeToken(Rt.EMPTY_BYTE_STRING,I.snapshotVersion)),mg(c,y);const N=new zr(I.target,y,E,I.sequenceNumber);Vh(c,N)}),c.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){ne("RemoteStore","Failed to raise snapshot:",s),await Hl(i,s)}}async function Hl(i,e,n){if(!Bs(e))throw e;i.k_.add(1),await sa(i),i.K_.set("Offline"),n||(n=()=>hg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await iu(i)})}function yg(i,e){return e().catch(n=>Hl(i,n,e))}async function su(i){const e=ge(i),n=Yr(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;rw(e);)try{const a=await UE(e.localStore,s);if(a===null){e.L_.length===0&&n.a_();break}s=a.batchId,iw(e,a)}catch(a){await Hl(e,a)}_g(e)&&vg(e)}function rw(i){return Vi(i)&&i.L_.length<10}function iw(i,e){i.L_.push(e);const n=Yr(i);n.s_()&&n.f_&&n.g_(e.mutations)}function _g(i){return Vi(i)&&!Yr(i).i_()&&i.L_.length>0}function vg(i){Yr(i).start()}async function sw(i){Yr(i).w_()}async function ow(i){const e=Yr(i);for(const n of i.L_)e.g_(n.mutations)}async function aw(i,e,n){const s=i.L_.shift(),a=Ah.from(s,e,n);await yg(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await su(i)}async function lw(i,e){e&&Yr(i).f_&&await async function(s,a){if(function(f){return W0(f)&&f!==$.ABORTED}(a.code)){const c=s.L_.shift();Yr(s).__(),await yg(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await su(s)}}(i,e),_g(i)&&vg(i)}async function Gp(i,e){const n=ge(i);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const s=Vi(n);n.k_.add(3),await sa(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await iu(n)}async function uw(i,e){const n=ge(i);e?(n.k_.delete(2),await iu(n)):e||(n.k_.add(2),await sa(n),n.K_.set("Unknown"))}function $s(i){return i.W_||(i.W_=function(n,s,a){const c=ge(n);return c.b_(),new GE(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:ZE.bind(null,i),mo:ew.bind(null,i),po:tw.bind(null,i),R_:nw.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),Lh(i)?Dh(i):i.K_.set("Unknown")):(await i.W_.stop(),gg(i))})),i.W_}function Yr(i){return i.G_||(i.G_=function(n,s,a){const c=ge(n);return c.b_(),new KE(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:sw.bind(null,i),po:lw.bind(null,i),p_:ow.bind(null,i),y_:aw.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await su(i)):(await i.G_.stop(),i.L_.length>0&&(ne("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,m=new Mh(e,n,f,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oh(i,e){if(pr("AsyncQueue",`${e}: ${i}`),Bs(i))return new se($.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{static emptySet(e){return new xs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ue.comparator(n.key,s.key):(n,s)=>ue.comparator(n.key,s.key),this.keyedMap=Bo(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new xs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(){this.z_=new Ye(ue.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):pe():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Fs{constructor(e,n,s,a,c,f,m,y,E){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new Fs(e,n,xs.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class hw{constructor(){this.queries=Yp(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=ge(n),c=a.queries;a.queries=Yp(),c.forEach((f,m)=>{for(const y of m.J_)y.onError(s)})})(this,new se($.ABORTED,"Firestore shutting down"))}}function Yp(){return new xi(i=>Um(i),Jl)}async function fw(i,e){const n=ge(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Y_()&&e.Z_()&&(s=2):(c=new cw,s=e.Z_()?0:1);try{switch(s){case 0:c.H_=await n.onListen(a,!0);break;case 1:c.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const m=Oh(f,`Initialization of query '${Rs(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.J_.push(e),e.ea(n.onlineState),c.H_&&e.ta(c.H_)&&Fh(n)}async function dw(i,e){const n=ge(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.J_.indexOf(e);f>=0&&(c.J_.splice(f,1),c.J_.length===0?a=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function pw(i,e){const n=ge(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const m of f.J_)m.ta(a)&&(s=!0);f.H_=a}}s&&Fh(n)}function mw(i,e,n){const s=ge(i),a=s.queries.get(e);if(a)for(const c of a.J_)c.onError(n);s.queries.delete(e)}function Fh(i){i.X_.forEach(e=>{e.next()})}var dh,Xp;(Xp=dh||(dh={})).na="default",Xp.Cache="cache";class gw{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Fs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==dh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this.key=e}}class wg{constructor(e){this.key=e}}class yw{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ie(),this.mutatedKeys=Ie(),this.Va=zm(e),this.ma=new xs(this.Va)}get fa(){return this.da}ga(e,n){const s=n?n.pa:new Kp,a=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,E=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((I,N)=>{const b=a.get(I),q=Zl(this.query,N)?N:null,J=!!b&&this.mutatedKeys.has(b.key),Z=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let G=!1;b&&q?b.data.isEqual(q.data)?J!==Z&&(s.track({type:3,doc:q}),G=!0):this.ya(b,q)||(s.track({type:2,doc:q}),G=!0,(y&&this.Va(q,y)>0||E&&this.Va(q,E)<0)&&(m=!0)):!b&&q?(s.track({type:0,doc:q}),G=!0):b&&!q&&(s.track({type:1,doc:b}),G=!0,(y||E)&&(m=!0)),G&&(q?(f=f.add(q),c=Z?c.add(I):c.delete(I)):(f=f.delete(I),c=c.delete(I)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const I=this.query.limitType==="F"?f.last():f.first();f=f.delete(I.key),c=c.delete(I.key),s.track({type:1,doc:I})}return{ma:f,pa:s,ss:m,mutatedKeys:c}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const f=e.pa.j_();f.sort((I,N)=>function(q,J){const Z=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return Z(q)-Z(J)}(I.type,N.type)||this.Va(I.doc,N.doc)),this.wa(s),a=a!=null&&a;const m=n&&!a?this.Sa():[],y=this.Ra.size===0&&this.current&&!a?1:0,E=y!==this.Aa;return this.Aa=y,f.length!==0||E?{snapshot:new Fs(this.query,e.ma,c,f,e.mutatedKeys,y===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Kp,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ie(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new wg(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new Eg(s))}),n}va(e){this.da=e.ds,this.Ra=Ie();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Fs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class _w{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class vw{constructor(e){this.key=e,this.Fa=!1}}class Ew{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Ma={},this.xa=new xi(m=>Um(m),Jl),this.Oa=new Map,this.Na=new Set,this.La=new Ye(ue.comparator),this.Ba=new Map,this.ka=new kh,this.qa={},this.Qa=new Map,this.Ka=Os.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function ww(i,e,n=!0){const s=Cg(i);let a;const c=s.xa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await Tg(s,e,n,!0),a}async function Tw(i,e){const n=Cg(i);await Tg(n,e,!0,!1)}async function Tg(i,e,n,s){const a=await zE(i.localStore,Hn(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await Iw(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&pg(i.remoteStore,a),m}async function Iw(i,e,n,s,a){i.Ua=(N,b,q)=>async function(Z,G,Ee,ye){let _e=G.view.ga(Ee);_e.ss&&(_e=await Hp(Z.localStore,G.query,!1).then(({documents:P})=>G.view.ga(P,_e)));const Se=ye&&ye.targetChanges.get(G.targetId),Je=ye&&ye.targetMismatches.get(G.targetId)!=null,Ne=G.view.applyChanges(_e,Z.isPrimaryClient,Se,Je);return Zp(Z,G.targetId,Ne.ba),Ne.snapshot}(i,N,b,q);const c=await Hp(i.localStore,e,!0),f=new yw(e,c.ds),m=f.ga(c.documents),y=ia.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),E=f.applyChanges(m,i.isPrimaryClient,y);Zp(i,n,E.ba);const I=new _w(e,n,f);return i.xa.set(e,I),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),E.snapshot}async function Sw(i,e,n){const s=ge(i),a=s.xa.get(e),c=s.Oa.get(a.targetId);if(c.length>1)return s.Oa.set(a.targetId,c.filter(f=>!Jl(f,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await fh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&Nh(s.remoteStore,a.targetId),ph(s,a.targetId)}).catch(zs)):(ph(s,a.targetId),await fh(s.localStore,a.targetId,!0))}async function Aw(i,e){const n=ge(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Nh(n.remoteStore,s.targetId))}async function Rw(i,e,n){const s=Dw(i);try{const a=await function(f,m){const y=ge(f),E=at.now(),I=m.reduce((q,J)=>q.add(J.key),Ie());let N,b;return y.persistence.runTransaction("Locally write mutations","readwrite",q=>{let J=mr(),Z=Ie();return y.hs.getEntries(q,I).next(G=>{J=G,J.forEach((Ee,ye)=>{ye.isValidDocument()||(Z=Z.add(Ee))})}).next(()=>y.localDocuments.getOverlayedDocuments(q,J)).next(G=>{N=G;const Ee=[];for(const ye of m){const _e=B0(ye,N.get(ye.key).overlayedDocument);_e!=null&&Ee.push(new Ni(ye.key,_e,Nm(_e.value.mapValue),fr.exists(!0)))}return y.mutationQueue.addMutationBatch(q,E,Ee,m)}).next(G=>{b=G;const Ee=G.applyToLocalDocumentSet(N,Z);return y.documentOverlayCache.saveOverlays(q,G.batchId,Ee)})}).then(()=>({batchId:b.batchId,changes:$m(N)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(f,m,y){let E=f.qa[f.currentUser.toKey()];E||(E=new Ye(Re)),E=E.insert(m,y),f.qa[f.currentUser.toKey()]=E}(s,a.batchId,n),await oa(s,a.changes),await su(s.remoteStore)}catch(a){const c=Oh(a,"Failed to persist write");n.reject(c)}}async function Ig(i,e){const n=ge(i);try{const s=await bE(n.localStore,e);e.targetChanges.forEach((a,c)=>{const f=n.Ba.get(c);f&&(Oe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.Fa=!0:a.modifiedDocuments.size>0?Oe(f.Fa):a.removedDocuments.size>0&&(Oe(f.Fa),f.Fa=!1))}),await oa(n,s,e)}catch(s){await zs(s)}}function Jp(i,e,n){const s=ge(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((c,f)=>{const m=f.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(f,m){const y=ge(f);y.onlineState=m;let E=!1;y.queries.forEach((I,N)=>{for(const b of N.J_)b.ea(m)&&(E=!0)}),E&&Fh(y)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Cw(i,e,n){const s=ge(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Ba.get(e),c=a&&a.key;if(c){let f=new Ye(ue.comparator);f=f.insert(c,Mt.newNoDocument(c,me.min()));const m=Ie().add(c),y=new nu(me.min(),new Map,new Ye(Re),f,m);await Ig(s,y),s.La=s.La.remove(c),s.Ba.delete(e),bh(s)}else await fh(s.localStore,e,!1).then(()=>ph(s,e,n)).catch(zs)}async function kw(i,e){const n=ge(i),s=e.batch.batchId;try{const a=await FE(n.localStore,e);Ag(n,s,null),Sg(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await oa(n,a)}catch(a){await zs(a)}}async function Pw(i,e,n){const s=ge(i);try{const a=await function(f,m){const y=ge(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let I;return y.mutationQueue.lookupMutationBatch(E,m).next(N=>(Oe(N!==null),I=N.keys(),y.mutationQueue.removeMutationBatch(E,N))).next(()=>y.mutationQueue.performConsistencyCheck(E)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(E,I,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,I)).next(()=>y.localDocuments.getDocuments(E,I))})}(s.localStore,e);Ag(s,e,n),Sg(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await oa(s,a)}catch(a){await zs(a)}}function Sg(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function Ag(i,e,n){const s=ge(i);let a=s.qa[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function ph(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||Rg(i,s)})}function Rg(i,e){i.Na.delete(e.path.canonicalString());const n=i.La.get(e);n!==null&&(Nh(i.remoteStore,n),i.La=i.La.remove(e),i.Ba.delete(n),bh(i))}function Zp(i,e,n){for(const s of n)s instanceof Eg?(i.ka.addReference(s.key,e),xw(i,s)):s instanceof wg?(ne("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||Rg(i,s.key)):pe()}function xw(i,e){const n=e.key,s=n.path.canonicalString();i.La.get(n)||i.Na.has(s)||(ne("SyncEngine","New document in limbo: "+n),i.Na.add(s),bh(i))}function bh(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new ue(He.fromString(e)),s=i.Ka.next();i.Ba.set(s,new vw(n)),i.La=i.La.insert(n,s),pg(i.remoteStore,new zr(Hn(bm(n.path)),s,"TargetPurposeLimboResolution",Kl.oe))}}async function oa(i,e,n){const s=ge(i),a=[],c=[],f=[];s.xa.isEmpty()||(s.xa.forEach((m,y)=>{f.push(s.Ua(y,e,n).then(E=>{var I;if((E||n)&&s.isPrimaryClient){const N=E?!E.fromCache:(I=n==null?void 0:n.targetChanges.get(y.targetId))===null||I===void 0?void 0:I.current;s.sharedClientState.updateQueryState(y.targetId,N?"current":"not-current")}if(E){a.push(E);const N=xh.zi(y.targetId,E);c.push(N)}}))}),await Promise.all(f),s.Ma.R_(a),await async function(y,E){const I=ge(y);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>z.forEach(E,b=>z.forEach(b.Wi,q=>I.persistence.referenceDelegate.addReference(N,b.targetId,q)).next(()=>z.forEach(b.Gi,q=>I.persistence.referenceDelegate.removeReference(N,b.targetId,q)))))}catch(N){if(!Bs(N))throw N;ne("LocalStore","Failed to update sequence numbers: "+N)}for(const N of E){const b=N.targetId;if(!N.fromCache){const q=I.us.get(b),J=q.snapshotVersion,Z=q.withLastLimboFreeSnapshotVersion(J);I.us=I.us.insert(b,Z)}}}(s.localStore,c))}async function Nw(i,e){const n=ge(i);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const s=await cg(n.localStore,e);n.currentUser=e,function(c,f){c.Qa.forEach(m=>{m.forEach(y=>{y.reject(new se($.CANCELLED,f))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await oa(n,s.Ts)}}function Vw(i,e){const n=ge(i),s=n.Ba.get(e);if(s&&s.Fa)return Ie().add(s.key);{let a=Ie();const c=n.Oa.get(e);if(!c)return a;for(const f of c){const m=n.xa.get(f);a=a.unionWith(m.view.fa)}return a}}function Cg(i){const e=ge(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ig.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cw.bind(null,e),e.Ma.R_=pw.bind(null,e.eventManager),e.Ma.Wa=mw.bind(null,e.eventManager),e}function Dw(i){const e=ge(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Pw.bind(null,e),e}class Ql{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ru(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return OE(this.persistence,new LE,e.initialUser,this.serializer)}ja(e){return new ug(Ph.ei,this.serializer)}za(e){return new $E}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ql.provider={build:()=>new Ql};class Lw extends Ql{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Oe(this.persistence.referenceDelegate instanceof ql);const s=this.persistence.referenceDelegate.garbageCollector;return new vE(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new ug(s=>ql.ei(s,n),this.serializer)}}class mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Jp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nw.bind(null,this.syncEngine),await uw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hw}()}createDatastore(e){const n=ru(e.databaseInfo.databaseId),s=function(c){return new WE(c)}(e.databaseInfo);return function(c,f,m,y){return new YE(c,f,m,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,f,m){return new JE(s,a,c,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Jp(this.syncEngine,n,0),function(){return Wp.p()?new Wp:new qE}())}createSyncEngine(e,n){return function(a,c,f,m,y,E,I){const N=new Ew(a,c,f,m,y,E);return I&&(N.$a=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=ge(a);ne("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await sa(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mh.provider={build:()=>new mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Lt.UNAUTHENTICATED,this.clientId=km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{ne("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ne("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Oh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Wc(i,e){i.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await cg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function em(i,e){i.asyncQueue.verifyOperationInProgress();const n=await Fw(i);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>Gp(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>Gp(e.remoteStore,a)),i._onlineComponents=e}async function Fw(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wc(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===$.FAILED_PRECONDITION||a.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Vs("Error using user provided cache. Falling back to memory cache: "+n),await Wc(i,new Ql)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await Wc(i,new Lw(void 0));return i._offlineComponents}async function kg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await em(i,i._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await em(i,new mh))),i._onlineComponents}function bw(i){return kg(i).then(e=>e.syncEngine)}async function jw(i){const e=await kg(i),n=e.eventManager;return n.onListen=ww.bind(null,e.syncEngine),n.onUnlisten=Sw.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Tw.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Aw.bind(null,e.syncEngine),n}function Uw(i,e,n={}){const s=new qr;return i.asyncQueue.enqueueAndForget(async()=>function(c,f,m,y,E){const I=new Mw({next:b=>{I.eu(),f.enqueueAndForget(()=>dw(c,N)),b.fromCache&&y.source==="server"?E.reject(new se($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(b)},error:b=>E.reject(b)}),N=new gw(m,I,{includeMetadataChanges:!0,ua:!0});return fw(c,N)}(await jw(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(i,e,n){if(!n)throw new se($.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function zw(i,e,n,s){if(e===!0&&s===!0)throw new se($.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function nm(i){if(!ue.isDocumentKey(i))throw new se($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function rm(i){if(ue.isDocumentKey(i))throw new se($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ou(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":pe()}function Wl(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new se($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ou(i);throw new se($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new se($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new se($.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class au{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new im({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new im(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Kv;switch(s.type){case"firstParty":return new Zv(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=tm.get(n);s&&(ne("ComponentProvider","Removing Datastore"),tm.delete(n),s.terminate())}(this),Promise.resolve()}}function Bw(i,e,n,s={}){var a;const c=(i=Wl(i,au))._getSettings(),f=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==f&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:f,ssl:!1})),s.mockUserToken){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=Lt.MOCK_USER;else{m=k_(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new se($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Lt(E)}i._authCredentials=new Yv(new Cm(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class mn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class Hr extends qs{constructor(e,n,s){super(e,n,bm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ue(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function $w(i,e,...n){if(i=Ns(i),xg("collection","path",e),i instanceof au){const s=He.fromString(e,...n);return rm(s),new Hr(i,null,s)}{if(!(i instanceof mn||i instanceof Hr))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...n));return rm(s),new Hr(i.firestore,null,s)}}function qw(i,e,...n){if(i=Ns(i),arguments.length===1&&(e=km.newId()),xg("doc","path",e),i instanceof au){const s=He.fromString(e,...n);return nm(s),new mn(i,null,new ue(s))}{if(!(i instanceof mn||i instanceof Hr))throw new se($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...n));return nm(s),new mn(i.firestore,i instanceof Hr?i.converter:null,new ue(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new fg(this,"async_queue_retry"),this.fu=()=>{const s=Qc();s&&ne("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=Qc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Qc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new qr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Bs(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(f){let m=f.message||"";return f.stack&&(m=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),m}(s);throw pr("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=Mh.createAndSchedule(this,e,n,s,c=>this.Su(c));return this.du.push(a),a}pu(){this.Au&&pe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class jh extends au{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new sm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sm(e),this._firestoreClient=void 0,await e}}}function Hw(i,e){const n=typeof i=="object"?i:Fv(),s=typeof i=="string"?i:"(default)",a=Dv(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=R_("firestore");c&&Bw(a,...c)}return a}function Ng(i){if(i._terminated)throw new se($.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Qw(i),i._firestoreClient}function Qw(i){var e,n,s;const a=i._freezeSettings(),c=function(m,y,E,I){return new p0(m,y,E,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,Pg(I.experimentalLongPollingOptions),I.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new Ow(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bs(Rt.fromBase64String(e))}catch(n){throw new se($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bs(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=/^__.*__$/;class Gw{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new ra(e,this.data,n,this.fieldTransforms)}}function Dg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class $h{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new $h(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Lu(e),a}Bu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Gl(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Dg(this.Mu)&&Ww.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Kw{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ru(e)}$u(e,n,s,a=!1){return new $h({Mu:e,methodName:n,Ku:s,path:At.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lg(i){const e=i._freezeSettings(),n=ru(i._databaseId);return new Kw(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Yw(i,e,n,s,a,c={}){const f=i.$u(c.merge||c.mergeFields?2:0,e,n,a);Fg("Data must be an object, but it was:",f,s);const m=Mg(s,f);let y,E;if(c.merge)y=new Nn(f.fieldMask),E=f.fieldTransforms;else if(c.mergeFields){const I=[];for(const N of c.mergeFields){const b=Jw(e,N,n);if(!f.contains(b))throw new se($.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);eT(I,b)||I.push(b)}y=new Nn(I),E=f.fieldTransforms.filter(N=>y.covers(N.field))}else y=null,E=f.fieldTransforms;return new Gw(new dn(m),y,E)}function Xw(i,e,n,s=!1){return qh(n,i.$u(s?4:3,e))}function qh(i,e){if(Og(i=Ns(i)))return Fg("Unsupported field value:",e,i),Mg(i,e);if(i instanceof Vg)return function(s,a){if(!Dg(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const c=[];let f=0;for(const m of s){let y=qh(m,a.ku(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=Ns(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return O0(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=at.fromDate(s);return{timestampValue:$l(a.serializer,c)}}if(s instanceof at){const c=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$l(a.serializer,c)}}if(s instanceof zh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof bs)return{bytesValue:ng(a.serializer,s._byteString)};if(s instanceof mn){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.qu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ch(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Bh)return function(f,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw m.qu("VectorValues must only contain numeric values.");return Sh(m.serializer,y)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${ou(s)}`)}(i,e)}function Mg(i,e){const n={};return Pm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(i,(s,a)=>{const c=qh(a,e.Ou(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function Og(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof at||i instanceof zh||i instanceof bs||i instanceof mn||i instanceof Vg||i instanceof Bh)}function Fg(i,e,n){if(!Og(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=ou(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function Jw(i,e,n){if((e=Ns(e))instanceof Uh)return e._internalPath;if(typeof e=="string")return bg(i,e);throw Gl("Field path arguments must be of type string or ",i,!1,void 0,n)}const Zw=new RegExp("[~\\*/\\[\\]]");function bg(i,e,n){if(e.search(Zw)>=0)throw Gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Uh(...e.split("."))._internalPath}catch{throw Gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Gl(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${a}`),y+=")"),new se($.INVALID_ARGUMENT,m+i+y)}function eT(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tT extends jg{data(){return super.data()}}function Hh(i,e){return typeof e=="string"?bg(i,e):e instanceof Uh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new se($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qh{}class rT extends Qh{}function iT(i,e,...n){let s=[];e instanceof Qh&&s.push(e),s=s.concat(n),function(c){const f=c.filter(y=>y instanceof Wh).length,m=c.filter(y=>y instanceof lu).length;if(f>1||f>0&&m>0)throw new se($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)i=a._apply(i);return i}class lu extends rT{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new lu(e,n,s)}_apply(e){const n=this._parse(e);return Ug(e._query,n),new qs(e.firestore,e.converter,oh(e._query,n))}_parse(e){const n=Lg(e.firestore);return function(c,f,m,y,E,I,N){let b;if(E.isKeyField()){if(I==="array-contains"||I==="array-contains-any")throw new se($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if(I==="in"||I==="not-in"){am(N,I);const q=[];for(const J of N)q.push(om(y,c,J));b={arrayValue:{values:q}}}else b=om(y,c,N)}else I!=="in"&&I!=="not-in"&&I!=="array-contains-any"||am(N,I),b=Xw(m,f,N,I==="in"||I==="not-in");return ot.create(E,I,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sT(i,e,n){const s=e,a=Hh("where",i);return lu._create(a,s,n)}class Wh extends Qh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wh(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Vn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(a,c){let f=a;const m=c.getFlattenedFilters();for(const y of m)Ug(f,y),f=oh(f,y)}(e._query,n),new qs(e.firestore,e.converter,oh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function om(i,e,n){if(typeof(n=Ns(n))=="string"){if(n==="")throw new se($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jm(e)&&n.indexOf("/")!==-1)throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(He.fromString(n));if(!ue.isDocumentKey(s))throw new se($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Cp(i,new ue(s))}if(n instanceof mn)return Cp(i,n._key);throw new se($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ou(n)}.`)}function am(i,e){if(!Array.isArray(i)||i.length===0)throw new se($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ug(i,e){const n=function(a,c){for(const f of a)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oT{convertValue(e,n="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Pi(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(f=>nt(f.doubleValue));return new Bh(c)}convertGeoPoint(e){return new zh(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Xl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Xo(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=He.fromString(e);Oe(lg(s));const a=new Jo(s.get(1),s.get(3)),c=new ue(s.popFirst(5));return a.isEqual(n)||pr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lT extends jg{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ll(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Hh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Ll extends lT{data(e={}){return super.data(e)}}class uT{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new kl(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Ll(this._firestore,this._userDataWriter,s.key,s,new kl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map(m=>{const y=new Ll(a._firestore,a._userDataWriter,m.doc.key,m.doc,new kl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const y=new Ll(a._firestore,a._userDataWriter,m.doc.key,m.doc,new kl(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let E=-1,I=-1;return m.type!==0&&(E=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),I=f.indexOf(m.doc.key)),{type:cT(m.type),doc:y,oldIndex:E,newIndex:I}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cT(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}class hT extends oT{constructor(e){super(),this.firestore=e}convertBytes(e){return new bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function fT(i){i=Wl(i,qs);const e=Wl(i.firestore,jh),n=Ng(e),s=new hT(e);return nT(i._query),Uw(n,i._query).then(a=>new uT(e,s,i,a))}function dT(i,e){const n=Wl(i.firestore,jh),s=qw(i),a=aT(i.converter,e);return pT(n,[Yw(Lg(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,fr.exists(!1))]).then(()=>s)}function pT(i,e){return function(s,a){const c=new qr;return s.asyncQueue.enqueueAndForget(async()=>Rw(await bw(s),a,c)),c.promise}(Ng(i),e)}(function(e,n=!0){(function(a){Us=a})(Ov),Fl(new Go("firestore",(s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new jh(new Xv(s.getProvider("auth-internal")),new t0(s.getProvider("app-check-internal")),function(E,I){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new se($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jo(E.options.projectId,I)}(f,a),f);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Ps(wp,"4.7.5",e),Ps(wp,"4.7.5","esm2017")})();const mT={apiKey:"AIzaSyCsdFBQ80EThKQPbms7waN4D_t6-1PQZn8",authDomain:"earnyourtime-19af9.firebaseapp.com",projectId:"earnyourtime-19af9",storageBucket:"earnyourtime-19af9.firebasestorage.app",messagingSenderId:"882173894563",appId:"1:882173894563:web:26f373fd38997155f7c416"},gT=_m(mT),yT=Hw(gT);var Gc={},lm;function _T(){if(lm)return Gc;lm=1;var i=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;return Gc.validate=function(e){if(!e||e.length>254)return!1;var n=i.test(e);if(!n)return!1;var s=e.split("@");if(s[0].length>64)return!1;var a=s[1].split(".");return!a.some(function(c){return c.length>63})},Gc}var vT=_T();const ET=$y(vT),wT=async i=>{if(!i||!ET.validate(i)){alert("Please enter a valid email address.");return}try{const e=$w(yT,"emails-waitlisted"),n=iT(e,sT("email","==",i)),s=await fT(n);if(!s.empty){alert("This email is already on the waitlist.");return}const a=at.now(),c=60*5e3;if(s.docs.map(m=>m.data()).some(m=>{var y;return a.toMillis()-((y=m.timestamp)==null?void 0:y.toMillis())<c})){alert("Please wait a while before submitting another email.");return}await dT(e,{email:i,timestamp:a}),alert("You've been added to the waitlist!")}catch(e){console.error("Error adding email:",e),alert("Failed to add email. Please try again.")}},TT=({theme:i})=>{const[e,n]=pn.useState(!1),[s,a]=pn.useState("");return U.jsx("section",{id:"join-waitlist",className:"py-20",children:U.jsx("div",{className:"container mx-auto px-4",children:U.jsxs("div",{className:`max-w-4xl mx-auto text-center p-12 rounded-2xl
            ${i==="dark"?"bg-gradient-to-r from-gray-800 to-gray-900 border border-gray-800":"bg-gradient-to-r from-blue-50 to-blue-100"}`,children:[U.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Ready to Transform Your Digital Habits?"}),U.jsx("p",{className:`text-xl mb-8 ${i==="dark"?"text-gray-400":"text-gray-600"}`,children:"Join the waitlist and be the first to experience the future of productivity."}),U.jsxs("div",{className:"flex flex-col items-center",children:[U.jsx("div",{className:`transition-all duration-700 ease-in-out transform ${e?"opacity-0 scale-95 pointer-events-none":"opacity-100 scale-100"}`,children:!e&&U.jsxs("button",{onClick:()=>n(!0),className:`px-8 py-4 rounded-full font-medium inline-flex items-center space-x-2
            transition-all duration-300 transform hover:scale-105
            ${i==="dark"?"bg-blue-600 hover:bg-blue-500 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:[U.jsx("span",{children:"Join Waitlist"}),U.jsx(cm,{className:"w-5 h-5"})]})}),U.jsx("div",{className:`flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-4 transition-all duration-700 ease-in-out transform ${e?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-4 pointer-events-none"}`,children:e&&U.jsxs(U.Fragment,{children:[U.jsx("input",{type:"email",value:s,onChange:c=>a(c.target.value),placeholder:"Enter your email",className:`flex-1 px-6 py-3 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500
                ${i==="dark"?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"} border`}),U.jsx("button",{onClick:()=>wT(s),className:`px-8 py-3 rounded-full font-medium
                ${i==="dark"?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"}
                text-white transition-colors duration-200`,children:"Notify Me"})]})})]})]})})})},IT=({theme:i})=>U.jsx(U.Fragment,{children:U.jsx("footer",{className:`py-6 ${i==="dark"?"bg-gray-800 text-gray-400":"bg-gray-200 text-gray-600"} transition-colors duration-300`,children:U.jsxs("div",{className:"text-center",children:[U.jsxs("p",{className:"text-sm px-4",children:["Built with  by developers for the open-source community. A special thanks to all our contributors."," "]}),U.jsx("a",{href:"https://github.com/your-repo",target:"_blank",rel:"noopener noreferrer",className:`${i==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"} underline`,children:"Join us on GitHub"})]})})}),ST=()=>{const[i,e]=pn.useState(localStorage.getItem("theme")||"light"),[n,s]=pn.useState(0),[a,c]=pn.useState(!1);pn.useEffect(()=>{const m=()=>{const y=window.scrollY,E=document.documentElement.scrollHeight-window.innerHeight;s(y/E*100),c(window.scrollY>50)};return window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m)},[]);const f=()=>{const m=i==="light"?"dark":"light";e(m),localStorage.setItem("theme",m),document.documentElement.classList.toggle("dark")};return U.jsxs("div",{className:`min-h-screen ${i==="dark"?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:[U.jsx(f_,{theme:i,toggleTheme:f,scroll:a,scrolled:n}),U.jsx(d_,{theme:i}),U.jsx(p_,{theme:i}),U.jsx(m_,{theme:i}),U.jsx(g_,{theme:i}),U.jsx(TT,{theme:i}),U.jsx(IT,{theme:i})]})};Jy.createRoot(document.getElementById("root")).render(U.jsx(pn.StrictMode,{children:U.jsx(ST,{})}));
